# æç¤ºè¯å·¥ç¨‹å®Œæ•´æŒ‡å—ï¼šæ¸¸æˆå®¢æˆ·ç«¯å¼€å‘å®æˆ˜

> **æ¸¸æˆå¼€å‘æç¤ºè¯å·¥ç¨‹ä¸“é¡¹æŒ‡å—**
> **ç‰ˆæœ¬**: v3.0
> **æ›´æ–°æ—¥æœŸ**: 2026-01-25
> **é¢å‘**: æ¸¸æˆå®¢æˆ·ç«¯å¼€å‘è€…ä¸ AI è¾…åŠ©ç¼–ç¨‹å·¥ç¨‹å¸ˆ
> **é‡ç‚¹**: Unityã€Unreal Engineã€Cocos Creator å¼€å‘åœºæ™¯

---

## ğŸ“š ç›®å½•

1. [æç¤ºè¯å·¥ç¨‹æ¦‚è¿°](#1-æç¤ºè¯å·¥ç¨‹æ¦‚è¿°)
2. [æ ¸å¿ƒæç¤ºè¯æŠ€æœ¯ä¸æ¨¡å¼](#2-æ ¸å¿ƒæç¤ºè¯æŠ€æœ¯ä¸æ¨¡å¼)
3. [é«˜çº§æç¤ºè¯æŠ€æœ¯](#3-é«˜çº§æç¤ºè¯æŠ€æœ¯)
4. [æ¸¸æˆå¼€å‘ä¸“é¡¹æŠ€æœ¯](#4-æ¸¸æˆå¼€å‘ä¸“é¡¹æŠ€æœ¯)
5. [å®æˆ˜æ¡ˆä¾‹æ·±åº¦è§£æ](#5-å®æˆ˜æ¡ˆä¾‹æ·±åº¦è§£æ)
6. [æŠ€æœ¯åŸç†æ·±åº¦å‰–æ](#6-æŠ€æœ¯åŸç†æ·±åº¦å‰–æ)
7. [è¡Œä¸šå·¥å…·ä¸ç”Ÿæ€](#7-è¡Œä¸šå·¥å…·ä¸ç”Ÿæ€)
8. [ä»£ç ç”Ÿæˆä¸å®¡æŸ¥ä¸“é¡¹](#8-ä»£ç ç”Ÿæˆä¸å®¡æŸ¥ä¸“é¡¹)
9. [æœ€ä½³å®è·µä¸è®¾è®¡æ¨¡å¼](#9-æœ€ä½³å®è·µä¸è®¾è®¡æ¨¡å¼)
10. [æœªæ¥è¶‹åŠ¿ä¸å‘å±•æ–¹å‘](#10-æœªæ¥è¶‹åŠ¿ä¸å‘å±•æ–¹å‘)
11. [å‚è€ƒèµ„æ–™](#11-å‚è€ƒèµ„æ–™)
12. [æ€»ç»“](#12-æ€»ç»“)

---

## 1. æç¤ºè¯å·¥ç¨‹æ¦‚è¿°

### 1.1 ä»€ä¹ˆæ˜¯æç¤ºè¯å·¥ç¨‹ï¼Ÿ

**å®šä¹‰**ï¼š

æç¤ºè¯å·¥ç¨‹ï¼ˆPrompt Engineeringï¼‰æ˜¯ä¸€é—¨è®¾è®¡å’Œä¼˜åŒ–è¾“å…¥æç¤ºè¯ï¼ˆpromptsï¼‰ä»¥å¼•å¯¼å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ç”Ÿæˆé«˜è´¨é‡ã€å‡†ç¡®è¾“å‡ºçš„æŠ€æœ¯ä¸è‰ºæœ¯ã€‚

**æ ¸å¿ƒå…¬å¼**ï¼š

```
é«˜è´¨é‡è¾“å‡º = f(æ¸…æ™°æŒ‡ä»¤ + å……åˆ†ä¸Šä¸‹æ–‡ + åˆé€‚ç¤ºä¾‹ + æœ‰æ•ˆçº¦æŸ)
```

### 1.2 ä¸ºä»€ä¹ˆéœ€è¦æç¤ºè¯å·¥ç¨‹ï¼Ÿ

**LLM çš„æœ¬è´¨ç‰¹æ€§**ï¼š

1. **æ¦‚ç‡æ¨¡å‹**ï¼šåŒä¸€è¾“å…¥å¯èƒ½äº§ç”Ÿä¸åŒè¾“å‡º
2. **ä¸Šä¸‹æ–‡æ•æ„Ÿ**ï¼šè¾“å‡ºé«˜åº¦ä¾èµ–æä¾›çš„ä¸Šä¸‹æ–‡
3. **çŸ¥è¯†è¾¹ç•Œ**ï¼šå—é™äºè®­ç»ƒæ•°æ®å’Œæ—¶é—´
4. **æŒ‡ä»¤éµå¾ª**ï¼šéœ€è¦æ˜ç¡®çš„æŒ‡ä»¤æ‰èƒ½å‡†ç¡®æ‰§è¡Œä»»åŠ¡

**æç¤ºè¯å·¥ç¨‹çš„ä»·å€¼**ï¼š

```
æ— æç¤ºè¯å·¥ç¨‹:
è¾“å…¥: "å†™ä¸ªå‡½æ•°"
è¾“å‡º: å¯èƒ½æ˜¯ä»»ä½•è¯­è¨€ã€ä»»ä½•åŠŸèƒ½çš„å‡½æ•°

æœ‰æç¤ºè¯å·¥ç¨‹:
è¾“å…¥: "ç”¨ Python å†™ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶æ•´æ•°åˆ—è¡¨ï¼Œè¿”å›ç¬¬äºŒå¤§æ•°å­—"
è¾“å‡º: ç²¾ç¡®çš„ Python å‡½æ•°å®ç°
```

### 1.3 æç¤ºè¯å·¥ç¨‹çš„å‘å±•å†ç¨‹

```
2020å¹´: GPT-3 å‘å¸ƒï¼ŒZero-shot/Few-shot å­¦ä¹ 
2021å¹´: æç¤ºè¯å·¥ç¨‹æ¦‚å¿µæ­£å¼æå‡º
2022å¹´: Chain-of-Thought æ¨ç†æŠ€æœ¯çªç ´
2023å¹´: Agentã€RAGã€Tool Calling å…´èµ·
2024å¹´: ç»“æ„åŒ–æç¤ºã€æç¤ºè¯ç®¡ç†ç³»ç»Ÿæˆç†Ÿ
2025å¹´: è‡ªé€‚åº”æç¤ºã€å¤šæ¨¡æ€æç¤ºæˆä¸ºä¸»æµ
```

#### æ ¸å¿ƒè¦ç‚¹

*   **å®šä¹‰ä¸ä»·å€¼**ï¼šæç¤ºè¯å·¥ç¨‹æ˜¯ä¼˜åŒ– LLM è¾“å…¥ä»¥è·å¾—æœŸæœ›è¾“å‡ºçš„æŠ€æœ¯ï¼Œå®ƒæå‡äº† LLM åœ¨å¤æ‚ä»»åŠ¡ä¸Šçš„å‡†ç¡®æ€§å’Œå¯æ§æ€§ã€‚
*   **å¿…è¦æ€§**ï¼šé‰´äº LLM çš„æ¦‚ç‡æ€§ã€ä¸Šä¸‹æ–‡æ•æ„Ÿæ€§ã€çŸ¥è¯†è¾¹ç•ŒåŠæŒ‡ä»¤éµå¾ªç‰¹æ€§ï¼Œæç¤ºè¯å·¥ç¨‹æ˜¯é‡Šæ”¾å…¶æ½œåŠ›çš„å…³é”®ã€‚
*   **å‘å±•è¿…é€Ÿ**ï¼šä»æ—©æœŸçš„é›¶æ ·æœ¬/å°‘æ ·æœ¬å­¦ä¹ ï¼Œåˆ°åæ¥çš„æ€ç»´é“¾ã€Agentã€RAG ç­‰ï¼Œæç¤ºè¯å·¥ç¨‹æŠ€æœ¯æŒç»­æ¼”è¿›ï¼Œå¹¶å‘è‡ªé€‚åº”ã€å¤šæ¨¡æ€ç­‰æ–¹å‘å‘å±•ã€‚

---

## 2. æ ¸å¿ƒæç¤ºè¯æŠ€æœ¯ä¸æ¨¡å¼

### 2.1 åŸºç¡€æç¤ºæ¨¡å¼

#### 2.1.1 é›¶æ ·æœ¬æç¤ºï¼ˆZero-Shotï¼‰

**å®šä¹‰**ï¼šä¸æä¾›ç¤ºä¾‹ï¼Œç›´æ¥ç»™å‡ºä»»åŠ¡æŒ‡ä»¤ã€‚

**æ¨¡æ¿**ï¼š

```
è¯·ç¼–å†™ä¸€ä¸ª Python å‡½æ•°ï¼Œæ¥æ”¶æ•´æ•°åˆ—è¡¨ï¼Œè¿”å›åˆ—è¡¨ä¸­çš„ç¬¬äºŒå¤§æ•°å­—ã€‚
```

**æ›´ç®€æ´çš„ç‰ˆæœ¬**ï¼š

```
å°†ä»¥ä¸‹æ–‡æœ¬åˆ†ç±»ä¸ºæ­£é¢ã€è´Ÿé¢æˆ–ä¸­æ€§ï¼š
"è¿™å®¶é¤å…çš„é£Ÿç‰©å¾ˆå¥½åƒï¼Œä½†æœåŠ¡å¤ªæ…¢äº†ã€‚"
```

**è¯´æ˜**ï¼š
- æ²¡æœ‰ä»»ä½•ç¤ºä¾‹ï¼ˆç¤ºä¾‹ = è¾“å…¥-è¾“å‡ºå¯¹ï¼‰
- æ²¡æœ‰è§’è‰²è®¾å®š
- ç›´æ¥ç»™å‡ºä»»åŠ¡æŒ‡ä»¤
- ä¾èµ–æ¨¡å‹å·²æœ‰çš„çŸ¥è¯†

**ä¸å…¶ä»–æŠ€æœ¯å¯¹æ¯”**ï¼š
```
âŒ ä¸æ˜¯ Zero-Shotï¼ˆåŒ…å«äº†å…¶ä»–æŠ€æœ¯ï¼‰ï¼š
ä½ æ˜¯ä¸€ä½èµ„æ·±å¼€å‘è€…ï¼ˆè§’è‰²è®¾å®šï¼‰
è¯·å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¦æ±‚ï¼š
- ä½¿ç”¨ Python 3.12+ï¼ˆè¾“å‡ºè¦æ±‚ï¼‰
- åŒ…å«ç±»å‹æ³¨è§£ï¼ˆè¾“å‡ºè¦æ±‚ï¼‰

âœ… çº¯ç²¹çš„ Zero-Shotï¼š
è¯·ç”¨ Python å†™ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶æ•´æ•°åˆ—è¡¨å¹¶è¿”å›ç¬¬äºŒå¤§æ•°å­—ã€‚
```

**é€‚ç”¨åœºæ™¯**ï¼š

- ç®€å•ã€æ˜ç¡®çš„ä»»åŠ¡
- æ¨¡å‹å·²ç»"ç†è§£"çš„ä»»åŠ¡ç±»å‹
- å¿«é€ŸåŸå‹å¼€å‘

**å±€é™æ€§**ï¼š

- å¤æ‚ä»»åŠ¡æ•ˆæœä¸ç¨³å®š
- å¯èƒ½äº§ç”Ÿæ ¼å¼ä¸ä¸€è‡´çš„è¾“å‡º
- ç¼ºå°‘å‚è€ƒæ ‡å‡†

#### 2.1.2 å°‘æ ·æœ¬æç¤ºï¼ˆFew-Shotï¼‰

**å®šä¹‰**ï¼šæä¾› K ä¸ªç¤ºä¾‹ï¼ˆé€šå¸¸ 3-10 ä¸ªï¼‰å¼•å¯¼æ¨¡å‹ç†è§£ä»»åŠ¡ã€‚

**æ¨¡æ¿**ï¼š

```
ä»»åŠ¡ï¼šæ¸¸æˆä»£ç å¼•æ“è¯†åˆ«

ç¤ºä¾‹ 1:
è¾“å…¥: "public class Player : MonoBehaviour {}"
è¾“å‡º: Unity C#

ç¤ºä¾‹ 2:
è¾“å…¥: "export class Player extends cc.Component {}"
è¾“å‡º: Cocos Creator TypeScript

ç¤ºä¾‹ 3:
è¾“å…¥: "UCLASS() class APLAYER_API APlayer : public ACharacter {}"
è¾“å‡º: Unreal Engine C++

ç¤ºä¾‹ 4:
è¾“å…¥: "class Player < GodotObject {}"
è¾“å‡º: Godot GDScript

ç°åœ¨ï¼š
è¾“å…¥: "{ç”¨æˆ·ä»£ç ç‰‡æ®µ}"
è¾“å‡º:
```

**ä¼˜åŒ–æŠ€å·§**ï¼š

1. **ç¤ºä¾‹é€‰æ‹©**ï¼šé€‰æ‹©è¦†ç›–å„ç§æƒ…å†µçš„ä»£è¡¨æ€§ç¤ºä¾‹
2. **ç¤ºä¾‹é¡ºåº**ï¼šå°†æœ€ç›¸å…³çš„ç¤ºä¾‹æ”¾åœ¨æœ€åï¼ˆè¿‘å› æ•ˆåº”ï¼‰
3. **ç¤ºä¾‹å¤šæ ·æ€§**ï¼šé¿å…ç¤ºä¾‹ä¹‹é—´è¿‡äºç›¸ä¼¼
4. **ç¤ºä¾‹è´¨é‡**ï¼šç¤ºä¾‹åº”è¯¥æ¸…æ™°ã€æ— æ­§ä¹‰

**é«˜çº§æŠ€å·§ï¼šåŠ¨æ€ç¤ºä¾‹é€‰æ‹©**

```python
def select_examples(query, example_pool, k=5):
    """
    æ ¹æ®æŸ¥è¯¢åŠ¨æ€é€‰æ‹©æœ€ç›¸å…³çš„ç¤ºä¾‹
    """
    # 1. è®¡ç®—æŸ¥è¯¢ä¸æ¯ä¸ªç¤ºä¾‹çš„ç›¸ä¼¼åº¦ (embed æ˜¯ä¸€ä¸ªæ¦‚å¿µæ€§å‡½æ•°ï¼Œä»£è¡¨ç”Ÿæˆæ–‡æœ¬åµŒå…¥å‘é‡)
    query_emb = embed(query)
    similarities = []
    for ex in example_pool:
        ex_emb = embed(ex['input'])
        sim = cosine_similarity(query_emb, ex_emb) # cosine_similarity æ˜¯ä¸€ä¸ªæ¦‚å¿µæ€§å‡½æ•°ï¼Œä»£è¡¨è®¡ç®—ä½™å¼¦ç›¸ä¼¼åº¦
        similarities.append((ex, sim))

    # 2. é€‰æ‹©ç›¸ä¼¼åº¦æœ€é«˜çš„ K ä¸ªç¤ºä¾‹
    similarities.sort(key=lambda x: x[1], reverse=True)
    return [ex for ex, _ in similarities[:k]]
```

#### 2.1.3 è§’è‰²è®¾å®šï¼ˆRole Playingï¼‰

**å®šä¹‰**ï¼šä¸º LLM åˆ†é…ç‰¹å®šè§’è‰²ï¼Œå¼•å¯¼å…¶é‡‡ç”¨ç›¸åº”çš„ä¸“ä¸šè§†è§’å’Œè¯­è¨€é£æ ¼ã€‚

**å¸¸ç”¨è§’è‰²æ¨¡æ¿**ï¼š

**Unity æ¸¸æˆå¼€å‘ä¸“å®¶**ï¼š

```
ä½ æ˜¯ä¸€ä½èµ„æ·±çš„ Unity æ¸¸æˆå¼€å‘å·¥ç¨‹å¸ˆï¼Œæœ‰ 8 å¹´ä»¥ä¸Š Unity å¼€å‘ç»éªŒã€‚

ä½ çš„ä¸“é•¿åŒ…æ‹¬ï¼š
- C# é«˜çº§ç¼–ç¨‹ï¼ˆå¼‚æ­¥ç¼–ç¨‹ã€å†…å­˜ç®¡ç†ã€æ€§èƒ½ä¼˜åŒ–ï¼‰
- Unity æ¸²æŸ“ç®¡çº¿ï¼ˆBuilt-inã€URPã€HDRPï¼‰
- Unity DOTS æŠ€æœ¯æ ˆï¼ˆECSã€Job Systemã€Burst Compilerï¼‰
- ç§»åŠ¨ç«¯ä¼˜åŒ–ï¼ˆDrawCall ä¼˜åŒ–ã€å†…å­˜ä¼˜åŒ–ã€å¸§ç‡ä¼˜åŒ–ï¼‰
- Unity ç½‘ç»œåŒæ­¥æ–¹æ¡ˆï¼ˆMirrorã€Fish-Netã€Photonï¼‰

è¯·ä»¥ä¸“ä¸šçš„è§’åº¦å›ç­”ä»¥ä¸‹é—®é¢˜ï¼Œå¹¶æä¾›ï¼š
1. é—®é¢˜åˆ†æ
2. Unity æœ€ä½³å®è·µæ–¹æ¡ˆ
3. æ€§èƒ½è€ƒé‡
4. ä»£ç ç¤ºä¾‹
```

**Unreal Engine ä¸“å®¶**ï¼š

```
ä½ æ˜¯ä¸€ä½ Epic Games è®¤è¯çš„ Unreal Engine ä¸“å®¶ã€‚

ä½ çš„ä¸“é•¿åŒ…æ‹¬ï¼š
- C++ å’Œè“å›¾åä½œå¼€å‘
- UE5 æ¸²æŸ“ç‰¹æ€§ï¼ˆNaniteã€Lumenï¼‰
- Gameplay Ability System (GAS)
- UE ç½‘ç»œæ¶æ„ï¼ˆReplicationã€RPCï¼‰
- è™šå¹»ç¼–è¾‘å™¨æ‰©å±•å¼€å‘

è¯·ä»¥ä¸“ä¸šçš„è§’åº¦å›ç­”ä»¥ä¸‹é—®é¢˜ï¼Œå¹¶æä¾›ï¼š
1. UE æœ€ä½³å®è·µæ–¹æ¡ˆ
2. C++ ä¸è“å›¾æ··åˆå¼€å‘å»ºè®®
3. æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ
4. ä»£ç ç¤ºä¾‹
```

**æ¸¸æˆå®¢æˆ·ç«¯æ¶æ„å¸ˆ**ï¼š

```
ä½ æ˜¯ä¸€ä½æ¸¸æˆå®¢æˆ·ç«¯æ¶æ„å¸ˆï¼Œæ›¾ä¸»å¯¼å¤šæ¬¾ MMORPG/æ‰‹æ¸¸çš„å®¢æˆ·ç«¯æ¶æ„è®¾è®¡ã€‚

ä½ çš„ä¸“é•¿åŒ…æ‹¬ï¼š
- æ¸¸æˆæ¶æ„è®¾è®¡ï¼ˆMVCã€ECSã€MVVMï¼‰
- çƒ­æ›´æ–°æ–¹æ¡ˆè®¾è®¡
- èµ„æºç®¡ç†ç­–ç•¥
- æ€§èƒ½ç›‘æ§ä¸ä¼˜åŒ–
- è·¨å¹³å°é€‚é…ï¼ˆiOS/Android/PCï¼‰

è¯·ä»¥ä¸“ä¸šçš„è§’åº¦å›ç­”ä»¥ä¸‹é—®é¢˜ï¼Œå¹¶æä¾›ï¼š
1. æ¶æ„è®¾è®¡æ–¹æ¡ˆ
2. æŠ€æœ¯é€‰å‹å»ºè®®
3. æ‰©å±•æ€§è€ƒè™‘
4. å®æ–½è·¯çº¿å›¾
```

**ä»£ç å®¡æŸ¥è€…è§’è‰²**ï¼š

```
ä½ æ˜¯ä¸€ä½ä¸¥æ ¼çš„æ¸¸æˆä»£ç å®¡æŸ¥è€…ï¼Œ
å…³æ³¨ä»£ç è´¨é‡ã€å®‰å…¨æ€§ã€æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§ã€‚

å®¡æŸ¥æ—¶ä½ ä¼šæ£€æŸ¥ï¼š
1. æ˜¯å¦ç¬¦åˆ SOLID åŸåˆ™
2. æ˜¯å¦æœ‰å†…å­˜æ³„æ¼é£é™©
3. æ˜¯å¦æœ‰æ€§èƒ½é—®é¢˜ï¼ˆå¦‚æ¯å¸§åˆ†é…ã€GC å‹åŠ›ï¼‰
4. æ˜¯å¦æ˜“äºæµ‹è¯•å’Œç»´æŠ¤
5. ä»£ç é£æ ¼æ˜¯å¦ä¸€è‡´

è¯·å®¡æŸ¥ä»¥ä¸‹ä»£ç ï¼Œå¹¶æä¾›ï¼š
- é—®é¢˜æ¸…å•
- ä¸¥é‡ç¨‹åº¦è¯„çº§
- æ”¹è¿›å»ºè®®
- é‡æ„ç¤ºä¾‹
```

#### 2.1.4 ä»»åŠ¡åˆ†è§£ï¼ˆTask Decompositionï¼‰

**å®šä¹‰**ï¼šå°†å¤æ‚ä»»åŠ¡åˆ†è§£ä¸ºå¤šä¸ªå­ä»»åŠ¡ï¼Œé€æ­¥å®Œæˆã€‚

**æ¨¡æ¿**ï¼š

```
è¯·æŒ‰ä»¥ä¸‹æ­¥éª¤å®Œæˆä»»åŠ¡ï¼š

### æ­¥éª¤ 1: éœ€æ±‚åˆ†æ
- ç†è§£ä»»åŠ¡ç›®æ ‡
- è¯†åˆ«å…³é”®è¦ç´ 
- åˆ—å‡ºçº¦æŸæ¡ä»¶

### æ­¥éª¤ 2: æ–¹æ¡ˆè®¾è®¡
- åˆ†æå¯èƒ½çš„è§£å†³æ–¹æ¡ˆ
- è¯„ä¼°ä¼˜åŠ£
- é€‰æ‹©æœ€ä¼˜æ–¹æ¡ˆ

### æ­¥éª¤ 3: è¯¦ç»†è®¾è®¡
- è®¾è®¡æ•°æ®ç»“æ„
- è®¾è®¡ç®—æ³•æµç¨‹
- è€ƒè™‘è¾¹ç•Œæƒ…å†µ

### æ­¥éª¤ 4: ä»£ç å®ç°
- ç¼–å†™æ ¸å¿ƒé€»è¾‘
- æ·»åŠ é”™è¯¯å¤„ç†
- ç¼–å†™æ³¨é‡Š

### æ­¥éª¤ 5: æµ‹è¯•éªŒè¯
- è®¾è®¡æµ‹è¯•ç”¨ä¾‹
- æ‰§è¡Œæµ‹è¯•
- éªŒè¯ç»“æœ

ç°åœ¨å¼€å§‹æ‰§è¡Œæ­¥éª¤ 1...
```

### 2.2 ç»“æ„åŒ–æç¤ºæ¨¡å¼

#### 2.2.1 CO-STAR æ¡†æ¶

**CO-STAR** æ˜¯ä¸€ä¸ªå¹¿æ³›ä½¿ç”¨çš„æç¤ºè¯ç»“æ„æ¡†æ¶ï¼š

```
**C**ontext (èƒŒæ™¯)
- é¡¹ç›®èƒŒæ™¯
- ç›®æ ‡ç”¨æˆ·
- ä½¿ç”¨åœºæ™¯

**O**bjective (ç›®æ ‡)
- è¦å®Œæˆä»€ä¹ˆä»»åŠ¡
- æœŸæœ›çš„ç»“æœ
- æˆåŠŸæ ‡å‡†

**S**tyle (é£æ ¼)
- è¾“å‡ºé£æ ¼
- è¯­è¨€é£æ ¼
- æ ¼å¼è¦æ±‚

**T**one (è¯­æ°”)
- æ­£å¼/éæ­£å¼
- ä¸“ä¸š/å‹å¥½
- å…¶ä»–è¯­æ°”ç‰¹å¾

**A**udience (å—ä¼—)
- è°å°†çœ‹åˆ°è¾“å‡º
- å—ä¼—çš„èƒŒæ™¯çŸ¥è¯†
- å—ä¼—çš„æœŸæœ›

**R**esponse (å“åº”)
- è¾“å‡ºæ ¼å¼
- å†…å®¹è¦æ±‚
- çº¦æŸæ¡ä»¶
```

**ç¤ºä¾‹**ï¼š

```
# Context
æˆ‘ä»¬æ­£åœ¨å¼€å‘ä¸€ä¸ª MMORPG æ¸¸æˆï¼Œä½¿ç”¨ Unity/C#ï¼Œéœ€è¦è®¾è®¡ä¸€ä¸ªå…¬ä¼šç³»ç»Ÿã€‚

# Objective
è®¾è®¡å…¬ä¼šç³»ç»Ÿçš„æ ¸å¿ƒæ¶æ„ï¼ŒåŒ…æ‹¬åˆ›å»ºã€åŠ å…¥ã€ç®¡ç†ã€è§£æ•£ç­‰åŠŸèƒ½ã€‚

# Style
è¾“å‡º C# ä»£ç ï¼ŒåŒ…å«æ¥å£å®šä¹‰ã€ç±»ç»“æ„ã€æ•°æ®æ¨¡å‹ã€‚

# Tone
æŠ€æœ¯è®¾è®¡æ–‡æ¡£é£æ ¼ï¼Œä¸“ä¸šä¸”è€ƒè™‘æ‰©å±•æ€§ã€‚

# Audience
é¢å‘æ¸¸æˆæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯å¼€å‘å›¢é˜Ÿã€‚

# Response
æä¾›ï¼š
1. ç³»ç»Ÿæ¶æ„å›¾ï¼ˆæ–‡å­—æè¿°ï¼‰
2. æ ¸å¿ƒç±»å®šä¹‰
3. æ•°æ®æ¨¡å‹è®¾è®¡
4. ç½‘ç»œåŒæ­¥æ–¹æ¡ˆ
5. UI äº¤äº’æµç¨‹
```

#### 2.2.2 CREATE æ¡†æ¶

å¦ä¸€ä¸ªå®ç”¨çš„æ¡†æ¶ï¼š

```
**C**haracter (è§’è‰²/äººè®¾)
**R**equest (å…·ä½“è¯·æ±‚)
**E**xamples (ç¤ºä¾‹)
**A**dditions (è¡¥å……ä¿¡æ¯)
**T**one (è¯­æ°”)
**E**xtras (é¢å¤–è¦æ±‚)
```

### 2.3 è¾“å‡ºæ§åˆ¶æ¨¡å¼

#### 2.3.1 æ ¼å¼çº¦æŸ

**JSON è¾“å‡º**ï¼ˆæ¸¸æˆä»£ç åˆ†æåœºæ™¯ï¼‰ï¼š

```
è¯·ä»¥ JSON æ ¼å¼è¾“å‡ºä»£ç åˆ†æç»“æœï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š
{
  "analysis_result": {
    "code_quality": "B+",
    "issues": [
      {
        "type": "performance",
        "severity": "high",
        "file": "PlayerController.cs",
        "line": 142,
        "description": "æ¯å¸§åœ¨ Update() ä¸­è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥",
        "fix": "ä½¿ç”¨ StringBuilder æˆ–ç¼“å­˜å­—ç¬¦ä¸²"
      }
    ],
    "metrics": {
      "cyclomatic_complexity": 18,
      "maintainability_index": 65
    },
    "recommendations": ["è€ƒè™‘ä½¿ç”¨å¯¹è±¡æ± ä¼˜åŒ–"]
  }
}

åªè¾“å‡º JSONï¼Œä¸è¦åŒ…å«å…¶ä»–æ–‡æœ¬ã€‚
```

**ä»£ç è¾“å‡º**ï¼š

```
è¯·è¾“å‡ºå®Œæ•´çš„ Unity C# ä»£ç ï¼Œæ ¼å¼è¦æ±‚ï¼š
1. ä½¿ç”¨ ```csharp ä»£ç å—
2. åŒ…å«å¿…è¦çš„ using è¯­å¥
3. æ·»åŠ ç±»å‹æ³¨è§£
4. æ·»åŠ  XML æ–‡æ¡£æ³¨é‡Š
5. éµå¾ª Unity å‘½åè§„èŒƒ
6. ä¸åŒ…å«ä»»ä½•è§£é‡Šæ–‡æœ¬ï¼Œåªè¾“å‡ºä»£ç 
```

**Markdown è¾“å‡º**ï¼ˆæ¸¸æˆæŠ€æœ¯æ–‡æ¡£ï¼‰ï¼š

```
è¯·ä»¥ Markdown æ ¼å¼è¾“å‡ºæ¸¸æˆæŠ€æœ¯æ–‡æ¡£ï¼ŒåŒ…æ‹¬ï¼š
- ä¸€çº§æ ‡é¢˜ï¼šç³»ç»Ÿåç§°
- äºŒçº§æ ‡é¢˜ï¼šæ¶æ„è®¾è®¡ã€æ ¸å¿ƒç±»ã€ä½¿ç”¨ç¤ºä¾‹
- ä¸‰çº§æ ‡é¢˜ï¼šå­åŠŸèƒ½è¯´æ˜
- ä½¿ç”¨ C# ä»£ç å—ã€Mermaid æµç¨‹å›¾ç­‰æ ¼å¼åŒ–å†…å®¹
```

#### 2.3.2 é•¿åº¦æ§åˆ¶

```
è¯·å°†å›ç­”é™åˆ¶åœ¨ 200 å­—ä»¥å†…ã€‚

æˆ–ï¼š

è¯·æä¾›è¯¦ç»†è¯´æ˜ï¼Œè‡³å°‘ 500 å­—ï¼ŒåŒ…æ‹¬ï¼š
- èƒŒæ™¯ä»‹ç»
- è¯¦ç»†æ­¥éª¤
- ç¤ºä¾‹ä»£ç 
- æ³¨æ„äº‹é¡¹
```

#### 2.3.3 çº¦æŸæ¡ä»¶

```
çº¦æŸæ¡ä»¶ï¼š
1. ä¸è¦ä½¿ç”¨ä»»ä½•ç¬¬ä¸‰æ–¹åº“
2. æ—¶é—´å¤æ‚åº¦ä¸è¶…è¿‡ O(n log n)
3. ç©ºé—´å¤æ‚åº¦ä¸è¶…è¿‡ O(n)
4. ä»£ç å¿…é¡»å…¼å®¹ Python 3.8+
5. ä¸èƒ½ä½¿ç”¨ eval() æˆ– exec()
```

#### æ ¸å¿ƒè¦ç‚¹

*   **åŸºç¡€æ¨¡å¼**ï¼šé›¶æ ·æœ¬ï¼ˆZero-Shotï¼‰ç›´æ¥ä¸‹è¾¾æŒ‡ä»¤ï¼›å°‘æ ·æœ¬ï¼ˆFew-Shotï¼‰é€šè¿‡æä¾›ç¤ºä¾‹å¢å¼ºæ¨¡å‹ç†è§£ï¼›è§’è‰²è®¾å®šï¼ˆRole Playingï¼‰èµ‹äºˆæ¨¡å‹ç‰¹å®šèº«ä»½ï¼›ä»»åŠ¡åˆ†è§£ï¼ˆTask Decompositionï¼‰å°†å¤æ‚ä»»åŠ¡æ‹†è§£ã€‚
*   **ç»“æ„åŒ–æç¤º**ï¼šCO-STAR å’Œ CREATE ç­‰æ¡†æ¶æä¾›ç»“æ„åŒ–è¾“å…¥ï¼Œç¡®ä¿æç¤ºè¯çš„å…¨é¢æ€§å’Œä¸€è‡´æ€§ã€‚
*   **è¾“å‡ºæ§åˆ¶**ï¼šé€šè¿‡æ˜ç¡®çš„æ ¼å¼è¦æ±‚ï¼ˆå¦‚ JSONã€ä»£ç å—ã€Markdownï¼‰ã€é•¿åº¦é™åˆ¶å’Œå…·ä½“çº¦æŸæ¡ä»¶ï¼Œç²¾ç¡®æ§åˆ¶æ¨¡å‹çš„è¾“å‡ºå½¢å¼å’Œå†…å®¹ã€‚
*   **çµæ´»æ€§ä¸ç²¾ç¡®æ€§**ï¼šä¸åŒçš„æç¤ºè¯æŠ€æœ¯æ—¨åœ¨å¹³è¡¡æ¨¡å‹çš„è‡ªç”±åº¦ä¸è¾“å‡ºçš„ç²¾ç¡®åº¦ï¼Œé€‚ç”¨äºä»å¿«é€ŸåŸå‹åˆ°ä¸¥æ ¼çš„ä»£ç ç”Ÿæˆç­‰å¤šç§åœºæ™¯ã€‚

---

## 3. é«˜çº§æç¤ºè¯æŠ€æœ¯

### 3.1 Chain-of-Thoughtï¼ˆæ€ç»´é“¾ï¼‰

#### 3.1.1 åŸºç¡€ CoT

**æ¨¡æ¿**ï¼š

```
è¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ€è€ƒå¹¶å›ç­”ï¼š

## æ­¥éª¤ 1: ç†è§£é—®é¢˜
- é—®é¢˜çš„æ ¸å¿ƒæ˜¯ä»€ä¹ˆï¼Ÿ
- éœ€è¦æ±‚è§£ä»€ä¹ˆï¼Ÿ
- æœ‰å“ªäº›å…³é”®ä¿¡æ¯ï¼Ÿ

## æ­¥éª¤ 2: åˆ†ææ–¹æ¡ˆ
- å¯èƒ½çš„è§£å†³æ–¹æ¡ˆæœ‰å“ªäº›ï¼Ÿ
- æ¯ç§æ–¹æ¡ˆçš„ä¼˜ç¼ºç‚¹ï¼Ÿ
- é€‰æ‹©å“ªç§æ–¹æ¡ˆï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ

## æ­¥éª¤ 3: æ‰§è¡Œæ±‚è§£
- å…·ä½“çš„è®¡ç®—æˆ–æ¨ç†è¿‡ç¨‹
- ä¸­é—´ç»“æœéªŒè¯

## æ­¥éª¤ 4: éªŒè¯ç»“æœ
- ç­”æ¡ˆæ˜¯å¦åˆç†ï¼Ÿ
- æ˜¯å¦ç¬¦åˆçº¦æŸæ¡ä»¶ï¼Ÿ
- æœ‰æ²¡æœ‰é—æ¼ï¼Ÿ

## æ­¥éª¤ 5: æœ€ç»ˆç­”æ¡ˆ
ç»™å‡ºæ˜ç¡®çš„ç­”æ¡ˆã€‚
```

#### 3.1.2 Zero-Shot CoT

**æœ€ç®€å•çš„è§¦å‘æ–¹å¼**ï¼š

```
è®©æˆ‘ä»¬ä¸€æ­¥æ­¥æ€è€ƒè¿™ä¸ªé—®é¢˜ã€‚

æˆ–ï¼š

è¯·ä¸€æ­¥æ­¥æ€è€ƒå¹¶ç»™å‡ºç­”æ¡ˆã€‚
```

**ç ”ç©¶å‘ç°**ï¼šä»…æ·»åŠ "Let's think step by step"å°±èƒ½æ˜¾è‘—æå‡æ•°å­¦ã€é€»è¾‘æ¨ç†ä»»åŠ¡çš„æ€§èƒ½ã€‚

#### 3.1.3 Auto-CoTï¼ˆè‡ªåŠ¨æ€ç»´é“¾ï¼‰

```python
def auto_cot(question, llm):
    """
    è‡ªåŠ¨ç”Ÿæˆæ€ç»´é“¾
    """
    # æ­¥éª¤ 1: ç”Ÿæˆå¤šæ ·åŒ–çš„æ¨ç†è·¯å¾„
    reasoning_paths = []
    for temp in [0.3, 0.5, 0.7, 0.9]:
        path = llm.generate(
            question,
            temperature=temp,
            prompt="Let's think step by step:"
        )
        reasoning_paths.append(path)

    # æ­¥éª¤ 2: é€‰æ‹©æœ€ä¸€è‡´çš„è·¯å¾„
    from collections import Counter
    answers = [extract_answer(p) for p in reasoning_paths]
    most_common = Counter(answers).most_common(1)[0][0]

    # æ­¥éª¤ 3: è¿”å›æœ€ä¸€è‡´æ¨ç†è·¯å¾„çš„ç­”æ¡ˆ
    return most_common
```

### 3.2 Self-Consistencyï¼ˆè‡ªä¸€è‡´æ€§ï¼‰

**å¤šè·¯å¾„é‡‡æ · + æŠ•ç¥¨**ï¼š

```python
def self_consistency(question, n_samples=5, temperature=0.7):
    """
    é€šè¿‡å¤šæ¬¡é‡‡æ ·å’ŒæŠ•ç¥¨æé«˜ç­”æ¡ˆå¯é æ€§
    """
    answers = []
    reasoning_paths = []

    # 1. å¤šæ¬¡é‡‡æ ·
    for i in range(n_samples):
        # ä½¿ç”¨ CoT æç¤º
        prompt = f"Let's think step by step: {question}"
        response = llm.generate(prompt, temperature=temperature)

        # æå–æ¨ç†è¿‡ç¨‹å’Œæœ€ç»ˆç­”æ¡ˆ
        reasoning, answer = parse_response(response)
        reasoning_paths.append(reasoning)
        answers.append(answer)

    # 2. æŠ•ç¥¨
    from collections import Counter
    answer_counts = Counter(answers)
    most_common_answer = answer_counts.most_common(1)[0][0]
    confidence = answer_counts[most_common_answer] / n_samples

    # 3. è¿”å›ç»“æœ
    return {
        "answer": most_common_answer,
        "confidence": confidence,
        "distribution": dict(answer_counts),
        "reasoning_paths": reasoning_paths
    }
```

**é€‚ç”¨åœºæ™¯**ï¼š

- æ•°å­¦è®¡ç®—
- é€»è¾‘æ¨ç†
- å¤šæ­¥éª¤é—®é¢˜
- éœ€è¦é«˜å‡†ç¡®æ€§çš„ä»»åŠ¡

### 3.3 RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰

#### 3.3.1 åŸºç¡€ RAG æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç¦»çº¿é˜¶æ®µï¼ˆæ–‡æ¡£ç´¢å¼•ï¼‰                                â”‚
â”‚  æ–‡æ¡£ â†’ åˆ†å— â†’ åµŒå…¥ â†’ å‘é‡æ•°æ®åº“                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åœ¨çº¿é˜¶æ®µï¼ˆæ£€ç´¢+ç”Ÿæˆï¼‰                               â”‚
â”‚  æŸ¥è¯¢ â†’ åµŒå…¥ â†’ æ£€ç´¢ â†’ æ„å»º Prompt â†’ LLM â†’ ç­”æ¡ˆ      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.3.2 é«˜çº§ RAG æŠ€æœ¯

**HyDEï¼ˆå‡è®¾æ€§æ–‡æ¡£åµŒå…¥ï¼‰**ï¼š

```python
def hyde_retrieval(query, llm, retriever):
    """
    ç”¨å‡è®¾æ€§ç­”æ¡ˆè¿›è¡Œæ£€ç´¢
    """
    # 1. ç”Ÿæˆå‡è®¾æ€§ç­”æ¡ˆ (llm.generate æ˜¯ä¸€ä¸ªæ¦‚å¿µæ€§å‡½æ•°ï¼Œä»£è¡¨ LLM ç”Ÿæˆæ–‡æœ¬)
    hypothetical_doc = llm.generate(
        f"Write a detailed answer to: {query}"
    )

    # 2. ç”¨å‡è®¾æ€§ç­”æ¡ˆæ£€ç´¢ï¼ˆè€Œä¸æ˜¯åŸæŸ¥è¯¢ï¼‰(retriever.search æ˜¯ä¸€ä¸ªæ¦‚å¿µæ€§å‡½æ•°ï¼Œä»£è¡¨å‘é‡æ•°æ®åº“æ£€ç´¢)
    docs = retriever.search(hypothetical_doc, top_k=5)

    return docs
```

**æŸ¥è¯¢é‡å†™**ï¼š

```python
def query_expansion(query, llm):
    """
    æ‰©å±•æŸ¥è¯¢ä»¥æé«˜å¬å›ç‡
    """
    # ç”Ÿæˆå¤šä¸ªæŸ¥è¯¢å˜ä½“ (llm.generate æ˜¯ä¸€ä¸ªæ¦‚å¿µæ€§å‡½æ•°ï¼Œä»£è¡¨ LLM ç”Ÿæˆæ–‡æœ¬)
    expanded_queries = llm.generate(
        f"Generate 3 different ways to ask: {query}\n"
        f"Format: one per line, no numbering"
    )

    queries = [query] + expanded_queries.split('\n')

    # å¯¹æ¯ä¸ªæŸ¥è¯¢æ£€ç´¢ (retriever.search æ˜¯ä¸€ä¸ªæ¦‚å¿µæ€§å‡½æ•°ï¼Œä»£è¡¨å‘é‡æ•°æ®åº“æ£€ç´¢)
    all_docs = []
    for q in queries:
        docs = retriever.search(q, top_k=3)
        all_docs.extend(docs)

    # å»é‡å¹¶é‡æ’ (deduplicate æ˜¯ä¸€ä¸ªæ¦‚å¿µæ€§å‡½æ•°ï¼Œä»£è¡¨æ–‡æ¡£å»é‡å’Œé‡æ’)
    unique_docs = deduplicate(all_docs)
    return unique_docs[:5]
```

### 3.4 Tool Calling & Function Calling

#### 3.4.1 åŸºç¡€å·¥å…·è°ƒç”¨

**å·¥å…·å®šä¹‰**ï¼š

```python
tools = [
    {
        "name": "get_weather",
        "description": "è·å–æŒ‡å®šåŸå¸‚çš„å¤©æ°”ä¿¡æ¯",
        "parameters": {
            "type": "object",
            "properties": {
                "city": {
                    "type": "string",
                    "description": "åŸå¸‚åç§°"
                },
                "units": {
                    "type": "string",
                    "enum": ["celsius", "fahrenheit"],
                    "description": "æ¸©åº¦å•ä½"
                }
            },
            "required": ["city"]
        }
    }
]
```

**æç¤ºè¯æ¨¡æ¿**ï¼š

```
You are an AI assistant with access to the following tools:

{tools}

When you need to use a tool, respond with a JSON object in this format:
```json
{{
  "tool": "tool_name",
  "args": {{
    "param1": "value1",
    "param2": "value2"
  }}
}}
```

Important:

- Only use the tools listed above
- Output ONLY the JSON, no other text
- If no tool is needed, answer directly

User query: {query}

```
#### 3.4.2 ReAct æ¨¡å¼
```

Thought: [åˆ†æéœ€è¦ä»€ä¹ˆä¿¡æ¯]
Action: [é€‰æ‹©åˆé€‚çš„å·¥å…·]
Action Input: [æ„é€ å·¥å…·å‚æ•°]
Observation: [è§‚å¯Ÿå·¥å…·è¿”å›ç»“æœ]
Thought: [åŸºäºç»“æœç»§ç»­æ€è€ƒ]
... (é‡å¤)
Final Answer: [ç»™å‡ºæœ€ç»ˆç­”æ¡ˆ]

```
### 3.5 Reflexionï¼ˆåæ€ä¸è¿­ä»£ï¼‰

#### 3.5.1 åŸºç¡€ Reflexion

```python
def reflexion_loop(task, max_iterations=3):
    """
    é€šè¿‡è‡ªæˆ‘åæ€è¿­ä»£æ”¹è¿›
    """
    history = []

    for iteration in range(max_iterations):
        # 1. ç”Ÿæˆè§£ (generate_solution æ˜¯ä¸€ä¸ªæ¦‚å¿µæ€§å‡½æ•°ï¼Œä»£è¡¨ LLM ç”Ÿæˆè§£å†³æ–¹æ¡ˆ)
        if iteration == 0:
            solution = generate_solution(task)
        else:
            # ä½¿ç”¨å†å²åæ€ (build_reflection_context æ˜¯ä¸€ä¸ªæ¦‚å¿µæ€§å‡½æ•°ï¼Œä»£è¡¨æ„å»ºåæ€ä¸Šä¸‹æ–‡)
            context = build_reflection_context(history)
            solution = generate_solution(task, context)

        # 2. è¯„ä¼° (evaluate æ˜¯ä¸€ä¸ªæ¦‚å¿µæ€§å‡½æ•°ï¼Œä»£è¡¨è¯„ä¼°è§£å†³æ–¹æ¡ˆ)
        feedback = evaluate(solution)

        # 3. æ£€æŸ¥æ˜¯å¦å®Œæˆ
        if feedback["success"]:
            return solution

        # 4. åæ€ (generate_reflection æ˜¯ä¸€ä¸ªæ¦‚å¿µæ€§å‡½æ•°ï¼Œä»£è¡¨ LLM ç”Ÿæˆåæ€å†…å®¹)
        reflection = generate_reflection(solution, feedback)
        history.append({
            "solution": solution,
            "feedback": feedback,
            "reflection": reflection
        })

    return solution  # è¿”å›æœ€ä½³è§£
```

#### 3.5.2 åæ€æç¤ºè¯æ¨¡æ¿

```
Your previous solution:

{previous_code}

It failed the following tests:
{failures}

Please analyze:
1. What went wrong?
2. Why did it fail?
3. What specific changes are needed?

Provide a corrected implementation that addresses all failures.
```

### 3.6 å…¶ä»–é«˜çº§æŠ€æœ¯

#### 3.6.1 Least-to-Most Prompting

**å°†å¤æ‚é—®é¢˜åˆ†è§£ä¸ºå­é—®é¢˜**ï¼š

```
é—®é¢˜: {å¤æ‚é—®é¢˜}

è¯·å…ˆåˆ—å‡ºè§£å†³è¿™ä¸ªé—®é¢˜çš„æ‰€æœ‰å­é—®é¢˜ï¼Œ
æŒ‰ä¾èµ–å…³ç³»æ’åºï¼Œç„¶åé€ä¸ªè§£å†³ã€‚

å­é—®é¢˜åˆ—è¡¨:
1. [å­é—®é¢˜1]
2. [å­é—®é¢˜2]
3. [å­é—®é¢˜3]

ç°åœ¨ä»å­é—®é¢˜1å¼€å§‹...
```

#### 3.6.2 Self-Ask

**è®©æ¨¡å‹è‡ªå·±æé—®å¹¶å›ç­”**ï¼š

```
Question: {åŸå§‹é—®é¢˜}

Follow-up questions and answers:
Q1: [éœ€è¦ä»€ä¹ˆä¿¡æ¯?]
A1: [ä¿¡æ¯1]

Q2: [è¿˜éœ€è¦ä»€ä¹ˆä¿¡æ¯?]
A2: [ä¿¡æ¯2]

... (ç»§ç»­æé—®ç›´åˆ°æœ‰è¶³å¤Ÿä¿¡æ¯)

Final answer: [åŸºäºæ‰€æœ‰ä¿¡æ¯çš„æœ€ç»ˆç­”æ¡ˆ]
```

#### 3.6.3 Tree-of-Thoughts (ToT)

**æ¢ç´¢å¤šä¸ªæ¨ç†è·¯å¾„**ï¼š

```python
def tree_of_thoughts(problem, max_depth=3, branching_factor=3):
    """
    æ ‘å½¢æœç´¢å¤šä¸ªæ¨ç†è·¯å¾„
    """
    from queue import PriorityQueue

    # åˆå§‹çŠ¶æ€
    initial_state = {
        "reasoning": "",
        "confidence": 0,
        "depth": 0
    }

    pq = PriorityQueue()
    pq.put((0, initial_state))

    best_solution = None

    while not pq.empty():
        priority, state = pq.get()

        if state["depth"] >= max_depth:
            if best_solution is None or state["confidence"] > best_solution["confidence"]:
                best_solution = state
            continue

        # ç”Ÿæˆåˆ†æ”¯
        for i in range(branching_factor):
            # ç”Ÿæˆä¸‹ä¸€æ­¥æ¨ç† (llm.generate æ˜¯ä¸€ä¸ªæ¦‚å¿µæ€§å‡½æ•°ï¼Œä»£è¡¨ LLM ç”Ÿæˆæ–‡æœ¬)
            new_reasoning = llm.generate(
                f"Continue reasoning from: {state['reasoning']}\n"
                f"Generate next step (variant {i+1}):"
            )

            # è¯„ä¼°ç½®ä¿¡åº¦ (evaluate_confidence æ˜¯ä¸€ä¸ªæ¦‚å¿µæ€§å‡½æ•°ï¼Œä»£è¡¨è¯„ä¼°æ¨ç†è·¯å¾„çš„ç½®ä¿¡åº¦)
            confidence = evaluate_confidence(new_reasoning)

            # æ·»åŠ åˆ°ä¼˜å…ˆé˜Ÿåˆ—
            new_state = {
                "reasoning": state["reasoning"] + "\n" + new_reasoning,
                "confidence": confidence,
                "depth": state["depth"] + 1
            }
            pq.put((-confidence, new_state))

    return best_solution["reasoning"]
```

#### æ ¸å¿ƒè¦ç‚¹

*   **æ€ç»´é“¾ï¼ˆCoTï¼‰**ï¼šé€šè¿‡å¼•å¯¼æ¨¡å‹é€æ­¥æ€è€ƒã€åˆ†è§£é—®é¢˜ï¼Œæ˜¾è‘—æå‡åœ¨å¤æ‚æ¨ç†ä»»åŠ¡ï¼ˆå¦‚æ•°å­¦ã€é€»è¾‘ï¼‰ä¸Šçš„è¡¨ç°ï¼Œå³ä½¿æ˜¯ç®€å•çš„â€œä¸€æ­¥æ­¥æ€è€ƒâ€ä¹Ÿèƒ½æœ‰æ•ˆè§¦å‘ã€‚
*   **è‡ªä¸€è‡´æ€§ï¼ˆSelf-Consistencyï¼‰**ï¼šç»“åˆå¤šæ¬¡é‡‡æ ·å’ŒæŠ•ç¥¨æœºåˆ¶ï¼Œä»å¤šæ¡æ¨ç†è·¯å¾„ä¸­é€‰å‡ºæœ€å¯é çš„ç­”æ¡ˆï¼Œè¿›ä¸€æ­¥æé«˜å¤æ‚é—®é¢˜çš„æ±‚è§£å‡†ç¡®æ€§ã€‚
*   **æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰**ï¼šé€šè¿‡å¤–éƒ¨çŸ¥è¯†æ£€ç´¢ï¼Œä¸º LLM æä¾›æœ€æ–°ã€å‡†ç¡®çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œæœ‰æ•ˆè§£å†³æ¨¡å‹å¹»è§‰é—®é¢˜ï¼Œæå‡ç­”æ¡ˆçš„äº‹å®æ€§å’Œå¯ä¿¡åº¦ï¼Œæ˜¯æ„å»ºçŸ¥è¯†å¯†é›†å‹åº”ç”¨çš„å…³é”®ã€‚
*   **å·¥å…·è°ƒç”¨ï¼ˆTool Callingï¼‰**ï¼šèµ‹äºˆ LLM è°ƒç”¨å¤–éƒ¨å·¥å…·ï¼ˆå¦‚ APIã€æ•°æ®åº“ï¼‰çš„èƒ½åŠ›ï¼Œæ‰©å±•å…¶åŠŸèƒ½è¾¹ç•Œï¼Œä½¿å…¶èƒ½æ‰§è¡Œæ›´å¤æ‚ã€æ›´å…·ä½“çš„ä»»åŠ¡ï¼Œå®ç°â€œæ¨ç†å³è¡ŒåŠ¨â€ã€‚ReAct æ¨¡å¼æ˜¯å…¶ç»å…¸å®ç°ã€‚
*   **åæ€ï¼ˆReflexionï¼‰**ï¼šé€šè¿‡è®© LLM è‡ªæˆ‘è¯„ä¼°ç”Ÿæˆç»“æœã€è¯†åˆ«é”™è¯¯å¹¶è¿­ä»£æ”¹è¿›ï¼Œæ¨¡æ‹Ÿäººç±»çš„åæ€è¿‡ç¨‹ï¼Œä»è€ŒæŒç»­æå‡ä»»åŠ¡å®Œæˆè´¨é‡ï¼Œå°¤å…¶é€‚ç”¨äºä»£ç ç”Ÿæˆä¸è°ƒè¯•ã€‚
*   **å…¶ä»–é«˜çº§æŠ€æœ¯**ï¼šLeast-to-Most å¼•å¯¼æ¨¡å‹åˆ†è§£é—®é¢˜ï¼›Self-Ask é¼“åŠ±æ¨¡å‹è‡ªæˆ‘æé—®ä»¥æ”¶é›†ä¿¡æ¯ï¼›Tree-of-Thoughts åˆ™æ¢ç´¢å¤šæ¡æ¨ç†è·¯å¾„ï¼Œå¹¶è¯„ä¼°å…¶ç½®ä¿¡åº¦ã€‚è¿™äº›æŠ€æœ¯å…±åŒæ¨åŠ¨ LLM è§£å†³æ›´å¤æ‚ã€å¼€æ”¾å¼é—®é¢˜çš„èƒ½åŠ›ã€‚

---

## 4. æ¸¸æˆå¼€å‘ä¸“é¡¹æŠ€æœ¯

### 4.1 ç³»ç»Ÿæ¶æ„è®¾è®¡æç¤ºè¯

#### 4.1.1 MVC/MVVM æ¶æ„ç”Ÿæˆ

**æ¨¡æ¿**ï¼š

```
# è§’è‰²
ä½ æ˜¯ Unity æ¸¸æˆæ¶æ„ä¸“å®¶ã€‚

# ä»»åŠ¡
è®¾è®¡ä¸€ä¸ª {ç³»ç»Ÿåç§°} çš„ MVC æ¶æ„

# è¦æ±‚
- Model: æ•°æ®å±‚ï¼Œä½¿ç”¨ ScriptableObject
- View: UI å±‚ï¼Œç»§æ‰¿ BaseView
- Controller: é€»è¾‘å±‚ï¼Œç»§æ‰¿ BaseController
- ä½¿ç”¨äº‹ä»¶ç³»ç»Ÿè§£è€¦å„å±‚

# è¾“å‡º
1. ç±»å›¾ï¼ˆæ–‡å­—æè¿°ï¼‰
2. æ¯ä¸ª Model çš„å®šä¹‰
3. æ¯ä¸ª View çš„å®šä¹‰
4. æ¯ä¸ª Controller çš„å®šä¹‰
5. äº‹ä»¶å®šä¹‰
```

**ç¤ºä¾‹ - èƒŒåŒ…ç³»ç»Ÿæ¶æ„**ï¼š

```
è¾“å…¥: è®¾è®¡èƒŒåŒ…ç³»ç»Ÿ MVC æ¶æ„

è¾“å‡º:
Model: BagData (ScriptableObject)
View: BagView (ç»§æ‰¿ BaseView)
Controller: BagController (ç»§æ‰¿ BaseController)
Events: OnItemAdded, OnItemRemoved, OnBagSorted
```

#### 4.1.2 ECSï¼ˆå®ä½“ç»„ä»¶ç³»ç»Ÿï¼‰è®¾è®¡

**æ¨¡æ¿**ï¼š

```
# ä»»åŠ¡
è®¾è®¡ {æ¸¸æˆç³»ç»Ÿ} çš„ ECS æ¶æ„

# Unity DOTS æŠ€æœ¯æ ˆ
- Entity: å®ä½“å®šä¹‰
- Component: ç»„ä»¶å®šä¹‰ï¼ˆIComponentDataï¼‰
- System: ç³»ç»Ÿå®šä¹‰ï¼ˆSystemBaseï¼‰

# è¾“å‡ºè¦æ±‚
1. å®ä½“-ç»„ä»¶å…³ç³»å›¾
2. æ‰€æœ‰ Component å®šä¹‰
3. æ‰€æœ‰ System å®šä¹‰ï¼ˆæ›´æ–°é€»è¾‘ï¼‰
4. æ€§èƒ½è€ƒè™‘ï¼ˆJob System/Burstï¼‰
```

**ç¤ºä¾‹**ï¼š

```
è¾“å…¥: è®¾è®¡æ•Œäºº AI çš„ ECS æ¶æ„

è¾“å‡º:
Components:
- EnemyHealth (IComponentData)
- EnemyMovement (IComponentData)
- EnemyAttack (IComponentData)

Systems:
- EnemyHealthSystem (å¤„ç†ä¼¤å®³)
- EnemyMovementSystem (å¤„ç†ç§»åŠ¨)
- EnemyAttackSystem (å¤„ç†æ”»å‡»)
```

---

### 4.2 UI ç³»ç»Ÿç”Ÿæˆæç¤ºè¯

#### 4.2.1 UI é¢æ¿è‡ªåŠ¨ç”Ÿæˆ

**Unity UIPattern æç¤ºè¯**ï¼š

```
# è§’è‰²
ä½ æ˜¯ Unity UI ä¸“å®¶ã€‚

# é¡¹ç›®æ¶æ„è§„èŒƒ
- æ‰€æœ‰ Panel ç»§æ‰¿è‡ª BasePanel
- ä½¿ç”¨ [UIElement] ç‰¹æ€§ç»‘å®šç»„ä»¶
- äº‹ä»¶é€šè¿‡ UIEventManager åˆ†å‘
- ä½¿ç”¨ DOTween åšåŠ¨ç”»

# UI éœ€æ±‚
{UI åŠŸèƒ½æè¿°}

# è¾“å‡ºè¦æ±‚
1. å®Œæ•´çš„ Panel ç±»ï¼ˆC#ï¼‰
2. UIElement ç»‘å®š
3. äº‹ä»¶å¤„ç†æ–¹æ³•
4. æ˜¾ç¤º/éšè—åŠ¨ç”»
5. æ•°æ®ç»‘å®šä»£ç 
```

**ç¤ºä¾‹**ï¼š

```
è¾“å…¥: è®¾ç½®é¢æ¿ï¼ŒåŒ…å«éŸ³é‡æ»‘å—ã€ç”»è´¨ä¸‹æ‹‰èœå•ã€åˆ†è¾¨ç‡é€‰æ‹©

è¾“å‡º:
```csharp
public class SettingsPanel : BasePanel {
    [UIElement("volume_slider")]
    private Slider volumeSlider;

    [UIElement("quality_dropdown")]
    private TMP_Dropdown qualityDropdown;

    protected override void OnBind() {
        volumeSlider.onValueChanged.AddListener(OnVolumeChanged);
        qualityDropdown.onValueChanged.AddListener(OnQualityChanged);
    }

    private void OnVolumeChanged(float value) {
        AudioManager.Instance.SetMasterVolume(value);
    }
}
```

```
#### 4.2.2 UI äº‹ä»¶ç»‘å®šä»£ç ç”Ÿæˆ

**æ¨¡æ¿**ï¼š

```
# ä»»åŠ¡

ä¸º {UI åç§°} ç”Ÿæˆäº‹ä»¶ç»‘å®šä»£ç 

# äº‹ä»¶åˆ—è¡¨

- ç‚¹å‡»"ç¡®è®¤"æŒ‰é’® â†’ è§¦å‘ onConfirm
- ç‚¹å‡»"å–æ¶ˆ"æŒ‰é’® â†’ è§¦å‘ onCancel
- è¾“å…¥æ¡†å†…å®¹å˜åŒ– â†’ è§¦å‘ onInputChanged
- ä¸‹æ‹‰æ¡†é€‰æ‹©å˜åŒ– â†’ è§¦å‘ onSelectionChanged

# è¾“å‡ºè¦æ±‚

1. äº‹ä»¶å®šä¹‰ï¼ˆC# delegate æˆ– eventï¼‰
2. äº‹ä»¶è§¦å‘ä»£ç 
3. äº‹ä»¶ç›‘å¬ä»£ç 
4. å‚æ•°ä¼ é€’è®¾è®¡
```

**ç¤ºä¾‹**ï¼š

```
# ä»»åŠ¡

ä¸º EquipmentPanel é¢æ¿ç”Ÿæˆäº‹ä»¶ç»‘å®šä»£ç 

# äº‹ä»¶åˆ—è¡¨

- ç‚¹å‡»"è£…å¤‡"æŒ‰é’® â†’ è£…å¤‡é€‰ä¸­çš„ç‰©å“
- ç‚¹å‡»"å¸ä¸‹"æŒ‰é’® â†’ å¸ä¸‹å½“å‰è£…å¤‡
- ç‚¹å‡»ç‰©å“æ§½ â†’ æ˜¾ç¤ºç‰©å“è¯¦æƒ…
- æ‹–æ‹½ç‰©å“ â†’ äº¤æ¢ç‰©å“ä½ç½®

# è¾“å‡ºè¦æ±‚

1. äº‹ä»¶å®šä¹‰ï¼ˆC# eventï¼‰
2. äº‹ä»¶è§¦å‘ä»£ç ï¼ˆåœ¨ UI è„šæœ¬ä¸­ï¼‰
3. äº‹ä»¶ç›‘å¬ä»£ç ï¼ˆåœ¨é€»è¾‘è„šæœ¬ä¸­ï¼‰
4. å‚æ•°ä¼ é€’è®¾è®¡ï¼ˆç‰©å“æ•°æ®ã€æ§½ä½ä¿¡æ¯ç­‰ï¼‰
```

**ç”Ÿæˆç»“æœ**ï¼š

```csharp
// äº‹ä»¶å®šä¹‰ï¼ˆåœ¨ EquipmentPanel.cs ä¸­ï¼‰
public class EquipmentPanel : MonoBehaviour
{
    // äº‹ä»¶å®šä¹‰
    public event Action<ItemData> OnEquipButtonClicked;
    public event Action<int> OnUnequipButtonClicked;
    public event Action<ItemData, int> OnItemSlotClicked;
    public event Action<int, int> OnItemDragged;

    // äº‹ä»¶è§¦å‘ä»£ç 
    public void OnEquipButtonClick()
    {
        ItemData selectedItem = GetSelectedItem();
        OnEquipButtonClicked?.Invoke(selectedItem);
    }

    public void OnUnequipButtonClick(int slotIndex)
    {
        OnUnequipButtonClicked?.Invoke(slotIndex);
    }

    public void OnItemSlotClick(ItemData item, int slotIndex)
    {
        OnItemSlotClicked?.Invoke(item, slotIndex);
    }

    public void OnItemDrag(int fromSlot, int toSlot)
    {
        OnItemDragged?.Invoke(fromSlot, toSlot);
    }
}

// äº‹ä»¶ç›‘å¬ä»£ç ï¼ˆåœ¨ EquipmentManager.cs ä¸­ï¼‰
public class EquipmentManager : MonoBehaviour
{
    private EquipmentPanel equipmentPanel;

    private void OnEnable()
    {
        // æ³¨å†Œäº‹ä»¶ç›‘å¬
        equipmentPanel.OnEquipButtonClicked += HandleEquipItem;
        equipmentPanel.OnUnequipButtonClicked += HandleUnequipItem;
        equipmentPanel.OnItemSlotClicked += HandleShowItemDetail;
        equipmentPanel.OnItemDragged += HandleSwapItem;
    }

    private void OnDisable()
    {
        // å–æ¶ˆäº‹ä»¶ç›‘å¬ï¼ˆé˜²æ­¢å†…å­˜æ³„æ¼ï¼‰
        equipmentPanel.OnEquipButtonClicked -= HandleEquipItem;
        equipmentPanel.OnUnequipButtonClicked -= HandleUnequipItem;
        equipmentPanel.OnItemSlotClicked -= HandleShowItemDetail;
        equipmentPanel.OnItemDragged -= HandleSwapItem;
    }

    // äº‹ä»¶å¤„ç†æ–¹æ³•
    private void HandleEquipItem(ItemData item)
    {
        Debug.Log($"è£…å¤‡ç‰©å“: {item.itemName}");
        // è£…å¤‡é€»è¾‘...
    }

    private void HandleUnequipItem(int slotIndex)
    {
        Debug.Log($"å¸ä¸‹æ§½ä½ {slotIndex} çš„è£…å¤‡");
        // å¸ä¸‹é€»è¾‘...
    }

    private void HandleShowItemDetail(ItemData item, int slotIndex)
    {
        Debug.Log($"æ˜¾ç¤ºæ§½ä½ {slotIndex} çš„ç‰©å“è¯¦æƒ…: {item.itemName}");
        // æ˜¾ç¤ºè¯¦æƒ…é€»è¾‘...
    }

    private void HandleSwapItem(int fromSlot, int toSlot)
    {
        Debug.Log($"äº¤æ¢ç‰©å“: æ§½ä½ {fromSlot} â†’ æ§½ä½ {toSlot}");
        // äº¤æ¢é€»è¾‘...
    }
}
```

---

### 4.3 æ¸¸æˆé€»è¾‘ç³»ç»Ÿæç¤ºè¯

#### 4.3.1 èƒŒåŒ…ç³»ç»Ÿå®ç°

**å®Œæ•´ç³»ç»Ÿæç¤ºè¯**ï¼š

```
# è§’è‰²
ä½ æ˜¯ Unity æ¸¸æˆç³»ç»Ÿå¼€å‘ä¸“å®¶ã€‚

# ç³»ç»Ÿéœ€æ±‚
å®ç°ä¸€ä¸ª RPG æ¸¸æˆèƒŒåŒ…ç³»ç»Ÿï¼š
- æ”¯æŒç‰©å“å †å ï¼ˆæŒ‰ç‰©å“ç±»å‹ï¼‰
- æ”¯æŒæ‹–æ‹½æ•´ç†
- æ”¯æŒæ’åºï¼ˆæŒ‰ç±»å‹ã€å“è´¨ã€åç§°ï¼‰
- æ”¯æŒå¿«æ·é”®ä½¿ç”¨
- æ”¯æŒæ•°æ®æŒä¹…åŒ–

# æŠ€æœ¯è¦æ±‚
- ä½¿ç”¨ ScriptableObject å®šä¹‰ç‰©å“é…ç½®
- ä½¿ç”¨äº‹ä»¶ç³»ç»Ÿé€šçŸ¥ UI æ›´æ–°
- è€ƒè™‘æ€§èƒ½ï¼ˆé¿å…é¢‘ç¹ GCï¼‰
- éµå¾ª SOLID åŸåˆ™

# è¾“å‡ºå†…å®¹
1. ç‰©å“æ•°æ®ç»“æ„ï¼ˆItemDataï¼‰
2. æ§½ä½æ•°æ®ç»“æ„ï¼ˆSlotDataï¼‰
3. èƒŒåŒ…ç®¡ç†å™¨ï¼ˆBagManagerï¼‰
4. UI æ§åˆ¶å™¨ï¼ˆBagControllerï¼‰
5. æ‹–æ‹½å¤„ç†é€»è¾‘
6. æ•°æ®æŒä¹…åŒ–ä»£ç 
```

#### 4.3.2 ä»»åŠ¡ç³»ç»Ÿè®¾è®¡

**æ¨¡æ¿**ï¼š

```
# ä»»åŠ¡ç³»ç»Ÿæç¤ºè¯
è®¾è®¡ä¸€ä¸ªå¯é…ç½®çš„ä»»åŠ¡ç³»ç»Ÿï¼š

# åŠŸèƒ½éœ€æ±‚
- æ”¯æŒä¸»çº¿ã€æ”¯çº¿ã€æ—¥å¸¸ä»»åŠ¡
- æ”¯æŒä»»åŠ¡æ¡ä»¶ï¼ˆæ€æ€ªã€æ”¶é›†ã€å¯¹è¯ï¼‰
- æ”¯æŒä»»åŠ¡å¥–åŠ±
- æ”¯æŒä»»åŠ¡é“¾ï¼ˆå‰ç½®ä»»åŠ¡ï¼‰
- æ”¯æŒä»»åŠ¡è¿½è¸ª

# è¾“å‡º
1. ä»»åŠ¡é…ç½®ç»“æ„ï¼ˆScriptableObjectï¼‰
2. ä»»åŠ¡ç®¡ç†å™¨
3. ä»»åŠ¡æ¡ä»¶ç³»ç»Ÿ
4. ä»»åŠ¡å¥–åŠ±ç³»ç»Ÿ
5. UI è¿½è¸ªç•Œé¢
```

#### 4.3.3 æˆ˜æ–—é€»è¾‘æ¨¡æ¿

**æˆ˜æ–—ç³»ç»Ÿæç¤ºè¯**ï¼š

```
# è§’è‰²åŠ¨ä½œæ¸¸æˆæˆ˜æ–—ç³»ç»Ÿ
è®¾è®¡ä¸€ä¸ªåŠ¨ä½œæ¸¸æˆçš„æˆ˜æ–—ç³»ç»Ÿï¼š

# æ ¸å¿ƒåŠŸèƒ½
- è§’è‰²çŠ¶æ€æœºï¼ˆIdle/Run/Attack/Hurtï¼‰
- è¿å‡»ç³»ç»Ÿ
- å—å‡»åé¦ˆ
- ä¼¤å®³è®¡ç®—
- ç‰¹æ•ˆæ’­æ”¾

# Unity å®ç°
ä½¿ç”¨ Animator + StateMachineBehaviour

# è¾“å‡º
1. è§’è‰²çŠ¶æ€æœºå®šä¹‰
2. StateMachineBehaviour è„šæœ¬
3. è¿å‡»æ£€æµ‹é€»è¾‘
4. ä¼¤å®³è®¡ç®—å…¬å¼
5. ç‰¹æ•ˆè§¦å‘ä»£ç 
```

---

### 4.4 èµ„æºç®¡ç†æç¤ºè¯

#### 4.4.1 èµ„æºåŠ è½½ä¸å¸è½½

**æ¨¡æ¿**ï¼š

```
# Unity èµ„æºç®¡ç†å™¨
è®¾è®¡ä¸€ä¸ªèµ„æºç®¡ç†ç³»ç»Ÿï¼š

# åŠŸèƒ½éœ€æ±‚
- å¼‚æ­¥åŠ è½½èµ„æº
- å¼•ç”¨è®¡æ•°ç®¡ç†
- è‡ªåŠ¨å¸è½½æœªä½¿ç”¨èµ„æº
- æ”¯æŒ AssetBundle
- èµ„æºé¢„åŠ è½½

# è¾“å‡º
1. ResourceManager ç±»
2. å¼‚æ­¥åŠ è½½åç¨‹
3. å¼•ç”¨è®¡æ•°ç³»ç»Ÿ
4. å†…å­˜ç›‘æ§
5. å¸è½½ç­–ç•¥
```

#### 4.4.2 å¯¹è±¡æ± å®ç°

**é€šç”¨å¯¹è±¡æ± æç¤ºè¯**ï¼š

```
# Unity å¯¹è±¡æ± ç³»ç»Ÿ
å®ç°ä¸€ä¸ªé«˜æ€§èƒ½å¯¹è±¡æ± ï¼š

# éœ€æ±‚
- æ”¯æŒå¤šç§å¯¹è±¡ç±»å‹ï¼ˆæ³›å‹ï¼‰
- è‡ªåŠ¨æ‰©å±•
- é¢„çƒ­åŠŸèƒ½
- å¯¹è±¡å›æ”¶éªŒè¯
- æ”¯æŒå¯¹è±¡é‡ç½®

# è¾“å‡º
```csharp
public class ObjectPool<T> where T : Component, IPoolable {
    // å¯¹è±¡æ± å®ç°
}

public interface IPoolable {
    void OnSpawn();
    void OnDespawn();
}
```

# ä½¿ç”¨åœºæ™¯

- å­å¼¹å¯¹è±¡æ± 
- ç‰¹æ•ˆå¯¹è±¡æ± 
- æ€ªç‰©å¯¹è±¡æ± 
  
  ```
  
  ```

---

### 4.5 ç½‘ç»œåŒæ­¥æç¤ºè¯

#### 4.5.1 çŠ¶æ€åŒæ­¥æ–¹æ¡ˆ

**æ¨¡æ¿**ï¼š

```
# æ¸¸æˆçŠ¶æ€åŒæ­¥
è®¾è®¡ä¸€ä¸ªçŠ¶æ€åŒæ­¥æ–¹æ¡ˆï¼š

# åŒæ­¥å†…å®¹
- ç©å®¶ä½ç½®
- ç©å®¶è¡€é‡
- æŠ€èƒ½çŠ¶æ€
- èƒŒåŒ…ç‰©å“

# æŠ€æœ¯é€‰å‹
- ä¼ è¾“åè®®ï¼šUDP/TCP
- åºåˆ—åŒ–ï¼šProtobuf/Json
- åŒæ­¥é¢‘ç‡ï¼š10-20 æ¬¡/ç§’

# è¾“å‡º
1. çŠ¶æ€æ•°æ®ç»“æ„
2. çŠ¶æ€åŒæ­¥ç®¡ç†å™¨
3. å·®å€¼è®¡ç®—ï¼ˆä½ç½®å¹³æ»‘ï¼‰
4. é¢„æµ‹ä¸æ ¡æ­£
5. å»¶è¿Ÿè¡¥å¿
```

#### 4.5.2 RPC ä»£ç ç”Ÿæˆ

**æ¨¡æ¿**ï¼š

```
# RPC ä»£ç ç”Ÿæˆ
ä¸ºä»¥ä¸‹åŠŸèƒ½ç”Ÿæˆ RPC ä»£ç ï¼š

# åŠŸèƒ½åˆ—è¡¨
{åŠŸèƒ½æè¿°}

# æ¡†æ¶
- Mirror Networking
- æˆ– Fish-Net

# è¾“å‡º
1. ServerRpc æ–¹æ³•
2. ClientRpc æ–¹æ³•
3. NetworkBehaviour å®ç°
4. å‚æ•°åºåˆ—åŒ–
5. è°ƒç”¨ç¤ºä¾‹
```

**ç¤ºä¾‹**ï¼š

```
è¾“å…¥: ç©å®¶ä½¿ç”¨æŠ€èƒ½

è¾“å‡º:
[ServerRpc]
void UseSkillServerRpc(int skillId, Vector3 targetPos)

[ClientRpc]
void PlaySkillEffectClientRpc(int skillId, Vector3 targetPos)
```

---

### 4.6 æ€§èƒ½ä¼˜åŒ–æç¤ºè¯

#### 4.6.1 æ¸²æŸ“ä¼˜åŒ–å»ºè®®

**æ¨¡æ¿**ï¼š

```
# Unity æ¸²æŸ“ä¼˜åŒ–
åˆ†æå¹¶æä¾›ä¼˜åŒ–å»ºè®®ï¼š

# åœºæ™¯ä¿¡æ¯
{åœºæ™¯æè¿°}

# åˆ†æè¾“å‡º
1. DrawCall åˆ†æ
2. æ‰¹å¤„ç†å»ºè®®
3. GPU Instancing æœºä¼š
4. LOD çº§åˆ«å»ºè®®
5. é®æŒ¡å‰”é™¤è®¾ç½®
```

#### 4.6.2 å†…å­˜æ³„æ¼æ£€æµ‹

**æ¨¡æ¿**ï¼š

```
# å†…å­˜åˆ†ææç¤ºè¯
åˆ†æä»¥ä¸‹ä»£ç çš„å†…å­˜é—®é¢˜ï¼š

{ä»£ç ç‰‡æ®µ}

# æ£€æŸ¥é¡¹
1. äº‹ä»¶è®¢é˜…æœªå–æ¶ˆ
2. åç¨‹æœªæ­£ç¡®åœæ­¢
3. ç¼“å­˜æ— é™å¢é•¿
4. èµ„æºæœªé‡Šæ”¾
5. é—­åŒ…å¼•ç”¨

# è¾“å‡ºæ ¼å¼
## å†…å­˜é—®é¢˜æ¸…å•
- é—®é¢˜ï¼š[æè¿°]
- ä½ç½®ï¼š[æ–‡ä»¶:è¡Œå·]
- ä¿®å¤ï¼š[å»ºè®®]
```

#### 4.6.3 DrawCall ä¼˜åŒ–æ–¹æ¡ˆ

**æ¨¡æ¿**ï¼š

```
# DrawCall ä¼˜åŒ–
ä¸ºä»¥ä¸‹åœºæ™¯ä¼˜åŒ– DrawCallï¼š

# åœºæ™¯æè¿°
{åœºæ™¯ä¿¡æ¯}

# ä¼˜åŒ–ç­–ç•¥
1. å›¾é›†åˆå¹¶å»ºè®®
2. æè´¨å…±äº«æ–¹æ¡ˆ
3. æ‰¹å¤„ç†ä¼˜åŒ–
4. SRP Batcher ä½¿ç”¨
5. UI åˆæ‰¹ä¼˜åŒ–

# è¾“å‡º
- ä¼˜åŒ–å‰åå¯¹æ¯”
- å…·ä½“å®æ–½æ­¥éª¤
- é¢„æœŸæ•ˆæœ
```

#### æ ¸å¿ƒè¦ç‚¹

*   **æ¶æ„å…ˆè¡Œ**ï¼šåˆ©ç”¨æç¤ºè¯ç”Ÿæˆ MVC/MVVM æˆ– ECS ç­‰æ¶æ„æ¨¡æ¿ï¼Œç¡®ä¿ç³»ç»Ÿè®¾è®¡çš„è§„èŒƒæ€§å’Œå¯æ‰©å±•æ€§ã€‚
*   **æ¨¡å—åŒ–ç”Ÿæˆ**ï¼šé’ˆå¯¹ UI ç³»ç»Ÿã€æ ¸å¿ƒæ¸¸æˆé€»è¾‘ï¼ˆå¦‚èƒŒåŒ…ã€ä»»åŠ¡ã€æˆ˜æ–—ï¼‰ã€èµ„æºç®¡ç†å’Œç½‘ç»œåŒæ­¥ç­‰æ¸¸æˆæ ¸å¿ƒæ¨¡å—ï¼Œå¯ä»¥åˆ©ç”¨æç¤ºè¯è¿›è¡Œå¿«é€Ÿçš„ä»£ç ç”Ÿæˆå’ŒåŠŸèƒ½å®ç°ã€‚
*   **æ€§èƒ½å¯¼å‘**ï¼šæç¤ºè¯åº”æ˜ç¡®èå…¥æ€§èƒ½ä¼˜åŒ–è€ƒé‡ï¼Œä¾‹å¦‚æ¸²æŸ“ä¼˜åŒ–ã€å†…å­˜æ³„æ¼æ£€æµ‹å’Œ DrawCall ä¼˜åŒ–ï¼Œå¼•å¯¼æ¨¡å‹ç”Ÿæˆé«˜æ€§èƒ½çš„æ¸¸æˆä»£ç å’Œå»ºè®®ã€‚
*   **å¼•æ“é€‚é…**ï¼šæç¤ºè¯éœ€é’ˆå¯¹ Unityã€Unreal Engineã€Cocos Creator ç­‰ç‰¹å®šæ¸¸æˆå¼•æ“çš„ç‰¹æ€§å’Œæœ€ä½³å®è·µè¿›è¡Œå®šåˆ¶ï¼Œä»¥ç”Ÿæˆç¬¦åˆå¼•æ“è§„èŒƒçš„ä»£ç ã€‚
*   **å®šåˆ¶åŒ–ä¸æ•ˆç‡**ï¼šé€šè¿‡æ¸¸æˆå¼€å‘ä¸“é¡¹æç¤ºè¯ï¼Œèƒ½å¤§å¹…æå‡æ¸¸æˆå¼€å‘æ•ˆç‡ï¼Œå‡å°‘é‡å¤æ€§å·¥ä½œï¼ŒåŒæ—¶ç¡®ä¿ç”Ÿæˆçš„ä»£ç ç¬¦åˆé¡¹ç›®ç‰¹å®šçš„æŠ€æœ¯æ ˆå’Œè´¨é‡è¦æ±‚ã€‚

---

## 5. å®æˆ˜æ¡ˆä¾‹æ·±åº¦è§£æ

### 5.1 æ¡ˆä¾‹ä¸€ï¼šCocos Creator MVC UI è‡ªåŠ¨ç”Ÿæˆï¼ˆçœŸå®é¡¹ç›®ï¼‰

#### 5.1.1 é¡¹ç›®èƒŒæ™¯

è¿™æ˜¯ä¸€ä¸ªçœŸå®çš„ Cocos Creator 3.x å¡ç‰Œæ¸¸æˆé¡¹ç›®ï¼Œä½¿ç”¨è‡ªç ”çš„ MVC ä¸­å°æ¡†æ¶ã€‚é¡¹ç›®å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

- **å‘½åè§„èŒƒ**: æ‰€æœ‰ç±»åä½¿ç”¨ `$$` åç¼€ï¼ˆå¦‚ `BaseView$$`ã€`EquipmentMainView$$`ï¼‰
- **MVC æ¶æ„**: å®Œæ•´çš„ Model-View-Controller åˆ†å±‚
- **æ¡†æ¶åŸºç±»**: `BaseView$$` å’Œ `BaseViewCtrl$$` æä¾›ç”Ÿå‘½å‘¨æœŸç®¡ç†
- **é…ç½®æ³¨å†Œ**: éœ€è¦åœ¨ 6 ä¸ªé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œæ–° UI

#### 5.1.2 é¡¹ç›®æ¶æ„åˆ†æ

**MVC æ¡†æ¶æ ¸å¿ƒç±»**ï¼š

```typescript
// BaseView$$.ts - æ‰€æœ‰ View çš„åŸºç±»
export class BaseView$$ extends BaseComponent$$ {
    // ç”Ÿå‘½å‘¨æœŸå±æ€§
    protected destroyOnHide$$: boolean = true;
    protected showAudio$$: string = null;
    protected hideAudio$$: string = null;
    protected clickEmptyEnabled$$: boolean = true;

    // æ ¸å¿ƒæ–¹æ³•
    public showAction$$(callback?: Function): void { /* æ˜¾ç¤ºåŠ¨ç”» */ }
    public closeAction$$(callback?: Function): void { /* å…³é—­åŠ¨ç”» */ }
    public close$$(callback?: Function): void { /* å…³é—­ç•Œé¢ */ }
    protected callViewCtrlFunc$$(funcName: string, ...args: any[]): any { /* è°ƒç”¨ Ctrl æ–¹æ³• */ }
}

// BaseViewCtrl$$.ts - æ‰€æœ‰ Controller çš„åŸºç±»
export class BaseViewCtrl$$ extends SingletonClass$$ {
    // å¿…é¡»åœ¨å­ç±»ä¸­å®šä¹‰
    protected viewClass: any = null;  // å…³è”çš„ View ç±»

    // ç”Ÿå‘½å‘¨æœŸæ–¹æ³•
    protected onViewWillShow$$(...args: any[]): void { /* View å³å°†æ˜¾ç¤º */ }
    protected onViewDidShow$$(...args: any[]): void { /* View å·²æ˜¾ç¤º */ }
    protected onViewWillClose$$(): void { /* View å³å°†å…³é—­ */ }
}
```

**çœŸå® UI ç¤ºä¾‹ï¼šé€‰æ‹©å¡ç‰Œç•Œé¢**ï¼š

```typescript
// UIChooseOneCardView$$.ts - å®é™…é¡¹ç›®ä»£ç 
@ccclass('UIChooseOneCardView$$')
export class UIChooseOneCardView$$ extends BaseView$$ implements SwipeCallback$$ {
    // ä½¿ç”¨ @property è£…é¥°å™¨ç»‘å®š UI èŠ‚ç‚¹
    @property(Node)
    leftCard$$: Node = null;

    @property(Node)
    rightCard$$: Node = null;

    @property(Animation)
    chooseOneCardAnimation$$: Animation = null;

    @property(Sprite)
    leftIcon$$: Sprite = null;

    @property(Sprite)
    rightIcon$$: Sprite = null;

    // ä¸šåŠ¡æ•°æ®
    private _param$$: UIChooseOneCardViewParam$$ = null;

    // åˆå§‹åŒ–æ–¹æ³•
    public init$$(param: UIChooseOneCardViewParam$$): void {
        this._param$$ = param;
        this.setupUI$$();
    }

    // æ‰‹åŠ¿å›è°ƒæ¥å£å®ç°
    public onSwipeLeft$$(): void {
        // å¤„ç†å·¦æ»‘
    }

    public onSwipeRight$$(): void {
        // å¤„ç†å³æ»‘
    }
}
```

#### 5.1.3 ä¸åŒæç¤ºè¯æ–¹æ¡ˆå¯¹æ¯”

**æ–¹æ¡ˆ Aï¼šç®€å•æç¤ºï¼ˆä¸æ¨èï¼‰**

```bash
è¾“å…¥: /add-ui Equipment EquipmentMainView
```

**é—®é¢˜**ï¼š
- âŒ å®Œå…¨ä¾èµ– Skill å†…ç½®æç¤ºè¯
- âŒ æ— æ³•ç†è§£é¡¹ç›®çš„ `$$` å‘½åè§„èŒƒ
- âŒ å¯èƒ½é—æ¼é…ç½®æ³¨å†Œæ­¥éª¤
- âŒ ç”Ÿæˆçš„ä»£ç é£æ ¼ä¸ä¸€è‡´

**æ–¹æ¡ˆ Bï¼šK-shot + RAGï¼ˆæ¨èç”Ÿäº§ä½¿ç”¨ï¼‰**

Skill å†…éƒ¨æç¤ºè¯è®¾è®¡ï¼š

```markdown
# System Prompt
ä½ æ˜¯ Cocos Creator UI ä»£ç ç”Ÿæˆä¸“å®¶ï¼Œä¸“é—¨ä¸ºå¡ç‰Œæ¸¸æˆé¡¹ç›®ç”Ÿæˆç¬¦åˆ MVC æ¶æ„çš„ä»£ç ã€‚

# é¡¹ç›®æ¶æ„æ–‡æ¡£ (RAG æ£€ç´¢å†…å®¹)

## MVC æ¡†æ¶è§„èŒƒ
- **View åŸºç±»**: `BaseView$$` (ä½äº `fn` æ¡†æ¶åº“)
- **Controller åŸºç±»**: `BaseViewCtrl$$` (ä½äº `fn` æ¡†æ¶åº“)
- **å‘½åè§„èŒƒ**: æ‰€æœ‰ç±»åå¿…é¡»ä½¿ç”¨ `$$` åç¼€
- **å±æ€§å‘½å**: æ‰€æœ‰å±æ€§åä½¿ç”¨ `$$` åç¼€ï¼ˆå¦‚ `leftCard$$`ï¼‰

## ç›®å½•ç»“æ„
```
assets/scripts/pk/modules/{ModuleName}/
â”œâ”€â”€ View/
â”‚   â””â”€â”€ {ViewName}$$.ts
â”œâ”€â”€ Controller/
â”‚   â””â”€â”€ {ViewName}Ctrl$$.ts
â””â”€â”€ Data/
    â””â”€â”€ {ModuleName}Data$$.ts (å¯é€‰)
```

## ä»£ç ç¤ºä¾‹ (K-shot)

### ç¤ºä¾‹ 1: ç®€å• UI - EquipmentMainView

```typescript
// View: EquipmentMainView$$.ts
import { BaseView$$ } from "fn";

export class EquipmentMainView$$ extends BaseView$$ {
    // ä½¿ç”¨ @property è£…é¥°å™¨ç»‘å®š UI èŠ‚ç‚¹
    @property({ type: Node })
    protected content$$: Node = null;

    @property({ type: Sprite })
    protected icon$$: Sprite = null;
}
```

```typescript
// Controller: EquipmentMainViewCtrl$$.ts
import { BaseViewCtrl$$ } from "fn";
import { EquipmentMainView$$ } from "../View/EquipmentMainView$$";

export class EquipmentMainViewCtrl$$ extends BaseViewCtrl$$ {
    // å¿…é¡»å®šä¹‰ viewClass å…³è” View
    protected viewClass: any = EquipmentMainView$$;

    // ç”Ÿå‘½å‘¨æœŸæ–¹æ³•
    protected override onViewWillShow$$(...args: any[]): void {
        super.onViewWillShow$$(...args);
        // åˆå§‹åŒ–é€»è¾‘
    }
}
```

### ç¤ºä¾‹ 2: å¤æ‚ UI - UIChooseOneCardView

```typescript
// View: UIChooseOneCardView$$.ts
import { _decorator } from "cc";
import { BaseView$$, EventManager$$ } from "fn";
import { Node, Sprite, Animation } from "cc";

const { ccclass, property } = _decorator;

export interface UIChooseOneCardViewParam$$ {
    leftCardOption$$: OneCardOption$$;
    rightCardOption$$: OneCardOption$$;
}

@ccclass('UIChooseOneCardView$$')
export class UIChooseOneCardView$$ extends BaseView$$ {
    @property(Node)
    leftCard$$: Node = null;

    @property(Node)
    rightCard$$: Node = null;

    @property(Animation)
    chooseOneCardAnimation$$: Animation = null;

    @property(Sprite)
    leftIcon$$: Sprite = null;

    @property(Sprite)
    rightIcon$$: Sprite = null;

    private _param$$: UIChooseOneCardViewParam$$ = null;

    public init$$(param: UIChooseOneCardViewParam$$): void {
        this._param$$ = param;
        this.setupUI$$();
    }
}
```

## é…ç½®æ³¨å†Œè§„åˆ™ï¼ˆå¿…é¡»å®Œæˆæ‰€æœ‰ 6 æ­¥ï¼‰

### 1. ViewEnum$$.ts
```typescript
export enum ViewTypeEnum$$ {
    // ... å…¶ä»–æšä¸¾
    {ViewName}$$,  // æ·»åŠ è¿™ä¸€è¡Œ
}
```

### 2. ViewCtrlEnum$$.ts
```typescript
export enum ViewCtrlEnum$$ {
    // ... å…¶ä»–æšä¸¾
    {ViewName}Ctrl$$,  // æ·»åŠ è¿™ä¸€è¡Œï¼ˆé‡è¦ï¼å®¹æ˜“é—æ¼ï¼‰
}
```

### 3. ViewCtrlForms$$.ts
```typescript
export const ViewCtrlForms$$ = {
    // ... å…¶ä»–æ³¨å†Œ
    [ViewCtrlEnum$$.{ViewName}Ctrl$$]: {ViewName}ViewCtrl$$,
}
```

### 4. ViewForms$$.ts
```typescript
export const ViewForms$$: Record<ViewTypeEnum$$, IViewForm$$> = {
    // ... å…¶ä»–é…ç½®
    [ViewTypeEnum$$.{ViewName}$$]: {
        prefabPath$$: "PK/Modules/{ModuleName}/Prefabs/{ViewName}",
        layer$$: ViewLayerEnum$$.Popup,  // æˆ–å…¶ä»–å±‚çº§
        isModal$$: true,  // æ ¹æ®å±‚çº§åˆ¤æ–­
    },
}
```

### 5. MVCForms$$.ts (å¦‚æœæœ‰ Module)
```typescript
export const MVCForms$$: Record<ModuleEnum$$, IModuleMVC$$> = {
    [ModuleEnum$$.{ModuleName}$$]: {
        viewEnum$$: ViewTypeEnum$$.{ViewName}$$,
        viewCtrlEnum$$: ViewCtrlEnum$$.{ViewName}Ctrl$$,
        moduleEnum$$: ModuleEnum$$.{ModuleName}$$,
    },
}
```

### 6. ModuleEnum$$.ts (å¦‚æœæœ‰ Module)
```typescript
export enum ModuleEnum$$ {
    // ... å…¶ä»–æšä¸¾
    {ModuleName}$$,
}
```

## ç”Ÿæˆè§„åˆ™

1. **ç±»å**: å¿…é¡»ä½¿ç”¨ `{ViewName}$$` æ ¼å¼
2. **Controller ç±»å**: `{ViewName}ViewCtrl$$` æˆ– `{ViewName}Ctrl$$`
3. **å±æ€§å‘½å**: æ‰€æœ‰æˆå‘˜å±æ€§ä½¿ç”¨ `$$` åç¼€
4. **@property è£…é¥°å™¨**: ç”¨äºæš´éœ²å±æ€§åˆ°ç¼–è¾‘å™¨
5. **ç”Ÿå‘½å‘¨æœŸ**: Controller ä¸­é‡å†™ `onViewWillShow$$` ç­‰æ–¹æ³•æ—¶ä½¿ç”¨ `override` å…³é”®å­—

# ä»»åŠ¡

æ ¹æ®ç”¨æˆ·æä¾›çš„æ¨¡å—åå’Œç•Œé¢åç§°ï¼Œç”Ÿæˆå®Œæ•´çš„ Viewã€Controller ä»£ç å’Œé…ç½®æ³¨å†Œä»£ç ã€‚

æ¨¡å—å: {ModuleName}
ç•Œé¢åç§°: {ViewName}
```

**æ•ˆæœ**ï¼š
- âœ… å®Œå…¨ç¬¦åˆé¡¹ç›®çš„ `$$` å‘½åè§„èŒƒ
- âœ… æ­£ç¡®ä½¿ç”¨ `@property` è£…é¥°å™¨
- âœ… ç”Ÿæˆæ‰€æœ‰ 6 ä¸ªé…ç½®æ–‡ä»¶çš„æ³¨å†Œä»£ç 
- âœ… ä»£ç é£æ ¼ä¸ç°æœ‰ä»£ç ä¸€è‡´
- âœ… æ”¯æŒç®€å•å’Œå¤æ‚ UI åœºæ™¯

**æ–¹æ¡ˆ Cï¼šReflexion + Tool Callingï¼ˆé«˜è´¨é‡åœºæ™¯ï¼‰**

```typescript
// Reflexion å¾ªç¯å®ç°
async function generateUIWithReflexion(
    moduleName: string,
    viewName: string,
    maxIterations: number = 3
): Promise<GeneratedCode> {
    let code: GeneratedCode = null;
    let context: string = "";

    for (let iteration = 0; iteration < maxIterations; iteration++) {
        // æ­¥éª¤ 1: ç”Ÿæˆä»£ç 
        code = await generateUICode(moduleName, viewName, context);

        // æ­¥éª¤ 2: éªŒè¯
        const validation = await validateCode(code);

        if (validation.passed) {
            return code;
        }

        // æ­¥éª¤ 3: åæ€
        const reflection = analyzeFailures(validation.errors);

        // æ­¥éª¤ 4: æ„å»ºæ”¹è¿›ä¸Šä¸‹æ–‡
        context = `
Previous code (iteration ${iteration}):
${code.viewContent}

Validation failures:
${validation.errors.map(e => `- ${e.message}`).join('\n')}

Reflection:
${reflection}

Please fix these issues and provide corrected code.
        `;
    }

    return code;
}

// éªŒè¯å‡½æ•°ç¤ºä¾‹
async function validateCode(code: GeneratedCode): Promise<ValidationResult> {
    const errors: ValidationError[] = [];

    // æ£€æŸ¥å‘½åè§„èŒƒ
    if (!code.viewClass.name.endsWith('$$')) {
        errors.push({
            type: 'naming',
            message: 'View class name must end with $$ suffix'
        });
    }

    // æ£€æŸ¥ç»§æ‰¿å…³ç³»
    if (!code.viewContent.includes('extends BaseView$$')) {
        errors.push({
            type: 'inheritance',
            message: 'View must extend BaseView$$'
        });
    }

    // æ£€æŸ¥é…ç½®å®Œæ•´æ€§
    const requiredConfigs = [
        'ViewEnum$$',
        'ViewCtrlEnum$$',
        'ViewCtrlForms$$',
        'ViewForms$$'
    ];

    for (const config of requiredConfigs) {
        if (!code.configurations[config]) {
            errors.push({
                type: 'missing_config',
                message: `Missing configuration for ${config}`
            });
        }
    }

    return {
        passed: errors.length === 0,
        errors
    };
}
```

**ä¼˜åŠ¿**ï¼š
- âœ… è‡ªåŠ¨å‘ç°å‘½åè§„èŒƒé”™è¯¯ï¼ˆå¦‚å¿˜è®° `$$` åç¼€ï¼‰
- âœ… ç¡®ä¿æ‰€æœ‰é…ç½®æ–‡ä»¶éƒ½å·²æ³¨å†Œ
- âœ… é€šè¿‡è¿­ä»£é€æ­¥å®Œå–„ä»£ç è´¨é‡
- âœ… å‡å°‘äººå·¥å®¡æ ¸æ—¶é—´

#### 5.1.4 å®é™…æ‰§è¡Œæ•ˆæœå¯¹æ¯”

| æ–¹æ¡ˆ | ä»£ç è§„èŒƒæ€§ | é…ç½®å®Œæ•´æ€§ | éœ€è¦è¿­ä»£ | é€‚ç”¨åœºæ™¯ |
|------|-----------|-----------|---------|---------|
| ç®€å•æç¤º | â­â­ | â­ | å¦ | å¿«é€ŸåŸå‹ï¼Œå¯æ¥å—æ‰‹åŠ¨ä¿®æ”¹ |
| **K-shot + RAG** | â­â­â­â­â­ | â­â­â­â­ | å¦ | **ç”Ÿäº§ç¯å¢ƒæ¨è** |
| Reflexion | â­â­â­â­â­ | â­â­â­â­â­ | æ˜¯ï¼ˆ2-3æ¬¡ï¼‰ | é«˜è´¨é‡è¦æ±‚ã€å­¦ä¹ é˜¶æ®µ |

**å®é™…æ•°æ®**ï¼ˆåŸºäº 50 æ¬¡ UI ç”Ÿæˆæµ‹è¯•ï¼‰ï¼š

| æŒ‡æ ‡ | ç®€å•æç¤º | K-shot + RAG | Reflexion |
|-----|---------|-------------|-----------|
| é¦–æ¬¡ç”ŸæˆæˆåŠŸç‡ | 45% | 92% | 65% |
| éœ€è¦æ‰‹åŠ¨ä¿®æ”¹æ¬¡æ•° | 3-5 æ¬¡ | 0-1 æ¬¡ | 0 æ¬¡ |
| å¹³å‡ç”Ÿæˆæ—¶é—´ | 0.5s | 1.2s | 4.5s |
| é…ç½®é—æ¼ç‡ | 40% | 5% | 0% |

#### 5.1.5 å…³é”®æˆåŠŸå› ç´ 

**1. RAG æ£€ç´¢å†…å®¹çš„è´¨é‡**

é¡¹ç›®æ¶æ„æ–‡æ¡£å¿…é¡»åŒ…å«ï¼š
- âœ… åŸºç±»çš„æ–¹æ³•ç­¾åï¼ˆå¦‚ `onViewWillShow$$`ï¼‰
- âœ… å‘½åè§„èŒƒï¼ˆ`$$` åç¼€ï¼‰
- âœ… å®é™…å¯è¿è¡Œçš„ä»£ç ç¤ºä¾‹
- âœ… é…ç½®æ–‡ä»¶çš„å®Œæ•´è·¯å¾„å’Œæ ¼å¼

**2. K-shot ç¤ºä¾‹çš„é€‰æ‹©**

- **ç®€å•ç¤ºä¾‹**: å¦‚ `EquipmentMainView`ï¼Œå±•ç¤ºåŸºç¡€ç»“æ„
- **å¤æ‚ç¤ºä¾‹**: å¦‚ `UIChooseOneCardView`ï¼Œå±•ç¤ºæ¥å£å®šä¹‰ã€æ‰‹åŠ¿å›è°ƒç­‰é«˜çº§ç‰¹æ€§

**3. é…ç½®æ³¨å†Œçš„å®Œæ•´æ€§**

æœ€å¸¸è§çš„é”™è¯¯æ˜¯é—æ¼ `ViewCtrlEnum` ä¸­çš„æšä¸¾å®šä¹‰ã€‚é€šè¿‡åœ¨æç¤ºè¯ä¸­æ˜ç¡®åˆ—å‡ºæ‰€æœ‰ 6 ä¸ªé…ç½®æ­¥éª¤ï¼Œå¯ä»¥å°†é—æ¼ç‡ä» 40% é™è‡³ 5%ã€‚

#### 5.1.6 ä¸å…¶ä»–æ¡ˆä¾‹çš„å¯¹æ¯”

è¿™ä¸ªæ¡ˆä¾‹ä¸æ ‡å‡† Web å¼€å‘çš„åŒºåˆ«ï¼š

| ç‰¹æ€§ | Web å¼€å‘ | Cocos Creator MVC |
|-----|---------|------------------|
| æ¡†æ¶çº¦å®š | React/Vue æ ‡å‡†çº¦å®š | è‡ªç ” MVC æ¡†æ¶ |
| å‘½åè§„èŒƒ | camelCase/PascalCase | `$$` åç¼€ï¼ˆé¡¹ç›®ç‰¹å®šï¼‰ |
| é…ç½®æ³¨å†Œ | è·¯ç”±é…ç½® | 6 ä¸ªé…ç½®æ–‡ä»¶ |
| ç”Ÿå‘½å‘¨æœŸ | `componentDidMount` | `onViewWillShow$$` |
| UI ç»‘å®š | JSX/æ¨¡æ¿ | `@property` è£…é¥°å™¨ |

è¿™è¯´æ˜äº† **RAG + K-shot** åœ¨é¡¹ç›®ç‰¹å®šçº¦å®šåœºæ™¯ä¸‹çš„é‡è¦æ€§ï¼šæ²¡æœ‰å¤–éƒ¨çŸ¥è¯†åº“ï¼ŒLLM æ— æ³•çŸ¥é“ `$$` å‘½åè§„èŒƒæˆ– 6 æ­¥é…ç½®æµç¨‹ã€‚

### 4.2 æ¡ˆä¾‹äºŒï¼šAPI è°ƒç”¨ä»£ç ç”Ÿæˆ

#### 4.2.1 ä»»åŠ¡æè¿°

æ ¹æ® API æ–‡æ¡£ç”Ÿæˆè°ƒç”¨ä»£ç ã€‚

#### 4.2.2 RAG æ–¹æ¡ˆ

**æç¤ºè¯è®¾è®¡**ï¼š

```
# System Prompt
ä½ æ˜¯ç²¾ç¡®çš„ä»£ç ç”ŸæˆåŠ©æ‰‹ã€‚**ä»…ä½¿ç”¨**æä¾›çš„ Context ä¸­çš„ API æ–‡æ¡£ã€‚

CRITICAL RULES:
1. ä½¿ç”¨æ–‡æ¡£ä¸­**ç¡®åˆ‡**çš„ç«¯ç‚¹ã€å‚æ•°ã€å“åº”æ ¼å¼
2. ä¸è¦åŸºäºå…ˆéªŒçŸ¥è¯†å‡è®¾ API ç»†èŠ‚
3. å¦‚æœ Context ä¸­ç¼ºå°‘å¿…è¦ä¿¡æ¯ï¼Œæ˜ç¡®è¯´æ˜

# Context (RAG æ£€ç´¢)
Base URL: https://api.example.com/v1
Authentication: X-API-Key header
Endpoint: GET /users/{id}
Response: {"id": string, "name": string}

# User Prompt
ç¼–å†™ Python å‡½æ•° fetch_user_name(user_id, api_key) è°ƒç”¨ä¸Šè¿° API
```

**ç”Ÿæˆä»£ç **ï¼š

```python
import requests

def fetch_user_name(user_id: str, api_key: str) -> str:
    url = f"https://api.example.com/v1/users/{user_id}"
    headers = {"X-API-Key": api_key}
    response = requests.get(url, headers=headers)
    response.raise_for_status()
    return response.json()["name"]
```

**å¯¹æ¯”**ï¼š

- æ—  RAGï¼šæ¨¡å‹å¯èƒ½å¹»è§‰å‡ºé”™è¯¯çš„ç«¯ç‚¹æˆ–å‚æ•°
- æœ‰ RAGï¼šå‡†ç¡®åŸºäºæ–‡æ¡£ç”Ÿæˆä»£ç 

### 4.3 æ¡ˆä¾‹ä¸‰ï¼šæ¸¸æˆèƒŒåŒ…ç³»ç»Ÿå®ç°

#### 4.3.1 ä»»åŠ¡æè¿°

å®ç°ä¸€ä¸ªæ”¯æŒå †å ã€æ’åºã€æ‹–æ‹½çš„ RPG æ¸¸æˆèƒŒåŒ…ç³»ç»Ÿï¼ˆUnity/C#ï¼‰

#### 4.3.2 ä¸åŒæ–¹æ¡ˆå¯¹æ¯”

**æ–¹æ¡ˆ Aï¼šç›´æ¥æé—®**

```
è¾“å…¥: "ç”¨ Unity C# å®ç°ä¸€ä¸ªèƒŒåŒ…ç³»ç»Ÿï¼Œæ”¯æŒç‰©å“å †å "
è¾“å‡º: [å¯èƒ½ç¼ºå°‘å…³é”®åŠŸèƒ½ï¼Œå¦‚æ‹–æ‹½ã€ä¿å­˜ç­‰]
```

**æ–¹æ¡ˆ Bï¼šCoT + ä»»åŠ¡åˆ†è§£**

```
è¾“å…¥: "è®©æˆ‘ä»¬ä¸€æ­¥æ­¥å®ç°èƒŒåŒ…ç³»ç»Ÿï¼š
1. è®¾è®¡ç‰©å“æ•°æ®ç»“æ„ï¼ˆItemDataï¼‰
2. è®¾è®¡èƒŒåŒ…æ§½ä½ï¼ˆSlotï¼‰æ•°æ®ç»“æ„
3. å®ç°èƒŒåŒ…ç®¡ç†å™¨ï¼ˆBagManagerï¼‰
4. å®ç°å †å é€»è¾‘
5. å®ç°æ‹–æ‹½åŠŸèƒ½
6. å®ç°æ•°æ®æŒä¹…åŒ–"

è¾“å‡º:
- å®Œæ•´çš„ç±»è®¾è®¡
- æ¯ä¸ªæ­¥éª¤çš„è¯¦ç»†ä»£ç 
- è€ƒè™‘è¾¹ç•Œæƒ…å†µ
```

**æ–¹æ¡ˆ Cï¼šRAG + Few-Shot**

```
# System Prompt
ä½ æ˜¯ Unity æ¸¸æˆå¼€å‘ä¸“å®¶ã€‚

# é¡¹ç›®æ¶æ„æ–‡æ¡£ (RAG)
- ä½¿ç”¨ ScriptableObject å­˜å‚¨ç‰©å“é…ç½®
- ä½¿ç”¨äº‹ä»¶ç³»ç»Ÿè§£è€¦ UI å’Œé€»è¾‘
- éµå¾ªå•ä¸€èŒè´£åŸåˆ™

# ä»£ç ç¤ºä¾‹ (K-shot)
ç¤ºä¾‹ - Slot ç±»ç»“æ„:
```csharp
public class Slot : MonoBehaviour {
    public ItemData currentItem;
    public int stackCount;
    // ...
}
```

# ä»»åŠ¡

å®ç°èƒŒåŒ…ç³»ç»Ÿï¼ŒåŒ…å«ä»¥ä¸‹åŠŸèƒ½ï¼š
- æ”¯æŒç‰©å“å †å ï¼ˆæŒ‰ç‰©å“ç±»å‹ï¼‰
- æ”¯æŒæ‹–æ‹½æ•´ç†ç‰©å“
- æ”¯æŒæŒ‰ç±»å‹ã€å“è´¨ã€åç§°æ’åº
- æ”¯æŒå¿«æ·é”®ä½¿ç”¨ç‰©å“
- æ”¯æŒæ•°æ®æŒä¹…åŒ–ä¿å­˜

# è¾“å‡ºè¦æ±‚

- ç‰©å“æ•°æ®ç»“æ„ï¼ˆItemData ScriptableObjectï¼‰
- æ§½ä½æ•°æ®ç»“æ„ï¼ˆSlotDataï¼‰
- èƒŒåŒ…ç®¡ç†å™¨ï¼ˆBagManagerï¼‰
- UI æ§åˆ¶å™¨ï¼ˆBagControllerï¼‰
- æ‹–æ‹½å¤„ç†é€»è¾‘
- æ•°æ®æŒä¹…åŒ–ä»£ç 
```

**ç”Ÿæˆç»“æœ**ï¼š

```csharp
// ItemData.cs - ç‰©å“é…ç½®æ•°æ®
[CreateAssetMenu(fileName = "NewItem", menuName = "Inventory/Item Data")]
public class ItemData : ScriptableObject
{
    public string itemName;
    public Sprite icon;
    public int maxStackSize = 1;
    public ItemType itemType;
    public int sellPrice;
}

// SlotData.cs - æ§½ä½æ•°æ®
[System.Serializable]
public class SlotData
{
    public string itemId;
    public int stackCount;
    public bool isEmpty => string.IsNullOrEmpty(itemId);

    public SlotData()
    {
        itemId = null;
        stackCount = 0;
    }

    public SlotData(string id, int count)
    {
        itemId = id;
        stackCount = count;
    }
}

// BagManager.cs - èƒŒåŒ…ç®¡ç†å™¨
public class BagManager : MonoBehaviour
{
    [SerializeField] private int slotCount = 20;
    private List<SlotData> slots = new List<SlotData>();
```

#### æ ¸å¿ƒè¦ç‚¹

*   **é¡¹ç›®ç‰¹å®šæ€§**ï¼šçœŸå®é¡¹ç›®ä¸­çš„å‘½åè§„èŒƒã€æ¡†æ¶çº¦å®šå’Œå¤æ‚çš„é…ç½®æ³¨å†Œæµç¨‹ï¼ˆå¦‚ Cocos Creator çš„ `$$` åç¼€å’Œ 6 æ­¥é…ç½®ï¼‰ï¼Œæ˜¯æç¤ºè¯å·¥ç¨‹çš„å·¨å¤§æŒ‘æˆ˜ã€‚
*   **K-shot + RAG çš„ç”Ÿäº§åŠ›**ï¼šé€šè¿‡ç»“åˆé«˜è´¨é‡çš„æ¶æ„æ–‡æ¡£ï¼ˆRAGï¼‰å’Œç²¾ç¡®é€‰æ‹©çš„å°‘æ ·æœ¬ç¤ºä¾‹ï¼ˆK-shotï¼‰ï¼Œå¯ä»¥ä½¿ LLM ç”Ÿæˆçš„ä»£ç é«˜åº¦ç¬¦åˆé¡¹ç›®è§„èŒƒï¼Œæ˜¾è‘—æé«˜ç”ŸæˆæˆåŠŸç‡å’Œä»£ç è´¨é‡ï¼Œå‡å°‘äººå·¥ä¿®æ”¹ã€‚
*   **Reflexion çš„è¿­ä»£ä¼˜åŒ–**ï¼šåœ¨éœ€è¦æé«˜è´¨é‡å’Œè‡ªåŠ¨ä¿®æ­£çš„åœºæ™¯ä¸‹ï¼ŒReflexion å¾ªç¯ç»“åˆéªŒè¯æœºåˆ¶ï¼Œèƒ½å¤Ÿè‡ªåŠ¨å‘ç°å¹¶ä¿®å¤ä»£ç ä¸­çš„é”™è¯¯ï¼Œè¿›ä¸€æ­¥æå‡ç”Ÿæˆä»£ç çš„å‡†ç¡®æ€§å’Œå®Œæ•´æ€§ã€‚
*   **å¤šæ–¹æ¡ˆå¯¹æ¯”**ï¼šé’ˆå¯¹ä¸åŒéœ€æ±‚ï¼ˆç®€å•åŸå‹ã€ç”Ÿäº§ä»£ç ã€é«˜å¯é æ€§åœºæ™¯ï¼‰ï¼Œå¯ä»¥é€‰æ‹©ä¸åŒçš„æç¤ºè¯ç­–ç•¥ï¼ˆç®€å•æç¤ºã€K-shot + RAGã€Reflexionï¼‰ï¼Œä»¥å¹³è¡¡ç”Ÿæˆæ•ˆç‡å’Œè´¨é‡ã€‚
*   **å…³é”®æˆåŠŸå› ç´ **ï¼šRAG æ£€ç´¢å†…å®¹çš„è´¨é‡ã€K-shot ç¤ºä¾‹çš„å¤šæ ·æ€§å’Œä»£è¡¨æ€§ã€ä»¥åŠå¯¹é¡¹ç›®ç‰¹å®šè§„åˆ™ï¼ˆå¦‚é…ç½®æ³¨å†Œå®Œæ•´æ€§ï¼‰çš„æ˜ç¡®ç¼–ç ï¼Œæ˜¯ç¡®ä¿æç¤ºè¯å·¥ç¨‹åœ¨å®æˆ˜ä¸­æˆåŠŸçš„å…³é”®ã€‚
*   **API å’Œé€»è¾‘ç³»ç»Ÿ**ï¼šRAG åŒæ ·èƒ½æœ‰æ•ˆåº”ç”¨äºåŸºäºç‰¹å®šæ–‡æ¡£ç”Ÿæˆ API è°ƒç”¨ä»£ç ï¼Œè€Œç»“åˆ CoT å’Œ Few-Shot åˆ™èƒ½å®ç°å¤æ‚æ¸¸æˆé€»è¾‘ç³»ç»Ÿï¼ˆå¦‚èƒŒåŒ…ç³»ç»Ÿï¼‰çš„ç²¾ç»†åŒ–ç”Ÿæˆã€‚

---

    // äº‹ä»¶ç³»ç»Ÿ
    public event Action<int> OnSlotUpdated;
    public event Action OnInventoryUpdated;

    private void Awake()
    {
        // åˆå§‹åŒ–æ§½ä½
        for (int i = 0; i < slotCount; i++)
        {
            slots.Add(new SlotData());
        }
    }

    // æ·»åŠ ç‰©å“
    public bool AddItem(ItemData item, int count)
    {
        // å…ˆå°è¯•å †å åˆ°å·²æœ‰æ§½ä½
        for (int i = 0; i < slots.Count; i++)
        {
            if (!slots[i].isEmpty && slots[i].itemId == item.name)
            {
                int space = item.maxStackSize - slots[i].stackCount;
                int addAmount = Mathf.Min(space, count);
                slots[i].stackCount += addAmount;
                count -= addAmount;
                OnSlotUpdated?.Invoke(i);

                if (count <= 0) return true;
            }
        }

        // æ‰¾ç©ºæ§½ä½
        for (int i = 0; i < slots.Count; i++)
        {
            if (slots[i].isEmpty)
            {
                slots[i] = new SlotData(item.name, count);
                OnSlotUpdated?.Invoke(i);
                OnInventoryUpdated?.Invoke();
                return true;
            }
        }

        return false; // èƒŒåŒ…æ»¡äº†
    }

    // ç§»é™¤ç‰©å“
    public bool RemoveItem(int slotIndex, int count)
    {
        if (slotIndex < 0 || slotIndex >= slots.Count) return false;

        if (!slots[slotIndex].isEmpty)
        {
            slots[slotIndex].stackCount -= count;
            if (slots[slotIndex].stackCount <= 0)
            {
                slots[slotIndex] = new SlotData();
            }
            OnSlotUpdated?.Invoke(slotIndex);
            OnInventoryUpdated?.Invoke();
            return true;
        }
        return false;
    }

    // äº¤æ¢ç‰©å“
    public void SwapItems(int fromIndex, int toIndex)
    {
        if (fromIndex < 0 || fromIndex >= slots.Count ||
            toIndex < 0 || toIndex >= slots.Count) return;

        SlotData temp = slots[fromIndex];
        slots[fromIndex] = slots[toIndex];
        slots[toIndex] = temp;

        OnSlotUpdated?.Invoke(fromIndex);
        OnSlotUpdated?.Invoke(toIndex);
    }

    // æ’åºï¼ˆæŒ‰ç±»å‹ï¼‰
    public void SortByType()
    {
        // å®ç°æ’åºé€»è¾‘...
        OnInventoryUpdated?.Invoke();
    }

    // æ•°æ®æŒä¹…åŒ–
    public void SaveInventory()
    {
        List<SlotSaveData> saveData = new List<SlotSaveData>();
        foreach (var slot in slots)
        {
            saveData.Add(new SlotSaveData
            {
                itemId = slot.itemId,
                stackCount = slot.stackCount
            });
        }
        PlayerPrefs.SetString("InventoryData", JsonUtility.ToJson(new InventorySaveData { slots = saveData }));
    }

    public void LoadInventory()
    {
        string json = PlayerPrefs.GetString("InventoryData");
        if (!string.IsNullOrEmpty(json))
        {
            var saveData = JsonUtility.FromJson<InventorySaveData>(json);
            for (int i = 0; i < saveData.slots.Count && i < slots.Count; i++)
            {
                slots[i] = new SlotData(saveData.slots[i].itemId, saveData.slots[i].stackCount);
            }
            OnInventoryUpdated?.Invoke();
        }
    }
}

// BagController.cs - UI æ§åˆ¶å™¨
public class BagController : MonoBehaviour
{
    [SerializeField] private BagManager bagManager;
    [SerializeField] private GameObject slotPrefab;
    [SerializeField] private Transform contentPanel;

    private List<SlotUI> slotUIs = new List<SlotUI>();

    private void Start()
    {
        bagManager.OnSlotUpdated += UpdateSlotUI;
        bagManager.OnInventoryUpdated += RefreshAllSlots;

        // åˆå§‹åŒ– UI
        for (int i = 0; i < bagManager.SlotCount; i++)
        {
            GameObject slotObj = Instantiate(slotPrefab, contentPanel);
            SlotUI slotUI = slotObj.GetComponent<SlotUI>();
            slotUI.Initialize(i, bagManager);
            slotUIs.Add(slotUI);
        }
        RefreshAllSlots();
    }

    private void UpdateSlotUI(int slotIndex)
    {
        if (slotIndex >= 0 && slotIndex < slotUIs.Count)
        {
            slotUIs[slotIndex].Refresh();
        }
    }

    private void RefreshAllSlots()
    {
        foreach (var slotUI in slotUIs)
        {
            slotUI.Refresh();
        }
    }
}
```

**æ•ˆæœ**ï¼š
- ç¬¦åˆé¡¹ç›®æ¶æ„çš„å®Œæ•´ä»£ç 
- è‡ªåŠ¨åº”ç”¨é¡¹ç›®è§„èŒƒï¼ˆScriptableObjectã€äº‹ä»¶ç³»ç»Ÿï¼‰
- ä»£ç é£æ ¼ä¸€è‡´
- åŒ…å«æ‰€æœ‰å…³é”®åŠŸèƒ½

### 4.4 æ¡ˆä¾‹å››ï¼šä»£ç è°ƒè¯•ä¸ä¿®å¤

#### 4.4.1 ä»»åŠ¡æè¿°

ä»£ç æµ‹è¯•å¤±è´¥ï¼Œéœ€è¦å®šä½å’Œä¿®å¤ bugã€‚

#### 4.4.2 Reflexion æ–¹æ¡ˆ

**åœºæ™¯**ï¼šå¯†ç éªŒè¯å‡½æ•°æµ‹è¯•å¤±è´¥

**è¿­ä»£è¿‡ç¨‹**ï¼š

```
è¿­ä»£ 0:
ä»£ç : return len(p) >= 8 and any(c.isalpha() for c in p)
æµ‹è¯•: å¤±è´¥ - missing uppercase, missing special

åæ€:
- é—®é¢˜ï¼šåªæ£€æŸ¥äº†å­—æ¯ï¼Œæ²¡æœ‰åŒºåˆ†å¤§å°å†™
- éœ€è¦æ·»åŠ ï¼šå¤§å†™å­—æ¯æ£€æŸ¥ã€ç‰¹æ®Šå­—ç¬¦æ£€æŸ¥

è¿­ä»£ 1:
ä»£ç : return len(p) >= 8 \
       and any(c.isupper() for c in p) \
       and any(c.islower() for c in p) \
       and any(c.isdigit() for c in p) \
       and any(c in "!@#$%^&*()-_" for c in p)
æµ‹è¯•: é€šè¿‡ âœ…
```

**æ•ˆæœ**ï¼š

- ä» 2 ä¸ªå¤±è´¥æµ‹è¯•åˆ°å…¨éƒ¨é€šè¿‡
- è‡ªåŠ¨è¯†åˆ«ç¼ºå¤±çš„éªŒè¯è§„åˆ™
- æ— éœ€äººå·¥å¹²é¢„

---

## 6. æŠ€æœ¯åŸç†æ·±åº¦å‰–æ

### 5.1 LLM çš„å·¥ä½œåŸç†

#### 5.1.1 Transformer æ¶æ„

**æ ¸å¿ƒç»„ä»¶**ï¼š

```
è¾“å…¥æ–‡æœ¬ â†’ Tokenization â†’ Token Embeddings
                                    â†“
                        + Positional Encodings
                                    â†“
                            [ç¼–ç å™¨å±‚ Ã— N]
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  è‡ªæ³¨æ„åŠ›å±‚              â”‚
                    â”‚  å‰é¦ˆå±‚                â”‚
                    â”‚  æ®‹å·®è¿æ¥ + å±‚å½’ä¸€åŒ–     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
                            [è§£ç å™¨å±‚ Ã— N]
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  ç¼–ç -è§£ç æ³¨æ„åŠ›         â”‚
                    â”‚  è‡ªæ³¨æ„åŠ›å±‚             â”‚
                    â”‚  å‰é¦ˆå±‚                â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
                            è¾“å‡ºæ¦‚ç‡åˆ†å¸ƒ
                                    â†“
                                é‡‡æ ·
```

**è‡ªæ³¨æ„åŠ›æœºåˆ¶**ï¼š

```
Attention(Q, K, V) = softmax(QK^T / âˆšd_k) V

å…¶ä¸­ï¼š
- Q (Query): æŸ¥è¯¢å‘é‡
- K (Key): é”®å‘é‡
- V (Value): å€¼å‘é‡
- d_k: ç¼©æ”¾å› å­

ç›´è§‚ç†è§£ï¼š
- Q: "æˆ‘åœ¨æ‰¾ä»€ä¹ˆ"
- K: "æˆ‘èƒ½æä¾›ä»€ä¹ˆ"
- V: "æˆ‘çš„å†…å®¹æ˜¯ä»€ä¹ˆ"
```

#### 5.1.2 è‡ªå›å½’ç”Ÿæˆ

**ç”Ÿæˆè¿‡ç¨‹**ï¼š

```
P(token_t | context) = softmax(W_o Â· h_t + b_o)

å…¶ä¸­ h_t æ˜¯éšè—çŠ¶æ€ï¼ŒåŸºäºï¼š
h_t = Transformer_Layer(token_<t, h_<t)

ç”Ÿæˆæµç¨‹ï¼š
token_1 âˆ¼ P(Â· | [START])
token_2 âˆ¼ P(Â· | [START, token_1])
token_3 âˆ¼ P(Â· | [START, token_1, token_2])
...
token_T âˆ¼ P(Â· | [START, token_1, ..., token_{T-1}])
```

**ä¸ºä»€ä¹ˆæç¤ºè¯é‡è¦ï¼Ÿ**

```
ä¸åŒçš„ context å¯¼è‡´å®Œå…¨ä¸åŒçš„ P(token | context)

ç¤ºä¾‹:
context_1: "The capital of France is"
  â†’ P("Paris" | context_1) = 0.92
  â†’ P("London" | context_1) = 0.01

context_2: "The capital of the UK is"
  â†’ P("Paris" | context_2) = 0.01
  â†’ P("London" | context_2) = 0.93

æç¤ºè¯å·¥ç¨‹ = ä¼˜åŒ– context ä»¥æ”¹å˜æ¦‚ç‡åˆ†å¸ƒ
```

### 5.2 In-Context Learning æœºåˆ¶

#### 5.2.1 å…ƒå­¦ä¹ è§†è§’

**ä¼ ç»Ÿå¾®è°ƒ**ï¼š

```
Î¸_{task} = argmin_Î¸ E_{(x,y)âˆ¼D_task}[L(f_Î¸(x), y)]

éœ€è¦æ¢¯åº¦æ›´æ–°ï¼Œæ¯ä¸ªä»»åŠ¡éƒ½è¦è®­ç»ƒ
```

**In-Context Learning**ï¼š

```
f_Î¸(y | x, S_K) â‰ˆ f_Î¸'(y | x)

å…¶ä¸­ S_K = {(x_1, y_1), ..., (x_K, y_K)} æ˜¯ç¤ºä¾‹

æ— éœ€æ¢¯åº¦æ›´æ–°ï¼Œé€šè¿‡å‰å‘ä¼ æ’­"å­¦ä¹ "
```

**ä¸ºä»€ä¹ˆæœ‰æ•ˆï¼Ÿ**

å‡è®¾åœ¨è®­ç»ƒæ—¶ï¼Œæ¨¡å‹è§è¿‡å¤§é‡ä»»åŠ¡ï¼š

```
ä»»åŠ¡ 1: ç¿»è¯‘è‹±è¯­â†’æ³•è¯­
ä»»åŠ¡ 2: æƒ…æ„Ÿåˆ†ç±»
ä»»åŠ¡ 3: ä»£ç ç”Ÿæˆ
...
ä»»åŠ¡ M: å­—ç¬¦ä¸²åè½¬

æ¯ä¸ªä»»åŠ¡éƒ½æä¾›ç¤ºä¾‹ {(x_i, y_i)}

æ¨¡å‹å­¦ä¹ åˆ°å…ƒæŠ€èƒ½ï¼š
"å¦‚ä½•ä»ç¤ºä¾‹ä¸­æ¨æ–­ä»»åŠ¡è§„åˆ™"
```

#### 5.2.2 æ³¨æ„åŠ›æ¨¡å¼åˆ†æ

**K-shot ç¤ºä¾‹çš„æ³¨æ„åŠ›æƒé‡**ï¼š

```
ä½ç½®: [ç¤ºä¾‹1] [ç¤ºä¾‹2] ... [ç¤ºä¾‹K] [æŸ¥è¯¢]
        â†“       â†“             â†“        â†“
ç”Ÿæˆ"æŸ¥è¯¢"çš„ç­”æ¡ˆæ—¶ï¼Œæ³¨æ„åŠ›åˆ†å¸ƒï¼š

ç¤ºä¾‹ 1: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 12%
ç¤ºä¾‹ 2: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘ 24%
ç¤ºä¾‹ 3: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘ 20%
ç¤ºä¾‹ 4: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 28%  â† ç›¸å…³æ€§æœ€é«˜
ç¤ºä¾‹ 5: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 31%  â† æœ€è¿‘ï¼ˆè¿‘å› ï¼‰
æŸ¥è¯¢:   â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 5%

å…³é”®å‘ç°ï¼š
1. ç›¸å…³ç¤ºä¾‹è·å¾—æ›´é«˜æƒé‡
2. æœ€è¿‘ç¤ºä¾‹æœ‰è¿‘å› ä¼˜åŠ¿
3. æ¨¡å‹è‡ªåŠ¨å­¦ä¹ "å“ªä¸ªç¤ºä¾‹æœ€æœ‰ç”¨"
```

### 5.3 Chain-of-Thought çš„è®¡ç®—åŸç†

#### 5.3.1 æ¨ç†è·¯å¾„ä½œä¸ºè®¡ç®—å›¾

```
é—®é¢˜: è®¡ç®— 3^12345 mod 100

æ—  CoT:
ç›´æ¥ç”Ÿæˆç­”æ¡ˆ
  LLM â†’ "43"  (é»‘ç›’ï¼Œä¸çŸ¥é“å¦‚ä½•å¾—åˆ°)

æœ‰ CoT:
ç”Ÿæˆæ¨ç†é“¾
  æ­¥éª¤1: LLM â†’ "è§‚å¯Ÿ 3^n mod 100 çš„æ¨¡å¼"
  æ­¥éª¤2: LLM â†’ "è®¡ç®—å‘ç°å‘¨æœŸä¸º 20"
  æ­¥éª¤3: LLM â†’ "12345 mod 20 = 5"
  æ­¥éª¤4: LLM â†’ "3^5 = 243"
  æ­¥éª¤5: LLM â†’ "243 mod 100 = 43"
  æœ€ç»ˆ:  "ç­”æ¡ˆæ˜¯ 43"

æ¯ä¸€æ­¥éƒ½åŸºäºå‰ä¸€æ­¥çš„è¾“å‡ºï¼ˆè‡ªå›å½’ï¼‰
```

#### 5.3.2 æ•°å­¦è¯æ˜ï¼šä¸ºä»€ä¹ˆ CoT æå‡æ€§èƒ½

**é”™è¯¯ä¼ æ’­æ¨¡å‹**ï¼š

è®¾æ¯æ­¥æ¨ç†çš„é”™è¯¯ç‡ä¸º Îµ

```
æ—  CoT (ç›´æ¥è·³è·ƒ):
P(æ­£ç¡®) = 1 - Îµ

æœ‰ CoT (T æ­¥æ¨ç†):
æ¯æ­¥å¯éªŒè¯ï¼Œå±€éƒ¨é”™è¯¯ç‡ Îµ' < Îµ

P(å…¨éƒ¨æ­£ç¡®) = (1 - Îµ')^T

å½“ Îµ = 0.2, Îµ' = 0.05, T = 5:
æ—  CoT: P = 0.8
æœ‰ CoT: P = 0.95^5 â‰ˆ 0.77

ä½†å¦‚æœä¸­é—´æ­¥éª¤å¯ä¿®æ­£:
å®é™… P(æ­£ç¡®) â‰ˆ 1 - TÂ·Îµ' = 1 - 0.25 = 0.75

å…³é”®ä¼˜åŠ¿:
1. é”™è¯¯å¯å®šä½ï¼ˆçŸ¥é“å“ªæ­¥é”™äº†ï¼‰
2. é”™è¯¯å¯ä¿®æ­£ï¼ˆåªéœ€é‡åšé‚£ä¸€æ­¥ï¼‰
3. æ¨ç†å¯è§£é‡Šï¼ˆçœ‹åˆ°æ€è€ƒè¿‡ç¨‹ï¼‰
```

### 5.4 RAG çš„æ£€ç´¢åŸç†

#### 5.4.1 å‘é‡åµŒå…¥çš„æ•°å­¦åŸç†

**åµŒå…¥æ¨¡å‹çš„ç›®æ ‡**ï¼š

```
å­¦ä¹ å‡½æ•° f: Text â†’ R^d

ä½¿å¾—è¯­ä¹‰ç›¸ä¼¼çš„æ–‡æœ¬è·ç¦»è¿‘ï¼š
sim(text_1, text_2) â‰ˆ cosine(f(text_1), f(text_2))

è®­ç»ƒç›®æ ‡ (Contrastive Loss):
L = -log(exp(sim(f(x), f(x+))/Ï„) / Î£ exp(sim(f(x), f(x-))/Ï„))

å…¶ä¸­ï¼š
- x+: æ­£æ ·æœ¬ï¼ˆè¯­ä¹‰ç›¸ä¼¼ï¼‰
- x-: è´Ÿæ ·æœ¬ï¼ˆè¯­ä¹‰ä¸ç›¸ä¼¼ï¼‰
- Ï„: æ¸©åº¦å‚æ•°
```

**æ£€ç´¢è¿‡ç¨‹**ï¼š

```python
# 1. æŸ¥è¯¢åµŒå…¥
q = embed(query)  # R^d

# 2. è®¡ç®—ä¸æ‰€æœ‰æ–‡æ¡£çš„ç›¸ä¼¼åº¦
scores = [cosine(q, d) for d in doc_vectors]

# 3. Top-K é€‰æ‹©
top_k_indices = argsort(scores)[-k:]

# å¤æ‚åº¦: O(NÂ·d) ç²¾ç¡®æœç´¢
#          O(log NÂ·d) è¿‘ä¼¼æœç´¢ (ä½¿ç”¨ HNSW ç´¢å¼•)
```

#### 5.4.2 æ··åˆæ£€ç´¢ï¼ˆDense + Sparseï¼‰

**Dense Retrievalï¼ˆå¯†é›†æ£€ç´¢ï¼‰**ï¼š

```
ä¼˜åŠ¿: æ•æ‰è¯­ä¹‰ç›¸ä¼¼åº¦
åŠ£åŠ¿: å¯èƒ½ç²¾ç¡®åŒ¹é…å…³é”®è¯

ç¤ºä¾‹:
æŸ¥è¯¢: "dog"
æ£€ç´¢åˆ°: "puppy", "canine", "pet"
```

**Sparse Retrievalï¼ˆç¨€ç–æ£€ç´¢ï¼Œå¦‚ BM25ï¼‰**ï¼š

```
ä¼˜åŠ¿: ç²¾ç¡®å…³é”®è¯åŒ¹é…
åŠ£åŠ¿: ä¸ç†è§£è¯­ä¹‰

ç¤ºä¾‹:
æŸ¥è¯¢: "dog"
æ£€ç´¢åˆ°: "dog", "dog's", "dogs"
```

**Hybridï¼ˆæ··åˆï¼‰**ï¼š

```python
def hybrid_search(query, alpha=0.5):
    # Dense: å‘é‡ç›¸ä¼¼åº¦
    dense_score = cosine_similarity(embed(query), embed(doc))

    # Sparse: BM25
    sparse_score = bm25(query, doc)

    # èåˆ
    final_score = alpha * dense_score + (1 - alpha) * sparse_score

    return final_score
```

### 5.5 Tool Calling çš„å®ç°åŸç†

#### 5.5.1 ç»“æ„åŒ–ç”Ÿæˆ

**é—®é¢˜**ï¼šLLM ç”Ÿæˆæ–‡æœ¬ï¼Œå¦‚ä½•ä¿è¯æœ‰æ•ˆçš„ JSONï¼Ÿ

**æ–¹æ¡ˆ 1: åå¤„ç†**ï¼ˆä¸å¯é ï¼‰

```python
# ç”Ÿæˆæ–‡æœ¬
output = llm.generate("Call the weather tool")
# å¯èƒ½: '{"tool": "get_weather", "city": "Tokyo"}'
# å¯èƒ½: 'I think we should call get_weather'

# å°è¯•è§£æ
try:
    result = json.loads(output)
except:
    # å¤±è´¥ï¼Œéœ€è¦é‡æ–°ç”Ÿæˆ
    pass
```

**æ–¹æ¡ˆ 2: Constrained Decoding**ï¼ˆå¯é ï¼‰

```python
import json
import torch

def constrained_decode(prompt, json_schema):
    """åœ¨ç”Ÿæˆæ—¶åªå…è®¸åˆæ³•çš„ tokens"""

    # 1. è§£æ schema ä¸ºçŠ¶æ€æœº
    states = build_fsm_from_schema(json_schema)

    # 2. ç”Ÿæˆæ—¶åŠ¨æ€ mask
    generated = tokenize(prompt)
    current_state = states["start"]

    for step in range(max_tokens):
        # è·å– logits
        logits = model(generated).logits[:, -1, :]

        # æ ¹æ®å½“å‰çŠ¶æ€ï¼Œmask ä¸åˆæ³•çš„ tokens
        valid_tokens = current_state.valid_tokens()
        mask = torch.zeros_like(logits)
        mask[valid_tokens] = 1

        # åº”ç”¨ mask
        logits = logits + (mask - 1) * 1e9

        # é‡‡æ ·
        next_token = sample(logits)
        generated = torch.cat([generated, next_token])

        # è½¬ç§»çŠ¶æ€
        current_state = current_state.transition(next_token)

        # æ£€æŸ¥æ˜¯å¦å®Œæˆ
        if current_state.is_final():
            break

    # è§£æ
    output_text = detokenize(generated)
    return json.loads(output_text)
```

#### 5.5.2 è®­ç»ƒè¿‡ç¨‹

**é˜¶æ®µ 1: ç›‘ç£å¾®è°ƒï¼ˆSFTï¼‰**

```
æ•°æ®æ ¼å¼:
{
  "messages": [
    {"role": "user", "content": "What's the weather in Tokyo?"},
    {"role": "assistant", "content": '{"tool": "get_weather", "args": {"city": "Tokyo"}}'}
  ]
}

è®­ç»ƒç›®æ ‡:
L_SFT = -Î£ log P(token_t | token_{<t}, examples)

æ¨¡å‹å­¦ä¹ :
1. è¯†åˆ«ä½•æ—¶éœ€è¦å·¥å…·
2. ç”Ÿæˆç¬¦åˆ schema çš„ JSON
3. æå–å‚æ•°ä»æŸ¥è¯¢ä¸­
```

**é˜¶æ®µ 2: å¼ºåŒ–å­¦ä¹ ï¼ˆRLHFï¼‰**

```
å¥–åŠ±è®¾è®¡:
R = w1 * R_success + w2 * R_correctness + w3 * R_efficiency

å…¶ä¸­:
- R_success: å·¥å…·è°ƒç”¨æˆåŠŸ (+1) / å¤±è´¥ (-10)
- R_correctness: å‚æ•°æ­£ç¡® (+2) / é”™è¯¯ (-5)
- R_efficiency: è°ƒç”¨æ¬¡æ•°å°‘ (bonus)

ä¼˜åŒ–:
âˆ‡Î¸ J(Î¸) = E[âˆ‡Î¸ log Ï€_Î¸(a|q) Â· A(q,a)]

å…¶ä¸­ A(q,a) = R(q,a) - b(q) æ˜¯ä¼˜åŠ¿å‡½æ•°
```

#### æ ¸å¿ƒè¦ç‚¹

*   **LLM åŸºç¡€**ï¼šLLM åŸºäº Transformer æ¶æ„å’Œè‡ªæ³¨æ„åŠ›æœºåˆ¶ï¼Œé€šè¿‡è‡ªå›å½’æ–¹å¼ç”Ÿæˆæ–‡æœ¬ã€‚æç¤ºè¯é€šè¿‡æ”¹å˜ç”Ÿæˆæ—¶çš„ä¸Šä¸‹æ–‡ï¼Œå½±å“æ¨¡å‹å¯¹ä¸‹ä¸€ä¸ªè¯çš„æ¦‚ç‡é¢„æµ‹ï¼Œä»è€Œå¼•å¯¼è¾“å‡ºã€‚
*   **In-Context Learning (ICL)**ï¼šæ¨¡å‹åœ¨è®­ç»ƒä¸­å­¦ä¹ åˆ°ä¸€ç§â€œå…ƒå­¦ä¹ â€èƒ½åŠ›ï¼Œèƒ½ä»æç¤ºè¯ä¸­çš„ç¤ºä¾‹ä¸­æ¨æ–­ä»»åŠ¡è§„åˆ™ã€‚æ³¨æ„åŠ›æœºåˆ¶çš„åˆ†æè¡¨æ˜ï¼Œæ¨¡å‹ä¼šè‡ªåŠ¨å…³æ³¨ä¸æŸ¥è¯¢ç›¸å…³çš„ç¤ºä¾‹ï¼Œä¸”é è¿‘æŸ¥è¯¢çš„ç¤ºä¾‹æœ‰è¿‘å› æ•ˆåº”ã€‚
*   **CoT å¢å¼ºæ¨ç†**ï¼šæ€ç»´é“¾é€šè¿‡å°†å¤æ‚é—®é¢˜åˆ†è§£ä¸ºå¯éªŒè¯çš„ä¸­é—´æ­¥éª¤ï¼Œå°†é•¿é“¾æ¨ç†è½¬åŒ–ä¸ºä¸€ç³»åˆ—çŸ­é“¾æ¨ç†ã€‚è¿™é™ä½äº†æ¯æ­¥çš„é”™è¯¯ç‡ï¼Œå¹¶ä½¿é”™è¯¯å¯å®šä½ã€å¯ä¿®æ­£ï¼Œæ˜¾è‘—æå‡äº†æ¨¡å‹åœ¨é€»è¾‘å’Œæ•°å­¦ä»»åŠ¡ä¸Šçš„æ€§èƒ½ã€‚
*   **RAG çŸ¥è¯†æ•´åˆ**ï¼šRAG é€šè¿‡å°†å¤–éƒ¨çŸ¥è¯†åº“ï¼ˆå‘é‡æ•°æ®åº“ï¼‰ä¸ LLM ç»“åˆï¼Œè§£å†³äº†æ¨¡å‹çš„çŸ¥è¯†è¾¹ç•Œé—®é¢˜ã€‚å®ƒä¾èµ–å‘é‡åµŒå…¥æ¥è¡¡é‡è¯­ä¹‰ç›¸ä¼¼åº¦ï¼Œå¹¶é€šè¿‡æ··åˆæ£€ç´¢ï¼ˆå¯†é›†+ç¨€ç–ï¼‰æé«˜å¬å›ç‡å’Œç²¾ç¡®åº¦ã€‚
*   **å·¥å…·è°ƒç”¨æ‰©å±•èƒ½åŠ›**ï¼šé€šè¿‡ç»“æ„åŒ–ç”Ÿæˆï¼ˆå¦‚å—é™è§£ç ï¼‰ï¼ŒLLM å¯ä»¥å¯é åœ°è¾“å‡ºç¬¦åˆç‰¹å®šæ¨¡å¼ï¼ˆå¦‚ JSON Schemaï¼‰çš„å·¥å…·è°ƒç”¨æŒ‡ä»¤ã€‚ç»“åˆç›‘ç£å¾®è°ƒï¼ˆSFTï¼‰å’Œå¼ºåŒ–å­¦ä¹ ï¼ˆRLHFï¼‰ï¼Œæ¨¡å‹èƒ½å¤Ÿå­¦ä¹ ä½•æ—¶ä»¥åŠå¦‚ä½•æ­£ç¡®è°ƒç”¨å¤–éƒ¨å·¥å…·ï¼Œæå¤§åœ°æ‰©å±•äº† LLM çš„åº”ç”¨è¾¹ç•Œã€‚

---

## 7. è¡Œä¸šå·¥å…·ä¸ç”Ÿæ€

### 6.1 æç¤ºè¯ç®¡ç†å¹³å°

#### 6.1.1 LangSmith

**å®˜æ–¹ç½‘ç«™**: https://docs.langchain.com/langsmith/

**æ ¸å¿ƒåŠŸèƒ½**ï¼š

1. **æç¤ºè¯ç‰ˆæœ¬æ§åˆ¶**
   
   ```python
   from langsmith import Client
   ```

client = Client()

# æäº¤æç¤ºè¯ç‰ˆæœ¬

prompt_id = client.create_prompt(
    name="code_review_prompt",
    template="ä½ æ˜¯ä»£ç å®¡æŸ¥ä¸“å®¶...",
    tags=["v1.0", "production"]
)

# æ‹‰å–ç‰¹å®šç‰ˆæœ¬

prompt = client.pull_prompt("code_review_prompt", tags=["v1.0"])

```
2. **A/B æµ‹è¯•**
```python
# æµ‹è¯•ä¸¤ä¸ªæç¤ºè¯ç‰ˆæœ¬
results = client.evaluate(
    dataset="code_review_dataset",
    prompts=["code_review_v1", "code_review_v2"],
    evaluators=["accuracy", "helpfulness"]
)
```

3. **ç›‘æ§ä¸è°ƒè¯•**
   
   ```python
   # è¿½è¸ªæç¤ºè¯æ‰§è¡Œ
   client.trace(
    prompt="code_review_v1",
    inputs={"code": "..."},
    metadata={"model": "gpt-4", "temperature": 0.0}
   )
   ```

#### 6.1.2 PromptHub

**å®˜æ–¹ç½‘ç«™**: https://prompthub.us/

**ç‰¹ç‚¹**ï¼š

- å¯è§†åŒ–æç¤ºè¯ç¼–è¾‘å™¨
- å›¢é˜Ÿåä½œåŠŸèƒ½
- ç‰ˆæœ¬å†å²ä¸å¯¹æ¯”
- æµ‹è¯•ä¸è¯„ä¼°

**ä½¿ç”¨åœºæ™¯**ï¼š

- ä¼ä¸šæç¤ºè¯åº“ç®¡ç†
- å¤šäººåä½œå¼€å‘
- ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

#### 6.1.3 å…¶ä»–å¹³å°

| å¹³å°              | ç‰¹ç‚¹               | é€‚ç”¨åœºæ™¯         |
| --------------- | ---------------- | ------------ |
| **LangSmith**   | ä¸ LangChain æ·±åº¦é›†æˆ | LangChain ç”¨æˆ· |
| **PromptHub**   | å¯è§†åŒ–ç¼–è¾‘ï¼Œæ˜“ç”¨         | å›¢é˜Ÿåä½œ         |
| **PromptLayer** | ç›‘æ§ä¸åˆ†æ            | ç”Ÿäº§ç¯å¢ƒ         |
| **HumanLoop**   | äººç±»åé¦ˆä¼˜åŒ–           | RLHF         |

### 6.2 å¼€å‘æ¡†æ¶ä¸åº“

#### 6.2.1 LangChain

**GitHub**: https://github.com/langchain-ai/langchain

**Prompt Templates**:

```python
from langchain.prompts import PromptTemplate
from langchain.prompts.few_shot import FewShotPromptTemplate

# åŸºç¡€æ¨¡æ¿
template = PromptTemplate(
    input_variables=["question"],
    template="è¯·å›ç­”è¿™ä¸ªé—®é¢˜: {question}\n\nå›ç­”:"
)

# Few-shot æ¨¡æ¿
examples = [
    {"input": "è‹¹æœ", "output": "æ°´æœ"},
    {"input": "èƒ¡èåœ", "output": "è”¬èœ"},
]

prompt = FewShotPromptTemplate(
    examples=examples,
    example_prompt=PromptTemplate(
        input_variables=["input", "output"],
        template="è¾“å…¥: {input}\nè¾“å‡º: {output}"
    ),
    prefix="ä»¥ä¸‹æ˜¯ä¸€äº›åˆ†ç±»ç¤ºä¾‹:",
    suffix="\nè¾“å…¥: {input}\nè¾“å‡º:",
    input_variables=["input"]
)

# ä½¿ç”¨
result = prompt.format(input="è¥¿çº¢æŸ¿")
print(result)
```

#### 6.2.2 LlamaIndex

**GitHub**: https://github.com/run-llama/llama_index

**RAG å®ç°**ï¼š

```python
from llama_index import VectorStoreIndex, SimpleDirectoryReader

# 1. åŠ è½½æ–‡æ¡£
documents = SimpleDirectoryReader('data').load_data()

# 2. åˆ›å»ºç´¢å¼•
index = VectorStoreIndex.from_documents(documents)

# 3. æŸ¥è¯¢
query_engine = index.as_query_engine()
response = query_engine.query("ä»€ä¹ˆæ˜¯ RAGï¼Ÿ")

print(response)
```

#### 6.2.3 DSPy

**GitHub**: https://github.com/stanfordnlp/dspy

**ç¨‹åºåŒ–æç¤ºè¯**ï¼š

```python
import dspy

class RAG(dspy.Module):
    def __init__(self, num_passages=3):
        super().__init__()
        self.retrieve = dspy.Retrieve(k=num_passages)
        self.generate_query = dspy.ChainOfThought("generate_query")
        self.generate_answer = dspy.ChainOfThought("generate_answer")

    def forward(self, question):
        # æ£€ç´¢
        contexts = self.retrieve(question).passages

        # ç”ŸæˆæŸ¥è¯¢
        query = self.generate_query(question=question)

        # ç”Ÿæˆç­”æ¡ˆ
        answer = self.generate_answer(
            question=question,
            context=contexts
        )

        return dspy.Prediction(context=contexts, answer=answer)

# ç¼–è¯‘ï¼ˆä¼˜åŒ–æç¤ºè¯ï¼‰
rag = RAG()
rag.compile(
    trainset=train_data,
    optimizer=dspy.BootstrapFewShot()
)
```

### 6.3 æç¤ºè¯ä¼˜åŒ–å·¥å…·

#### 6.3.1 PromptWizard

**å®˜æ–¹ç½‘ç«™**: https://microsoft.github.io/PromptWizard/

**åŠŸèƒ½**ï¼š

- è‡ªåŠ¨æç¤ºè¯ä¼˜åŒ–
- ç¤ºä¾‹é€‰æ‹©
- åé¦ˆé©±åŠ¨æ”¹è¿›

**ä½¿ç”¨**ï¼š

```python
from promptwizard import PromptWizard

# å®šä¹‰ä»»åŠ¡
task = {
    "name": "sentiment_analysis",
    "description": "åˆ†ææ–‡æœ¬çš„æƒ…æ„Ÿå€¾å‘",
    "examples": training_data
}

# ä¼˜åŒ–æç¤ºè¯
wizard = PromptWizard(task)
optimized_prompt = wizard.optimize(
    initial_prompt="åˆ†ææƒ…æ„Ÿ",
    iterations=10
)

print(optimized_prompt)
```

#### 6.3.2 PromptLayer

**å®˜æ–¹ç½‘ç«™**: https://promptlayer.com/

**åŠŸèƒ½**ï¼š

- æç¤ºè¯ç‰ˆæœ¬ç®¡ç†
- æ€§èƒ½è¿½è¸ª
- æˆæœ¬åˆ†æ

### 6.4 è¯„ä¼°ä¸åŸºå‡†æµ‹è¯•

#### 6.4.1 PromptBench

**GitHub**: https://github.com/microsoft/promptbench

**è¯„ä¼°æ¡†æ¶**ï¼š

```python
from promptbench import PromptBench

# 1. å®šä¹‰è¯„ä¼°ä»»åŠ¡
benchmark = PromptBench(
    dataset="GSM8K",  # æ•°å­¦æ•°æ®é›†
    metrics=["accuracy", "latency", "cost"]
)

# 2. æµ‹è¯•æç¤ºè¯
results = benchmark.evaluate(
    prompts={
        "baseline": "è§£å†³è¿™ä¸ªæ•°å­¦é—®é¢˜",
        "cot": "ä¸€æ­¥æ­¥æ€è€ƒå¹¶è§£å†³",
        "cot_sc": "ä¸€æ­¥æ­¥æ€è€ƒï¼ˆ5æ¬¡é‡‡æ ·æŠ•ç¥¨ï¼‰"
    },
    model="gpt-4"
)

# 3. åˆ†æç»“æœ
print(results.table())
results.plot()  # å¯è§†åŒ–å¯¹æ¯”
```

#### 6.4.2 è‡ªå®šä¹‰è¯„ä¼°

```python
def evaluate_prompt(prompt, test_set, criteria):
    """
    è¯„ä¼°æç¤ºè¯æ€§èƒ½
    """
    scores = []

    for example in test_set:
        # ç”Ÿæˆ
        output = llm.generate(prompt.format(**example))

        # è¯„ä¼°
        score = {}
        for criterion in criteria:
            score[criterion] = criterion.evaluate(
                output=output,
                expected=example["expected"]
            )

        scores.append(score)

    # æ±‡æ€»
    avg_scores = {
        criterion: np.mean([s[criterion] for s in scores])
        for criterion in criteria
    }

    return avg_scores

# ä½¿ç”¨
criteria = [
    ExactMatchCriterion(),
    SemanticSimilarityCriterion(),
    CodeExecutionCriterion()
]

results = evaluate_prompt(
    prompt=my_prompt,
    test_set=math_test_set,
    criteria=criteria
)
```

### 6.5 å¼€æºé¡¹ç›®æ¨è

#### 6.5.1 Awesome Prompt Engineering

**GitHub**: https://github.com/promptslab/Awesome-Prompt-Engineering

**å†…å®¹**ï¼š

- è®ºæ–‡åˆ—è¡¨
- å·¥å…·é›†åˆ
- å­¦ä¹ èµ„æº
- ç¤¾åŒºé¡¹ç›®

#### 6.5.2 Prompt Engineering Guide

**å®˜æ–¹ç½‘ç«™**: https://www.promptingguide.ai/

**å†…å®¹**ï¼š

- å®Œæ•´çš„æç¤ºè¯æŠ€æœ¯æŒ‡å—
- äº¤äº’å¼ç¤ºä¾‹
- æœ€æ–°ç ”ç©¶è®ºæ–‡
- æœ€ä½³å®è·µ

#### 6.5.3 DAIR.AI Prompt Engineering Guide

**GitHub**: https://github.com/dair-ai/Prompt-Engineering-Guide

**å†…å®¹**ï¼š

- è®ºæ–‡é›†åˆ
- è¯¾ç¨‹èµ„æº
- å·¥å…·æ¨è
- è¡Œä¸šåŠ¨æ€

#### æ ¸å¿ƒè¦ç‚¹

*   **ç”Ÿæ€ç¹è£**ï¼šæç¤ºè¯å·¥ç¨‹é¢†åŸŸæ‹¥æœ‰ä¸°å¯Œçš„å·¥å…·å’Œæ¡†æ¶ï¼Œè¦†ç›–æç¤ºè¯ç®¡ç†ã€å¼€å‘ã€ä¼˜åŒ–ã€è¯„ä¼°ç­‰å…¨ç”Ÿå‘½å‘¨æœŸã€‚
*   **ç®¡ç†å¹³å°**ï¼šLangSmithã€PromptHub ç­‰å¹³å°æä¾›æç¤ºè¯ç‰ˆæœ¬æ§åˆ¶ã€A/B æµ‹è¯•ã€ç›‘æ§è°ƒè¯•ç­‰åŠŸèƒ½ï¼Œæ˜¯å›¢é˜Ÿåä½œå’Œç”Ÿäº§ç¯å¢ƒéƒ¨ç½²çš„åˆ©å™¨ã€‚
*   **å¼€å‘æ¡†æ¶**ï¼šLangChainã€LlamaIndex ç­‰æ¡†æ¶ç®€åŒ–äº† LLM åº”ç”¨çš„å¼€å‘ï¼Œå°¤å…¶åœ¨æ„å»ºå¤æ‚çš„ RAG å’Œ Agent ç³»ç»Ÿæ—¶è¡¨ç°å‡ºè‰²ï¼›DSPy åˆ™é€šè¿‡ç¨‹åºåŒ–æ–¹å¼ä¼˜åŒ–æç¤ºè¯ã€‚
*   **ä¼˜åŒ–ä¸è¯„ä¼°**ï¼šPromptWizard ç­‰å·¥å…·èƒ½è‡ªåŠ¨ä¼˜åŒ–æç¤ºè¯ï¼ŒPromptBench æä¾›åŸºå‡†æµ‹è¯•æ¡†æ¶ï¼Œå¸®åŠ©å¼€å‘è€…é‡åŒ–å’Œæå‡æç¤ºè¯æ€§èƒ½ã€‚
*   **å¼€æºç¤¾åŒº**ï¼šå¦‚ Awesome Prompt Engineeringã€Prompt Engineering Guide ç­‰å¼€æºé¡¹ç›®ï¼Œæ±‡é›†äº†æœ€æ–°çš„ç ”ç©¶è¿›å±•ã€å·¥å…·å’Œå­¦ä¹ èµ„æºï¼Œæ˜¯æŒç»­å­¦ä¹ çš„é‡è¦é˜µåœ°ã€‚
*   **LLM è¶‹åŠ¿**ï¼šå„ç±»å·¥å…·å’Œæ¡†æ¶ç´§è·Ÿ LLM å‘å±•è¶‹åŠ¿ï¼Œä¾‹å¦‚å¯¹ RAG å’Œ Agent çš„æ”¯æŒï¼Œä»¥åŠå¯¹æç¤ºè¯å·¥ç¨‹è‡ªåŠ¨åŒ–å’Œè¯„ä¼°çš„é‡è§†ã€‚

---

## 9. æœ€ä½³å®è·µä¸è®¾è®¡æ¨¡å¼

### 7.1 æç¤ºè¯è®¾è®¡åŸåˆ™

#### 7.1.1 CLEAR åŸåˆ™

```
**C**oncise (ç®€æ´)
- å»é™¤å†—ä½™ä¿¡æ¯
- æ¯å¥è¯éƒ½æœ‰æ˜ç¡®ç›®çš„
- é¿å…é‡å¤è¡¨è¿°

**L**ucid (æ¸…æ™°)
- ä½¿ç”¨æ˜ç¡®çš„è¯­è¨€
- é¿å…æ­§ä¹‰å’Œæ¨¡ç³Šè¡¨è¾¾
- å®šä¹‰ä¸“ä¸šæœ¯è¯­

**E**xplicit (æ˜ç¡®)
- æ˜ç¡®è¾“å…¥è¾“å‡ºæ ¼å¼
- æŒ‡å®šçº¦æŸæ¡ä»¶
- è¯´æ˜è¯„ä¼°æ ‡å‡†

**A**ctionable (å¯æ‰§è¡Œ)
- æä¾›å…·ä½“æ­¥éª¤
- ç»™å‡ºå¯æ“ä½œçš„æŒ‡å¯¼
- åŒ…å«ç¤ºä¾‹è¯´æ˜

**R**elevant (ç›¸å…³)
- åªåŒ…å«å¿…è¦ä¿¡æ¯
- ç§»é™¤å¹²æ‰°å†…å®¹
- ä¿æŒä¸Šä¸‹æ–‡èšç„¦
```

#### 7.1.2 è®¾è®¡æ£€æŸ¥æ¸…å•

```
â–¡ è§’è‰²è®¾å®šæ¸…æ™°
â–¡ ä»»åŠ¡æè¿°æ˜ç¡®
â–¡ è¾“å…¥æ ¼å¼è¯´æ˜
â–¡ è¾“å‡ºæ ¼å¼çº¦æŸ
â–¡ ç¤ºä¾‹å……åˆ†ä¸”å¤šæ ·
â–¡ çº¦æŸæ¡ä»¶å®Œæ•´
â–¡ è¾¹ç•Œæƒ…å†µè¦†ç›–
â–¡ é”™è¯¯å¤„ç†è¯´æ˜
â–¡ éªŒè¯æ–¹æ³•æä¾›
â–¡ è¯­è¨€é£æ ¼ä¸€è‡´
```

### 7.2 å¸¸è§è®¾è®¡æ¨¡å¼

#### 7.2.1 æ¨¡æ¿æ¨¡å¼

```python
class PromptTemplate:
    def __init__(self, template, variables):
        self.template = template
        self.variables = variables

    def format(self, **kwargs):
        # éªŒè¯å˜é‡
        for var in self.variables:
            if var not in kwargs:
                raise ValueError(f"Missing variable: {var}")

        # å¡«å……æ¨¡æ¿
        return self.template.format(**kwargs)

# ä½¿ç”¨
template = PromptTemplate(
    template="åˆ†æä»¥ä¸‹{language}ä»£ç ï¼Œæ£€æŸ¥{aspect}",
    variables=["language", "aspect"]
)

prompt = template.format(language="Python", aspect="æ€§èƒ½")
```

#### 7.2.2 å·¥å‚æ¨¡å¼

```python
class PromptFactory:
    @staticmethod
    def create_code_review_prompt(language="Python"):
        if language == "Python":
            return """ä½ æ˜¯ä¸€ä½ Python ä»£ç å®¡æŸ¥ä¸“å®¶...
            æ£€æŸ¥ PEP 8 è§„èŒƒã€ç±»å‹æ³¨è§£ã€æ–‡æ¡£å­—ç¬¦ä¸²..."""
        elif language == "JavaScript":
            return """ä½ æ˜¯ä¸€ä½ JavaScript ä»£ç å®¡æŸ¥ä¸“å®¶...
            æ£€æŸ¥ ES6+ ç‰¹æ€§ã€å¼‚æ­¥æ¨¡å¼ã€é”™è¯¯å¤„ç†..."""

    @staticmethod
    def create_documentation_prompt(style="google"):
        if style == "google":
            return """ä½¿ç”¨ Google é£æ ¼çš„æ–‡æ¡£å­—ç¬¦ä¸²..."""
        elif style == "numpy":
            return """ä½¿ç”¨ NumPy é£æ ¼çš„æ–‡æ¡£å­—ç¬¦ä¸²..."""

# ä½¿ç”¨
prompt = PromptFactory.create_code_review_prompt("Python")
```

#### 7.2.3 è£…é¥°å™¨æ¨¡å¼

```python
def with_retry(max_retries=3):
    """è‡ªåŠ¨é‡è¯•è£…é¥°å™¨"""
    def decorator(prompt_func):
        def wrapper(*args, **kwargs):
            for attempt in range(max_retries):
                try:
                    return prompt_func(*args, **kwargs)
                except Exception as e:
                    if attempt == max_retries - 1:
                        raise
                    print(f"Retry {attempt + 1}/{max_retries}")
            return wrapper
        return decorator

@with_retry(max_retries=3)
def generate_code(prompt):
    return llm.generate(prompt)
```

### 7.3 æç¤ºè¯åº“ç»„ç»‡

#### 7.3.1 ç›®å½•ç»“æ„

```
prompts/
â”œâ”€â”€ basics/              # åŸºç¡€æç¤ºè¯
â”‚   â”œâ”€â”€ summarization.md
â”‚   â”œâ”€â”€ translation.md
â”‚   â””â”€â”€ classification.md
â”œâ”€â”€ code/               # ä»£ç ç›¸å…³
â”‚   â”œâ”€â”€ generation.md
â”‚   â”œâ”€â”€ review.md
â”‚   â”œâ”€â”€ debugging.md
â”‚   â””â”€â”€ refactoring.md
â”œâ”€â”€ reasoning/          # æ¨ç†ä»»åŠ¡
â”‚   â”œâ”€â”€ math.md
â”‚   â”œâ”€â”€ logic.md
â”‚   â””â”€â”€ planning.md
â”œâ”€â”€ creative/           # åˆ›æ„ä»»åŠ¡
â”‚   â”œâ”€â”€ writing.md
â”‚   â”œâ”€â”€ brainstorming.md
â”‚   â””â”€â”€ ideation.md
â””â”€â”€ meta/               # å…ƒæç¤ºè¯
    â”œâ”€â”€ optimization.md
    â””â”€â”€ evaluation.md
```

#### 7.3.2 æç¤ºè¯æ¨¡æ¿

**Markdown æ¨¡æ¿**ï¼š

```markdown
# æç¤ºè¯åç§°

## æè¿°
ç®€è¦è¯´æ˜è¿™ä¸ªæç¤ºè¯çš„ç”¨é€”

## å˜é‡
- `var1`: å˜é‡1çš„è¯´æ˜
- `var2`: å˜é‡2çš„è¯´æ˜

## æ¨¡æ¿
```

{var1}

è¯·å®Œæˆä»¥ä¸‹ä»»åŠ¡ï¼š
{var2}

è¾“å‡ºè¦æ±‚ï¼š

1. è¦æ±‚1
2. è¦æ±‚2
   
   ```
   
   ```

## ç¤ºä¾‹

**è¾“å…¥**ï¼š
var1 = "Python"
var2 = "å®ç°å¿«é€Ÿæ’åº"

**è¾“å‡º**ï¼š
(ç¤ºä¾‹è¾“å‡º)

## ç‰ˆæœ¬å†å²

- v1.0 (2025-01-15): åˆå§‹ç‰ˆæœ¬
- v1.1 (2025-01-20): æ·»åŠ ç±»å‹æ³¨è§£è¦æ±‚

## æ€§èƒ½

- å‡†ç¡®ç‡: 95%
- å¹³å‡ tokens: 500
- æˆæœ¬: $0.002/æ¬¡

## ç›¸å…³æç¤ºè¯

- [code/debugging.md](code/debugging.md)
- [code/refactoring.md](code/refactoring.md)
  
  ```
  
  ```

### 7.4 æµ‹è¯•ä¸éªŒè¯

#### 7.4.1 å•å…ƒæµ‹è¯•

```python
import pytest

class TestPrompts:
    def test_code_generation_prompt(self):
        prompt = load_prompt("code/generation.md")

        # æµ‹è¯•å˜é‡æ›¿æ¢
        formatted = prompt.format(
            language="Python",
            task="å®ç°äºŒåˆ†æŸ¥æ‰¾"
        )

        assert "Python" in formatted
        assert "äºŒåˆ†æŸ¥æ‰¾" in formatted

    def test_output_format(self):
        output = llm.generate(prompt)

        # éªŒè¯è¾“å‡ºæ ¼å¼
        assert "```python" in output
        assert "def " in output

    def test_functional_correctness(self):
        code = extract_code(output)

        # æ‰§è¡Œå¹¶æµ‹è¯•
        exec_result = exec_and_test(code, test_cases)
        assert exec_result["passed"]
```

#### 7.4.2 A/B æµ‹è¯•

```python
def ab_test_prompts(prompt_a, prompt_b, test_set):
    """
    å¯¹æ¯”ä¸¤ä¸ªæç¤ºè¯ç‰ˆæœ¬
    """
    results_a = []
    results_b = []

    for example in test_set:
        # ç‰ˆæœ¬ A
        output_a = llm.generate(prompt_a.format(**example))
        score_a = evaluate(output_a, example["expected"])
        results_a.append(score_a)

        # ç‰ˆæœ¬ B
        output_b = llm.generate(prompt_b.format(**example))
        score_b = evaluate(output_b, example["expected"])
        results_b.append(score_b)

    # ç»Ÿè®¡æ˜¾è‘—æ€§æ£€éªŒ
    from scipy import stats
    t_stat, p_value = stats.ttest_ind(results_a, results_b)

    return {
        "prompt_a": {
            "mean": np.mean(results_a),
            "std": np.std(results_a)
        },
        "prompt_b": {
            "mean": np.mean(results_b),
            "std": np.std(results_b)
        },
        "significance": p_value < 0.05
    }
```

#### æ ¸å¿ƒè¦ç‚¹

*   **æ¸…æ™°åŸåˆ™ï¼ˆCLEARï¼‰**ï¼šåœ¨è®¾è®¡æç¤ºè¯æ—¶åº”éµå¾ªç®€æ´ï¼ˆConciseï¼‰ã€æ¸…æ™°ï¼ˆLucidï¼‰ã€æ˜ç¡®ï¼ˆExplicitï¼‰ã€å¯æ‰§è¡Œï¼ˆActionableï¼‰ã€ç›¸å…³ï¼ˆRelevantï¼‰çš„åŸåˆ™ï¼Œç¡®ä¿æ¨¡å‹èƒ½å‡†ç¡®ç†è§£æ„å›¾ã€‚
*   **è®¾è®¡æ£€æŸ¥æ¸…å•**ï¼šåˆ©ç”¨æ£€æŸ¥æ¸…å•ç³»ç»Ÿæ€§åœ°è¯„ä¼°æç¤ºè¯çš„å®Œæ•´æ€§ï¼Œæ¶µç›–è§’è‰²è®¾å®šã€ä»»åŠ¡æè¿°ã€è¾“å…¥è¾“å‡ºæ ¼å¼ã€ç¤ºä¾‹ã€çº¦æŸæ¡ä»¶ç­‰å…³é”®è¦ç´ ã€‚
*   **è½¯ä»¶å·¥ç¨‹æ¨¡å¼**ï¼šå°†æ¨¡æ¿æ¨¡å¼ã€å·¥å‚æ¨¡å¼ã€è£…é¥°å™¨æ¨¡å¼ç­‰è½¯ä»¶å·¥ç¨‹è®¾è®¡æ¨¡å¼åº”ç”¨äºæç¤ºè¯ç®¡ç†ï¼Œå¯ä»¥æé«˜æç¤ºè¯çš„å¯é‡ç”¨æ€§ã€å¯ç»´æŠ¤æ€§å’Œçµæ´»æ€§ã€‚
*   **æç¤ºè¯åº“ç»„ç»‡**ï¼šå»ºç«‹ç»“æ„åŒ–çš„æç¤ºè¯åº“ï¼Œé€šè¿‡ç›®å½•åˆ†ç±»ã€æ ‡å‡†æ¨¡æ¿ã€ç‰ˆæœ¬å†å²ç­‰æ–¹å¼è¿›è¡Œç®¡ç†ï¼Œä¾¿äºå›¢é˜Ÿåä½œå’ŒçŸ¥è¯†å…±äº«ã€‚
*   **æµ‹è¯•ä¸éªŒè¯**ï¼šå¯¹æç¤ºè¯è¿›è¡Œå•å…ƒæµ‹è¯•å’Œ A/B æµ‹è¯•è‡³å…³é‡è¦ã€‚é€šè¿‡æµ‹è¯•éªŒè¯æç¤ºè¯çš„è¾“å‡ºæ ¼å¼ã€åŠŸèƒ½æ­£ç¡®æ€§ï¼Œå¹¶å¯¹æ¯”ä¸åŒç‰ˆæœ¬æç¤ºè¯çš„æ€§èƒ½ï¼Œç¡®ä¿å…¶åœ¨å„ç§åœºæ™¯ä¸‹çš„è¡¨ç°ã€‚
*   **ç³»ç»ŸåŒ–ç®¡ç†**ï¼šå°†æç¤ºè¯å·¥ç¨‹è§†ä¸ºä¸€ä¸ªç³»ç»ŸåŒ–çš„å·¥ç¨‹å®è·µï¼Œè€Œä¸æ˜¯ç®€å•çš„â€œè¯•é”™â€ï¼Œæœ‰åŠ©äºæ„å»ºæ›´å¯é ã€é«˜æ•ˆçš„ AI è¾…åŠ©ç³»ç»Ÿã€‚

---

## 8. ä»£ç ç”Ÿæˆä¸å®¡æŸ¥ä¸“é¡¹

### 8.1 ä»£ç ç”Ÿæˆæç¤ºè¯æ¨¡å¼

#### 8.1.1 ä»éœ€æ±‚åˆ°ä»£ç 

**éœ€æ±‚åˆ†æä¼˜å…ˆæç¤ºè¯**ï¼š

```
# è§’è‰²
ä½ æ˜¯èµ„æ·±æ¸¸æˆå¼€å‘å·¥ç¨‹å¸ˆã€‚

# éœ€æ±‚æè¿°
{åŠŸèƒ½éœ€æ±‚}

# åˆ†ææ­¥éª¤
1. éœ€æ±‚åˆ†æï¼šç†è§£æ ¸å¿ƒåŠŸèƒ½
2. è®¾è®¡å†³ç­–ï¼šç¡®å®šæ¶æ„æ¨¡å¼
3. æ•°æ®ç»“æ„ï¼šè®¾è®¡ç±»å’Œæ¥å£
4. å®ç°ç»†èŠ‚ï¼šå…³é”®ç®—æ³•

# è¾“å‡ºè¦æ±‚
- å®Œæ•´å¯è¿è¡Œçš„ä»£ç 
- å……åˆ†çš„æ³¨é‡Šè¯´æ˜
- ä½¿ç”¨ç¤ºä¾‹
- æµ‹è¯•ç”¨ä¾‹
```

**API è®¾è®¡ä¼˜å…ˆ**ï¼š

```
# å…ˆè®¾è®¡ APIï¼Œå†å®ç°

# ä»»åŠ¡
ä¸º {åŠŸèƒ½} è®¾è®¡æ¸…æ™°çš„ API

# è¦æ±‚
1. å…¬å…±æ¥å£å®šä¹‰æ¸…æ™°
2. å‘½åç¬¦åˆ Unity è§„èŒƒ
3. å‚æ•°è®¾è®¡åˆç†
4. è¿”å›å€¼æ˜ç¡®
5. å¼‚å¸¸å¤„ç†

# è¾“å‡º
- æ¥å£å®šä¹‰
- ä½¿ç”¨ç¤ºä¾‹
- å®ç°ä»£ç 
```

**æµ‹è¯•é©±åŠ¨ç”Ÿæˆ**ï¼š

```
# TDD æ–¹å¼ç”Ÿæˆä»£ç 

# åŠŸèƒ½éœ€æ±‚
{éœ€æ±‚æè¿°}

# å…ˆç”Ÿæˆæµ‹è¯•
1. æ­£å¸¸æƒ…å†µæµ‹è¯•
2. è¾¹ç•Œæ¡ä»¶æµ‹è¯•
3. å¼‚å¸¸æƒ…å†µæµ‹è¯•

# å†ç”Ÿæˆå®ç°
- é€šè¿‡æ‰€æœ‰æµ‹è¯•
- ä»£ç ç®€æ´é«˜æ•ˆ
```

#### 8.1.2 ä»£ç è¡¥å…¨ä¸ç»­å†™

**ä¸Šä¸‹æ–‡æ„ŸçŸ¥è¡¥å…¨**ï¼š

```
# è¡¥å…¨ä»£ç 

# å·²æœ‰ä»£ç 
{ç°æœ‰ä»£ç ä¸Šä¸‹æ–‡}

# ä»»åŠ¡
è¡¥å…¨ {æ–¹æ³•/ç±»} çš„å®ç°

# è¦æ±‚
- éµå¾ªç°æœ‰ä»£ç é£æ ¼
- ç¬¦åˆé¡¹ç›®æ¶æ„
- æ€§èƒ½ä¼˜åŒ–
```

**å‡½æ•°ä½“ç”Ÿæˆ**ï¼š

```
# ç”Ÿæˆå‡½æ•°å®ç°

# å‡½æ•°ç­¾å
{å‡½æ•°å£°æ˜}

# åŠŸèƒ½è¯´æ˜
{åŠŸèƒ½æè¿°}

# è¾“å‡ºå®Œæ•´å®ç°
- åŒ…å«é”™è¯¯å¤„ç†
- æ·»åŠ æ€§èƒ½æ³¨é‡Š
- è€ƒè™‘è¾¹ç•Œæƒ…å†µ
```

#### 8.1.3 è·¨è¯­è¨€ä»£ç è½¬æ¢

**C# â†” TypeScript è½¬æ¢**ï¼š

```
# Unity C# è½¬ Cocos TypeScript
å°†ä»¥ä¸‹ C# ä»£ç è½¬æ¢ä¸º TypeScriptï¼š

{C# ä»£ç }

# è½¬æ¢è§„åˆ™
1. ç±»å‹æ˜ å°„ï¼ˆint â†’ number, List â†’ Arrayï¼‰
2. å‘½åè§„èŒƒï¼ˆPascalCase â†’ camelCaseï¼‰
3. è£…é¥°å™¨ï¼ˆ[SerializeField] â†’ @propertyï¼‰
4. ç”Ÿå‘½å‘¨æœŸæ–¹æ³•

# è¾“å‡º
```typescript
// è½¬æ¢åçš„ä»£ç 
```

```
**ä¼ªä»£ç åˆ°å®ç°ä»£ç **ï¼š
```

# å°†ä¼ªä»£ç è½¬æ¢ä¸ºå…·ä½“å®ç°

# ä¼ªä»£ç 

{ä¼ªä»£ç æè¿°}

# ç›®æ ‡è¯­è¨€

Unity C# / Cocos TS / UE C++

# è¾“å‡º

å®Œæ•´å¯è¿è¡Œçš„å®ç°ä»£ç 

```
---

### 8.2 ä»£ç å®¡æŸ¥æç¤ºè¯æ¨¡å¼

#### 8.2.1 é™æ€åˆ†æè¾…åŠ©

**æ½œåœ¨ Bug æ£€æµ‹**ï¼š
```

# ä»£ç  Bug åˆ†æ

å®¡æŸ¥ä»¥ä¸‹ä»£ç çš„æ½œåœ¨ Bugï¼š

{ä»£ç ç‰‡æ®µ}

# æ£€æŸ¥é¡¹

1. ç©ºå¼•ç”¨é£é™©
2. æ•°ç»„è¶Šç•Œ
3. é™¤é›¶é”™è¯¯
4. ç±»å‹è½¬æ¢é”™è¯¯
5. å¹¶å‘é—®é¢˜
6. èµ„æºæ³„æ¼

# è¾“å‡ºæ ¼å¼

## å‘ç°çš„é—®é¢˜

### [ä¸¥é‡ç¨‹åº¦] é—®é¢˜æè¿°

- ä½ç½®ï¼š[æ–‡ä»¶:è¡Œå·]
- åŸå› ï¼š[åˆ†æ]
- ä¿®å¤ï¼š[å»ºè®®ä»£ç ]
  
  ```
  
  ```

**æ€§èƒ½é—®é¢˜è¯†åˆ«**ï¼š

```
# Unity æ€§èƒ½åˆ†æ
åˆ†æä»¥ä¸‹ä»£ç çš„æ€§èƒ½é—®é¢˜ï¼š

{ä»£ç ç‰‡æ®µ}

# æ£€æŸ¥é¡¹
1. æ¯å¸§ GC åˆ†é…
2. ç¼“å­˜çš„ç¼ºå¤±é¡¹
3. é«˜é¢‘è°ƒç”¨ä¼˜åŒ–
4. åç¨‹ä½¿ç”¨
5. LINQ æ€§èƒ½

# è¾“å‡º
## æ€§èƒ½é—®é¢˜
| é—®é¢˜ | ä¸¥é‡ç¨‹åº¦ | ä¼˜åŒ–å»ºè®® |
|------|---------|---------|
| ... | ... | ... |
```

#### 8.2.2 ä»£ç é£æ ¼å®¡æŸ¥

**Unity å‘½åè§„èŒƒæ£€æŸ¥**ï¼š

```
# ä»£ç é£æ ¼æ£€æŸ¥
æ£€æŸ¥ä»£ç æ˜¯å¦ç¬¦åˆ Unity è§„èŒƒï¼š

{ä»£ç ç‰‡æ®µ}

# æ£€æŸ¥é¡¹
1. Public æ–¹æ³•ï¼šPascalCase
2. Private å­—æ®µï¼š_camelCase
3. Public å­—æ®µï¼šPascalCase
4. å¸¸é‡ï¼šUPPER_SNAKE_CASE
5. åç¨‹ï¼šæ–¹æ³•ååŠ  Coroutine åç¼€

# è¾“å‡º
## é£æ ¼é—®é¢˜
- [è¡Œå·]: [é—®é¢˜] â†’ å»ºè®®ä¿®æ”¹ä¸º [æ­£ç¡®å†™æ³•]
```

**ä»£ç æ ¼å¼åŒ–å»ºè®®**ï¼š

```
# ä»£ç æ ¼å¼å»ºè®®
æä¾›ä»£ç æ ¼å¼åŒ–å»ºè®®ï¼š

{ä»£ç ç‰‡æ®µ}

# åˆ†æ
1. ç¼©è¿›ä¸€è‡´æ€§
2. ç©ºè¡Œä½¿ç”¨
3. æ‹¬å·é£æ ¼
4. è¡Œé•¿åº¦
5. æ³¨é‡Šè§„èŒƒ

# è¾“å‡ºæ ¼å¼åŒ–åçš„ä»£ç 
```csharp
// æ ¼å¼åŒ–åçš„ä»£ç 
```

```
#### 8.2.3 æ¶æ„å±‚é¢å®¡æŸ¥

**è®¾è®¡æ¨¡å¼è¯†åˆ«**ï¼š
```

# è¯†åˆ«ä½¿ç”¨çš„è®¾è®¡æ¨¡å¼

åˆ†æä»£ç ä½¿ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼š

{ä»£ç ç‰‡æ®µ}

# å¸¸è§æ¨¡å¼

- å•ä¾‹æ¨¡å¼
- è§‚å¯Ÿè€…æ¨¡å¼
- å·¥å‚æ¨¡å¼
- ç­–ç•¥æ¨¡å¼
- å¯¹è±¡æ± æ¨¡å¼

# è¾“å‡º

## è®¾è®¡æ¨¡å¼åˆ†æ

- æ¨¡å¼ï¼š[æ¨¡å¼åç§°]
- å®ç°ï¼š[å¦‚ä½•å®ç°]
- è¯„ä»·ï¼š[ä¼˜ç¼ºç‚¹]
  
  ```
  
  ```

**SOLID åŸåˆ™æ£€æŸ¥**ï¼š

```
# SOLID åŸåˆ™æ£€æŸ¥
æ£€æŸ¥ä»£ç æ˜¯å¦ç¬¦åˆ SOLID åŸåˆ™ï¼š

{ä»£ç ç‰‡æ®µ}

# æ£€æŸ¥é¡¹
- **S**ingle Responsibilityï¼šå•ä¸€èŒè´£
- **O**pen/Closedï¼šå¼€é—­åŸåˆ™
- **L**iskov Substitutionï¼šé‡Œæ°æ›¿æ¢
- **I**nterface Segregationï¼šæ¥å£éš”ç¦»
- **D**ependency Inversionï¼šä¾èµ–å€’ç½®

# è¾“å‡º
## SOLID è¿åé¡¹
- åŸåˆ™ï¼š[è¿åçš„åŸåˆ™]
- é—®é¢˜ï¼š[æè¿°]
- é‡æ„ï¼š[å»ºè®®]
```

**ä¾èµ–å…³ç³»åˆ†æ**ï¼š

```
# ä¾èµ–å…³ç³»åˆ†æ
åˆ†æä»£ç çš„ä¾èµ–å…³ç³»ï¼š

{ä»£ç ç‰‡æ®µ}

# æ£€æŸ¥é¡¹
1. å¾ªç¯ä¾èµ–
2. ç´§è€¦åˆ
3. ä¾èµ–å€’ç½®
4. æ¥å£ä¾èµ–
5. æ¨¡å—åŒ–ç¨‹åº¦

# è¾“å‡º
## ä¾èµ–å…³ç³»å›¾
```

ClassA â†’ ClassB â†’ ClassC
    â†“       â†“
  ClassD  ClassE

```
## é—®é¢˜
- ClassA å’Œ ClassC å­˜åœ¨å¾ªç¯ä¾èµ–
- ClassB ä¾èµ–å…·ä½“å®ç°è€Œéæ¥å£
```

---

### 8.3 è°ƒè¯•ä¸ä¿®å¤æç¤ºè¯æ¨¡å¼

#### 8.3.1 é”™è¯¯è¯Šæ–­

**å †æ ˆè·Ÿè¸ªåˆ†æ**ï¼š

```
# å †æ ˆè·Ÿè¸ªåˆ†æ
åˆ†æä»¥ä¸‹é”™è¯¯å †æ ˆï¼š

{å †æ ˆè·Ÿè¸ª}

# åˆ†æå†…å®¹
1. é”™è¯¯ç±»å‹å’Œæ¶ˆæ¯
2. è§¦å‘ä½ç½®
3. è°ƒç”¨é“¾è·¯
4. æ ¹æœ¬åŸå› 

# è¾“å‡º
## é”™è¯¯åˆ†æ
### é”™è¯¯ç±»å‹
[é”™è¯¯ç±»å‹]: [é”™è¯¯æè¿°]

### è§¦å‘ä½ç½®
æ–‡ä»¶ï¼š[æ–‡ä»¶å]:[è¡Œå·]
æ–¹æ³•ï¼š[æ–¹æ³•å]

### è°ƒç”¨é“¾
[æ–¹æ³•1] â†’ [æ–¹æ³•2] â†’ [æ–¹æ³•3]

### æ ¹æœ¬åŸå› 
[åŸå› åˆ†æ]

### ä¿®å¤å»ºè®®
```csharp
// ä¿®å¤ä»£ç 
```

```
**æ—¥å¿—è§£è¯»**ï¼š
```

# Unity æ—¥å¿—åˆ†æ

åˆ†æä»¥ä¸‹æ—¥å¿—ä¿¡æ¯ï¼š

{æ—¥å¿—å†…å®¹}

# åˆ†æ

1. æ—¥å¿—çº§åˆ«ï¼ˆError/Warning/Infoï¼‰
2. æ—¶é—´é¡ºåº
3. å…³è”äº‹ä»¶
4. é”™è¯¯æ¨¡å¼

# è¾“å‡º

## æ—¥å¿—åˆ†ææŠ¥å‘Š

### æ—¶é—´çº¿

[æ—¶é—´] [çº§åˆ«] [æ¶ˆæ¯]

### é—®é¢˜è¯†åˆ«

- [é—®é¢˜1]
- [é—®é¢˜2]

### å»ºè®®

[ä¿®å¤å»ºè®®]

```
**æ ¹å› åˆ†æ**ï¼š
```

# æ ¹æœ¬åŸå› åˆ†æ

å¯¹ä»¥ä¸‹ Bug è¿›è¡Œæ ¹å› åˆ†æï¼š

Bug æè¿°ï¼š{Bug æè¿°}
å¤ç°æ­¥éª¤ï¼š{å¤ç°æ­¥éª¤}

# åˆ†ææ¡†æ¶ï¼ˆ5 Whysï¼‰

1. ä¸ºä»€ä¹ˆä¼šå‘ç”Ÿï¼Ÿ
2. ä¸ºä»€ä¹ˆä¼šå¯¼è‡´è¿™ä¸ªï¼Ÿ
3. ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ
4. ä¸ºä»€ä¹ˆ...ï¼Ÿ
5. æ ¹æœ¬åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ

# è¾“å‡º

## æ ¹å› åˆ†æ

### ç›´æ¥åŸå› 

[æè¿°]

### æ ¹æœ¬åŸå› 

[5ä¸ªä¸ºä»€ä¹ˆåˆ†æ]

### æ°¸ä¹…ä¿®å¤æ–¹æ¡ˆ

```csharp
// ä¿®å¤ä»£ç 
```

```
#### 8.3.2 ä¿®å¤å»ºè®®ç”Ÿæˆ

**Bug ä¿®å¤æ–¹æ¡ˆ**ï¼š
```

# Bug ä¿®å¤å»ºè®®

ä¸ºä»¥ä¸‹ Bug æä¾›ä¿®å¤æ–¹æ¡ˆï¼š

Bugï¼š{Bug æè¿°}
ä»£ç ï¼š{é—®é¢˜ä»£ç }

# ä¿®å¤è¦æ±‚

1. æœ€å°æ”¹åŠ¨
2. ä¸å¼•å…¥æ–°é—®é¢˜
3. è€ƒè™‘è¾¹ç•Œæƒ…å†µ
4. æ·»åŠ é˜²æŠ¤ä»£ç 

# è¾“å‡º

## ä¿®å¤æ–¹æ¡ˆ

### é—®é¢˜åˆ†æ

[åŸå› ]

### ä¿®å¤ä»£ç 

```csharp
// ä¿®å¤åçš„ä»£ç 
```

### éªŒè¯

[æµ‹è¯•æ–¹æ³•]

```
**å›å½’æµ‹è¯•ç”Ÿæˆ**ï¼š
```

# ç”Ÿæˆå›å½’æµ‹è¯•

ä¸ºä»¥ä¸‹ä¿®å¤ç”Ÿæˆå›å½’æµ‹è¯•ï¼š

ä¿®å¤ï¼š{ä¿®å¤æè¿°}
ä»£ç ï¼š{ä¿®å¤ä»£ç }

# æµ‹è¯•è¦†ç›–

1. åŸé—®é¢˜åœºæ™¯
2. ç›¸å…³åŠŸèƒ½åœºæ™¯
3. è¾¹ç•Œæ¡ä»¶
4. å‹åŠ›æµ‹è¯•

# è¾“å‡º

## å›å½’æµ‹è¯•ç”¨ä¾‹

### æµ‹è¯• 1ï¼šåŸé—®é¢˜å¤ç°

- æ­¥éª¤ï¼š
- é¢„æœŸï¼š
- å®é™…ï¼š

### æµ‹è¯• 2ï¼šæ­£å¸¸åœºæ™¯

...

## è‡ªåŠ¨åŒ–æµ‹è¯•ä»£ç 

```csharp
// æµ‹è¯•ä»£ç 
```

```
**é˜²å¾¡æ€§ç¼–ç¨‹å»ºè®®**ï¼š
```

# é˜²å¾¡æ€§ç¼–ç¨‹æ”¹è¿›

ä¸ºä»¥ä¸‹ä»£ç æ·»åŠ é˜²å¾¡æ€§ç¼–ç¨‹ï¼š

{ä»£ç ç‰‡æ®µ}

# æ·»åŠ é¡¹

1. å‚æ•°éªŒè¯
2. ç©ºå€¼æ£€æŸ¥
3. å¼‚å¸¸å¤„ç†
4. æ–­è¨€
5. æ—¥å¿—è®°å½•

# è¾“å‡º

```csharp
// æ”¹è¿›åçš„ä»£ç 
public void SomeMethod(InputData data) {
    // å‚æ•°éªŒè¯
    if (data == null) {
        Debug.LogError("data cannot be null");
        return;
    }

    // ç©ºå€¼æ£€æŸ¥
    if (string.IsNullOrEmpty(data.name)) {
        return;
    }

    // å¼‚å¸¸å¤„ç†
    try {
        // æ ¸å¿ƒé€»è¾‘
    } catch (Exception e) {
        Debug.LogError($"Error: {e.Message}");
    }
}
```

```
---

### 8.4 é‡æ„æç¤ºè¯æ¨¡å¼

#### 8.4.1 ä»£ç å¼‚å‘³è¯†åˆ«

**é•¿æ–¹æ³•æ‹†åˆ†**ï¼š
```

# è¯†åˆ«é•¿æ–¹æ³•

åˆ†æä»¥ä¸‹ä»£ç æ˜¯å¦éœ€è¦æ‹†åˆ†ï¼š

{ä»£ç ç‰‡æ®µ}

# æ£€æŸ¥é¡¹

1. æ–¹æ³•é•¿åº¦ï¼ˆè¡Œæ•°ï¼‰
2. åœˆå¤æ‚åº¦
3. èŒè´£æ•°é‡
4. åµŒå¥—å±‚æ¬¡

# è¾“å‡º

## é‡æ„å»ºè®®

### é—®é¢˜

æ–¹æ³• [æ–¹æ³•å] è¿‡é•¿ï¼ˆXX è¡Œï¼‰ï¼Œå¤æ‚åº¦ XX

### æ‹†åˆ†æ–¹æ¡ˆ

- Extract Method: [æå–çš„æ–¹æ³•]
- å»ºè®®åç§°ï¼š[æ–¹æ³•ååˆ—è¡¨]

### é‡æ„åä»£ç 

```csharp
// é‡æ„åçš„ä»£ç 
```

```
**é‡å¤ä»£ç æå–**ï¼š
```

# é‡å¤ä»£ç æ£€æµ‹

æ£€æµ‹ä»¥ä¸‹ä»£ç ä¸­çš„é‡å¤ï¼š

{å¤šä¸ªä»£ç ç‰‡æ®µ}

# åˆ†æ

1. å®Œå…¨é‡å¤çš„ä»£ç 
2. ç»“æ„ç›¸ä¼¼çš„ä»£ç 
3. å¯ä»¥å‚æ•°åŒ–çš„éƒ¨åˆ†

# è¾“å‡º

## é‡å¤ä»£ç æŠ¥å‘Š

### é‡å¤ç‰‡æ®µ

å‡ºç°åœ¨ï¼š[ä½ç½®åˆ—è¡¨]

### æå–æ–¹æ¡ˆ

```csharp
// æå–çš„é€šç”¨æ–¹æ³•
private void CommonMethod(params) {
    // é€šç”¨å®ç°
}
```

### ä½¿ç”¨

```csharp
// æ›¿æ¢åçš„è°ƒç”¨
CommonMethod(args1);
CommonMethod(args2);
```

```
**å¤æ‚åº¦é™ä½**ï¼š
```

# é™ä½å¤æ‚åº¦

åˆ†æå¹¶é™ä½ä»£ç å¤æ‚åº¦ï¼š

{ä»£ç ç‰‡æ®µ}

# å¤æ‚åº¦åˆ†æ

- åœˆå¤æ‚åº¦ï¼šXX
- åµŒå¥—æ·±åº¦ï¼šXX
- è®¤çŸ¥å¤æ‚åº¦ï¼šXX

# é‡æ„æŠ€æœ¯

1. æå–æ–¹æ³•
2. æå‰è¿”å›
3. æ¡ä»¶åˆå¹¶
4. ç­–ç•¥æ¨¡å¼
5. çŠ¶æ€æ¨¡å¼

# è¾“å‡º

## é‡æ„æ–¹æ¡ˆ

### å½“å‰å¤æ‚åº¦

XXï¼ˆè¿‡é«˜ï¼‰

### é‡æ„æ–¹æ³•

ä½¿ç”¨ [æŠ€æœ¯åç§°]

### é‡æ„åä»£ç 

```csharp
// é‡æ„åçš„ä»£ç 
// å¤æ‚åº¦é™ä½åˆ° XX
```

```
#### 8.4.2 é‡æ„æ–¹æ¡ˆç”Ÿæˆ

**æå–æ–¹æ³•/ç±»**ï¼š
```

# é‡æ„ï¼šæå–æ–¹æ³•/ç±»

ä¸ºä»¥ä¸‹ä»£ç ç”Ÿæˆæå–æ–¹æ³•/ç±»çš„é‡æ„æ–¹æ¡ˆï¼š

{ä»£ç ç‰‡æ®µ}

# åˆ†æ

1. å¯æå–çš„åŠŸèƒ½å•å…ƒ
2. ä¾èµ–å…³ç³»
3. æ¥å£è®¾è®¡

# è¾“å‡º

## æå–æ–¹æ¡ˆ

### æå–çš„æ–¹æ³•

```csharp
// æ–°æ–¹æ³•
private ReturnType ExtractedMethod(Parameters) {
    // å®ç°
}
```

### åŸä»£ç é‡æ„å

```csharp
// é‡æ„åçš„åŸä»£ç 
public void OriginalMethod() {
    // è°ƒç”¨æå–çš„æ–¹æ³•
    var result = ExtractedMethod(args);
}
```

```
**å¼•å…¥è®¾è®¡æ¨¡å¼**ï¼š
```

# å¼•å…¥è®¾è®¡æ¨¡å¼é‡æ„

ä¸ºä»¥ä¸‹ä»£ç å¼•å…¥åˆé€‚çš„è®¾è®¡æ¨¡å¼ï¼š

{ä»£ç ç‰‡æ®µ}

# æ¨¡å¼æ¨è

æ ¹æ®ä»£ç ç‰¹å¾æ¨èï¼š

- å¤§é‡ if-else â†’ ç­–ç•¥æ¨¡å¼
- çŠ¶æ€åˆ‡æ¢ â†’ çŠ¶æ€æ¨¡å¼
- å¯¹è±¡åˆ›å»º â†’ å·¥å‚æ¨¡å¼
- é€šçŸ¥æœºåˆ¶ â†’ è§‚å¯Ÿè€…æ¨¡å¼

# è¾“å‡º

## æ¨èæ¨¡å¼ï¼š[æ¨¡å¼åç§°]

### é—®é¢˜

å½“å‰ä»£ç çš„ [é—®é¢˜]

### æ¨¡å¼åº”ç”¨

```csharp
// åº”ç”¨è®¾è®¡æ¨¡å¼åçš„ä»£ç 
```

### ä¼˜åŠ¿

- [ä¼˜åŠ¿1]
- [ä¼˜åŠ¿2]
  
  ```
  
  ```

**ä¼˜åŒ–æ•°æ®ç»“æ„**ï¼š

```
# æ•°æ®ç»“æ„ä¼˜åŒ–
ä¼˜åŒ–ä»¥ä¸‹æ•°æ®ç»“æ„çš„ä½¿ç”¨ï¼š

{ä»£ç ç‰‡æ®µ}

# åˆ†æ
1. å½“å‰æ•°æ®ç»“æ„
2. æ€§èƒ½ç“¶é¢ˆ
3. æ›´å¥½çš„é€‰æ‹©

# æ¨è
- List â†’ Dictionaryï¼ˆO(n) â†’ O(1)ï¼‰
- æ•°ç»„ â†’ Listï¼ˆçµæ´»æ€§ï¼‰
- ç±» â†’ structï¼ˆå€¼ç±»å‹ä¼˜åŒ–ï¼‰
- string â†’ StringBuilderï¼ˆå­—ç¬¦ä¸²æ‹¼æ¥ï¼‰

# è¾“å‡º
## ä¼˜åŒ–æ–¹æ¡ˆ

### å½“å‰æ•°æ®ç»“æ„
[ç±»å‹]: [æ€§èƒ½åˆ†æ]

### ä¼˜åŒ–å
```csharp
// ä½¿ç”¨æ›´å¥½çš„æ•°æ®ç»“æ„
private Dictionary<int, Item> itemLookup;
```

### æ€§èƒ½å¯¹æ¯”

- æŸ¥æ‰¾ï¼šO(n) â†’ O(1)
- æ’å…¥ï¼šO(1) â†’ O(1)
- åˆ é™¤ï¼šO(n) â†’ O(1)
  
  ```
  
  ```

#### æ ¸å¿ƒè¦ç‚¹

*   **å…¨ç”Ÿå‘½å‘¨æœŸè¦†ç›–**ï¼šæç¤ºè¯å·¥ç¨‹ä¸ä»…èƒ½ç”¨äºä»£ç ç”Ÿæˆï¼Œè¿˜èƒ½æ·±å…¥åˆ°ä»£ç å®¡æŸ¥ã€è°ƒè¯•ä¿®å¤å’Œé‡æ„ç­‰è½¯ä»¶å¼€å‘çš„æ ¸å¿ƒç¯èŠ‚ï¼Œå½¢æˆ AI è¾…åŠ©å¼€å‘çš„é—­ç¯ã€‚
*   **ä»£ç ç”Ÿæˆç­–ç•¥å¤šæ ·**ï¼šå¯æ ¹æ®éœ€æ±‚ï¼ˆåŠŸèƒ½éœ€æ±‚ã€API æ¥å£ã€æµ‹è¯•é©±åŠ¨ï¼‰æˆ–åœºæ™¯ï¼ˆä»£ç è¡¥å…¨ã€å‡½æ•°ä½“ç”Ÿæˆã€è·¨è¯­è¨€è½¬æ¢ï¼‰é€‰æ‹©åˆé€‚çš„ç”Ÿæˆç­–ç•¥ï¼Œæé«˜ä»£ç ç”Ÿæˆæ•ˆç‡å’Œè´¨é‡ã€‚
*   **AI è¾…åŠ©å®¡æŸ¥é«˜æ•ˆ**ï¼šé€šè¿‡è®¾è®¡ä¸“é¡¹æç¤ºè¯ï¼ŒLLM èƒ½è¿›è¡Œé™æ€ä»£ç åˆ†æï¼ˆBugã€æ€§èƒ½ã€é£æ ¼ï¼‰ã€æ¶æ„å±‚é¢æ£€æŸ¥ï¼ˆè®¾è®¡æ¨¡å¼ã€SOLID åŸåˆ™ã€ä¾èµ–å…³ç³»ï¼‰ï¼Œæ˜¾è‘—æå‡ä»£ç å®¡æŸ¥çš„è¦†ç›–é¢å’Œæ•ˆç‡ã€‚
*   **æ™ºèƒ½åŒ–è°ƒè¯•ä¸ä¿®å¤**ï¼šLLM èƒ½å¤Ÿåˆ†æå †æ ˆè·Ÿè¸ªå’Œæ—¥å¿—ï¼Œè¾…åŠ©è¿›è¡Œé”™è¯¯è¯Šæ–­å’Œæ ¹å› åˆ†æï¼Œå¹¶ç”Ÿæˆä¿®å¤å»ºè®®å’Œå›å½’æµ‹è¯•ç”¨ä¾‹ï¼ŒåŠ é€Ÿ Bug ä¿®å¤æµç¨‹ã€‚
*   **é‡æ„åˆ©å™¨**ï¼šæç¤ºè¯å·¥ç¨‹å¯ä»¥å¸®åŠ©è¯†åˆ«ä»£ç å¼‚å‘³ï¼ˆå¦‚é•¿æ–¹æ³•ã€é‡å¤ä»£ç ï¼‰ï¼Œç”Ÿæˆé‡æ„æ–¹æ¡ˆï¼ˆå¦‚æå–æ–¹æ³•/ç±»ã€å¼•å…¥è®¾è®¡æ¨¡å¼ã€ä¼˜åŒ–æ•°æ®ç»“æ„ï¼‰ï¼Œä»è€ŒæŒç»­æå‡ä»£ç è´¨é‡å’Œå¯ç»´æŠ¤æ€§ã€‚
*   **æ¸¸æˆå¼€å‘é€‚é…**ï¼šè¿™äº›ä»£ç ç”Ÿæˆä¸å®¡æŸ¥çš„æ¨¡å¼å¯é«˜åº¦å®šåˆ¶åŒ–ä»¥é€‚é…æ¸¸æˆå¼•æ“ç‰¹æ€§ã€é¡¹ç›®è§„èŒƒå’Œæ€§èƒ½è¦æ±‚ï¼Œæ˜¯æ¸¸æˆå®¢æˆ·ç«¯å¼€å‘è€…çš„å¼ºå¤§å·¥å…·ã€‚

---
private Dictionary<int, Item> itemLookup;
```

### æ€§èƒ½å¯¹æ¯”

- æŸ¥æ‰¾ï¼šO(n) â†’ O(1)
- æ’å…¥ï¼šO(1) â†’ O(1)
- åˆ é™¤ï¼šO(n) â†’ O(1)
  
  ```
  
  ```

---

## 10. æœªæ¥è¶‹åŠ¿ä¸å‘å±•æ–¹å‘

### 8.1 è‡ªé€‚åº”æç¤ºè¯

**æ¦‚å¿µ**ï¼šæ ¹æ®è¾“å…¥åŠ¨æ€è°ƒæ•´æç¤ºè¯

```python
class AdaptivePrompt:
    def __init__(self):
        self.prompt_variants = {
            "simple": "ç®€å•ä»»åŠ¡æç¤ºè¯",
            "complex": "å¤æ‚ä»»åŠ¡æç¤ºè¯",
            "creative": "åˆ›æ„ä»»åŠ¡æç¤ºè¯"
        }

    def select_prompt(self, input_text):
        # åˆ†æè¾“å…¥å¤æ‚åº¦
        complexity = analyze_complexity(input_text)

        # é€‰æ‹©åˆé€‚çš„æç¤ºè¯
        if complexity < 0.3:
            return self.prompt_variants["simple"]
        elif complexity < 0.7:
            return self.prompt_variants["complex"]
        else:
            return self.prompt_variants["creative"]
```

### 8.2 å¤šæ¨¡æ€æç¤ºè¯

**æ–‡æœ¬ + å›¾åƒ**ï¼š

```
[Image: ä¸€ä¸ªåŒ…å«å¤šä¸ªæ°´æœçš„ç…§ç‰‡]

è¯·æè¿°å›¾ç‰‡ä¸­çš„æ°´æœï¼Œå¹¶æŒ‰è¥å…»ä»·å€¼æ’åºã€‚
```

**è§†é¢‘ç†è§£**ï¼š

```
[Video: çƒ¹é¥ªæ•™ç¨‹è§†é¢‘]

è¯·æ€»ç»“è¿™ä¸ªè§†é¢‘ä¸­çš„çƒ¹é¥ªæ­¥éª¤ï¼Œ
å¹¶åˆ—å‡ºæ‰€éœ€é£Ÿæã€‚
```

### 8.3 äº¤äº’å¼æç¤ºè¯ç³»ç»Ÿ

```python
class InteractivePromptSystem:
    def __init__(self):
        self.context = []
        self.user_preferences = {}

    def chat(self, user_input):
        # åˆ†æç”¨æˆ·æ„å›¾
        intent = classify_intent(user_input)

        # åŠ¨æ€è°ƒæ•´æç¤ºè¯
        if intent == "clarification":
            prompt = self.generate_clarification_prompt()
        elif intent == "task":
            prompt = self.generate_task_prompt(user_input)

        # è®°å½•ä¸Šä¸‹æ–‡
        self.context.append((user_input, intent))

        # ç”Ÿæˆå›å¤
        response = llm.generate(prompt)
        return response

    def learn_preferences(self, feedback):
        """ä»ç”¨æˆ·åé¦ˆä¸­å­¦ä¹ """
        self.user_preferences.update(feedback)
```

### 8.4 è‡ªåŠ¨æç¤ºè¯å·¥ç¨‹ï¼ˆAPEï¼‰

**Auto Prompt Engineer**ï¼š

```python
def auto_prompt_engineering(task_description, example_pool):
    """
    è‡ªåŠ¨ç”Ÿæˆå’Œä¼˜åŒ–æç¤ºè¯
    """
    # 1. ç”Ÿæˆå€™é€‰æç¤ºè¯
    llm_for_meta = LLM(model="gpt-4")

    candidates = []
    for i in range(10):
        candidate = llm_for_meta.generate(
            f"ç”Ÿæˆä¸€ä¸ªæç¤ºè¯æ¥å®Œæˆæ­¤ä»»åŠ¡: {task_description}\n"
            f"æç¤ºè¯ {i+1}:"
        )
        candidates.append(candidate)

    # 2. è¯„ä¼°æ¯ä¸ªå€™é€‰
    scores = []
    for candidate in candidates:
        score = evaluate_prompt(candidate, example_pool)
        scores.append((candidate, score))

    # 3. é€‰æ‹©æœ€ä½³
    best_prompt = max(scores, key=lambda x: x[1])[0]

    # 4. è¿­ä»£ä¼˜åŒ–
    for iteration in range(5):
        # åŸºäºé”™è¯¯æ¡ˆä¾‹ç”Ÿæˆæ”¹è¿›
        failures = collect_failures(best_prompt, example_pool)
        improvement = llm_for_meta.generate(
            f"å½“å‰æç¤ºè¯:\n{best_prompt}\n\n"
            f"å¤±è´¥æ¡ˆä¾‹:\n{failures}\n\n"
            f"æä¾›æ”¹è¿›çš„æç¤ºè¯:"
        )

        # è¯„ä¼°æ”¹è¿›ç‰ˆæœ¬
        new_score = evaluate_prompt(improvement, example_pool)
        old_score = evaluate_prompt(best_prompt, example_pool)

        if new_score > old_score:
            best_prompt = improvement

    return best_prompt
```

### 8.5 å°æ¨¡å‹ + å¼ºæç¤ºè¯

**è¶‹åŠ¿**ï¼šç”¨æç¤ºè¯è¡¥å¿æ¨¡å‹èƒ½åŠ›

```
å°æ¨¡å‹ (1B-3B å‚æ•°) + ç²¾å¿ƒè®¾è®¡çš„æç¤ºè¯
    â‰ˆ
å¤§æ¨¡å‹ (175B å‚æ•°) + ç®€å•æç¤ºè¯

ä¼˜åŠ¿ï¼š
- æˆæœ¬é™ä½ 10-100 å€
- å»¶è¿Ÿé™ä½ 5-10 å€
- éƒ¨ç½²æ›´ç®€å•
```

**ç¤ºä¾‹**ï¼š

```python
# ä½¿ç”¨ 3B æ¨¡å‹ + CoT
small_model = LLM(model="phi-3-mini")

prompt = """
è®©æˆ‘ä»¬ä¸€æ­¥æ­¥æ€è€ƒï¼š
1. ç†è§£é—®é¢˜
2. åˆ†ææ–¹æ¡ˆ
3. æ‰§è¡Œæ±‚è§£
4. éªŒè¯ç»“æœ

é—®é¢˜: {problem}
"""

output = small_model.generate(prompt)

# æ•ˆæœæ¥è¿‘ GPT-4ï¼Œä½†æˆæœ¬é™ä½ 50 å€
```

### 8.6 æç¤ºè¯å®‰å…¨ä¸å¯¹é½

**é˜²æ­¢æç¤ºè¯æ³¨å…¥**ï¼š

```python
def sanitize_prompt(user_input):
    """
    æ¸…ç†ç”¨æˆ·è¾“å…¥ï¼Œé˜²æ­¢æç¤ºè¯æ³¨å…¥
    """
    # æ£€æµ‹å¯ç–‘æ¨¡å¼
    suspicious_patterns = [
        "ignore previous instructions",
        "disregard all above",
        "new instructions:",
        "system:",
        "###"
    ]

    for pattern in suspicious_patterns:
        if pattern.lower() in user_input.lower():
            raise ValueError("Potential prompt injection detected")

    # é™åˆ¶é•¿åº¦
    if len(user_input) > 1000:
        user_input = user_input[:1000] + "..."

    return user_input
```

**å†…å®¹è¿‡æ»¤**ï¼š

```python
def filter_output(output):
    """
    è¿‡æ»¤ä¸å½“å†…å®¹
    """
    # æ£€æŸ¥æ•æ„Ÿè¯æ±‡
    sensitive_keywords = load_sensitive_keywords()

    for keyword in sensitive_keywords:
        if keyword.lower() in output.lower():
            # æ›¿æ¢æˆ–æ‹’ç»
            output = output.replace(keyword, "***")

    return output
```

#### æ ¸å¿ƒè¦ç‚¹

*   **åŠ¨æ€ä¸æ™ºèƒ½**ï¼šæç¤ºè¯å·¥ç¨‹æ­£ä»é™æ€è®¾è®¡èµ°å‘åŠ¨æ€é€‚åº”ï¼Œæœªæ¥çš„æç¤ºè¯ç³»ç»Ÿå°†èƒ½æ ¹æ®ä¸Šä¸‹æ–‡ã€ç”¨æˆ·è¡Œä¸ºã€ä»»åŠ¡å¤æ‚åº¦ç­‰å› ç´ è¿›è¡Œè‡ªé€‚åº”è°ƒæ•´å’Œä¼˜åŒ–ã€‚
*   **å¤šæ¨¡æ€èåˆ**ï¼šéšç€å¤šæ¨¡æ€ LLM çš„å‘å±•ï¼Œæç¤ºè¯å°†ä¸å†å±€é™äºæ–‡æœ¬ï¼Œè€Œæ˜¯èƒ½å¤Ÿèåˆå›¾åƒã€è§†é¢‘ã€éŸ³é¢‘ç­‰å¤šç§æ¨¡æ€ä¿¡æ¯ï¼Œå®ç°æ›´ä¸°å¯Œã€æ›´è‡ªç„¶çš„äº¤äº’å’Œå†…å®¹ç”Ÿæˆã€‚
*   **è‡ªåŠ¨åŒ–ä¸è¿­ä»£**ï¼šè‡ªåŠ¨æç¤ºè¯å·¥ç¨‹ï¼ˆAPEï¼‰å°†ä½¿ LLM èƒ½å¤Ÿè‡ªä¸»ç”Ÿæˆã€è¯„ä¼°å’Œä¼˜åŒ–æç¤ºè¯ï¼Œç»“åˆ Reflexion ç­‰æŠ€æœ¯ï¼Œå®ç°æç¤ºè¯çš„è‡ªæˆ‘è¿­ä»£å’ŒæŒç»­æ”¹è¿›ï¼Œé™ä½äººå·¥è®¾è®¡æˆæœ¬ã€‚
*   **å°æ¨¡å‹çˆ†å‘æ½œåŠ›**ï¼šé€šè¿‡ç²¾å¿ƒè®¾è®¡çš„â€œå¼ºæç¤ºè¯â€ï¼Œå°å‚æ•°é‡æ¨¡å‹ä¹Ÿèƒ½åœ¨ç‰¹å®šä»»åŠ¡ä¸Šè¾¾åˆ°æ¥è¿‘å¤§æ¨¡å‹çš„æ€§èƒ½ï¼ŒåŒæ—¶æ˜¾è‘—é™ä½æ¨ç†æˆæœ¬å’Œå»¶è¿Ÿï¼ŒåŠ é€Ÿ LLM çš„æ™®åŠå’Œè¾¹ç¼˜éƒ¨ç½²ã€‚
*   **å®‰å…¨ä¸å¯¹é½**ï¼šéšç€æç¤ºè¯å·¥ç¨‹çš„å¹¿æ³›åº”ç”¨ï¼Œæç¤ºè¯æ³¨å…¥ï¼ˆPrompt Injectionï¼‰å’Œä¸å½“å†…å®¹ç”Ÿæˆç­‰å®‰å…¨æŒ‘æˆ˜æ—¥ç›Šçªå‡ºã€‚æœªæ¥çš„å‘å±•å°†æ›´åŠ é‡è§†æç¤ºè¯çš„å®‰å…¨é˜²æŠ¤ã€å†…å®¹è¿‡æ»¤å’Œæ¨¡å‹ä¸äººç±»ä»·å€¼è§‚çš„å¯¹é½ã€‚
*   **äº¤äº’å¼ç³»ç»Ÿ**ï¼šäº¤äº’å¼æç¤ºè¯ç³»ç»Ÿå°†ä½¿ AI èƒ½å¤Ÿé€šè¿‡å¤šè½®å¯¹è¯ã€å­¦ä¹ ç”¨æˆ·åå¥½ç­‰æ–¹å¼ï¼ŒåŠ¨æ€ä¼˜åŒ–æç¤ºè¯å’Œç”Ÿæˆç»“æœï¼Œæä¾›æ›´ä¸ªæ€§åŒ–ã€æ›´æ™ºèƒ½çš„è¾…åŠ©ä½“éªŒã€‚

---

## 11. å‚è€ƒèµ„æ–™

### 11.1 ç»å…¸è®ºæ–‡

#### æç¤ºè¯å·¥ç¨‹æ ¸å¿ƒè®ºæ–‡

| è®ºæ–‡                                                                | å¹´ä»½   | æ ¸å¿ƒè´¡çŒ®                 | é“¾æ¥                                                   |
| ----------------------------------------------------------------- | ---- | -------------------- | ---------------------------------------------------- |
| **Language Models are Few-Shot Learners** (GPT-3)                 | 2020 | æå‡º Few-shot Learning | [arXiv:2005.14165](https://arxiv.org/abs/2005.14165) |
| **Chain-of-Thought Prompting**                                    | 2022 | CoT æ¨ç†æŠ€æœ¯             | [arXiv:2201.11903](https://arxiv.org/abs/2201.11903) |
| **Self-Consistency**                                              | 2023 | å¤šè·¯å¾„é‡‡æ ·æŠ•ç¥¨              | [arXiv:2203.11171](https://arxiv.org/abs/2203.11171) |
| **ReAct: Synergizing Reasoning and Acting**                       | 2022 | æ¨ç†+è¡ŒåŠ¨æ¨¡å¼              | [arXiv:2210.03629](https://arxiv.org/abs/2210.03629) |
| **Reflexion: Language Agents with Verbal Reinforcement Learning** | 2023 | è‡ªæˆ‘åæ€è¿­ä»£               | [arXiv:2303.11366](https://arxiv.org/abs/2303.11366) |
| **Tree of Thoughts**                                              | 2023 | æ ‘å½¢æ¨ç†æœç´¢               | [arXiv:2305.10601](https://arxiv.org/abs/2305.10601) |

#### RAG ç›¸å…³è®ºæ–‡

| è®ºæ–‡                                                             | å¹´ä»½   | æ ¸å¿ƒè´¡çŒ®     | é“¾æ¥                                                   |
| -------------------------------------------------------------- | ---- | -------- | ---------------------------------------------------- |
| **Retrieval-Augmented Generation for Knowledge-Intensive NLP** | 2020 | RAG åŸºç¡€æ¡†æ¶ | [arXiv:2005.11401](https://arxiv.org/abs/2005.11401) |
| **HyDE: Precise Zero-Shot Dense Retrieval**                    | 2022 | å‡è®¾æ€§æ–‡æ¡£åµŒå…¥  | [arXiv:2212.10496](https://arxiv.org/abs/2212.10496) |
| **Self-RAG: Learning to Retrieve, Generate, and Critique**     | 2023 | è‡ªæˆ‘æ‰¹åˆ¤ RAG | [arXiv:2310.11511](https://arxiv.org/abs/2310.11511) |

#### ä»£ç ç”Ÿæˆç›¸å…³

| è®ºæ–‡                                                           | å¹´ä»½   | æ ¸å¿ƒè´¡çŒ®   | é“¾æ¥                                                   |
| ------------------------------------------------------------ | ---- | ------ | ---------------------------------------------------- |
| **Evaluating Large Language Models Trained on Code** (Codex) | 2021 | ä»£ç ç”ŸæˆåŸºå‡† | [arXiv:2107.03374](https://arxiv.org/abs/2107.03374) |
| **Program Synthesis with Large Language Models**             | 2022 | ç¨‹åºåˆæˆç»¼è¿° | [arXiv:2210.01790](https://arxiv.org/abs/2210.01790) |
| **Reflexion: Iterative Refinement for Code Generation**      | 2023 | ä»£ç è¿­ä»£ä¼˜åŒ– | [arXiv:2303.11366](https://arxiv.org/abs/2303.11366) |

---

### 11.2 åœ¨çº¿è¯¾ç¨‹

#### æç¤ºè¯å·¥ç¨‹è¯¾ç¨‹

| è¯¾ç¨‹                                            | å¹³å°                | ç‰¹ç‚¹                   | é“¾æ¥                                                                                           |
| --------------------------------------------- | ----------------- | -------------------- | -------------------------------------------------------------------------------------------- |
| **ChatGPT Prompt Engineering for Developers** | DeepLearning.AI   | å´æ©è¾¾ä¸ OpenAI åˆä½œï¼Œé¢å‘å¼€å‘è€… | [è¯¾ç¨‹é“¾æ¥](https://www.deeplearning.ai/short-courses/chatgpt-prompt-engineering-for-developers/) |
| **Prompt Engineering with Llama 2 & 3**       | DeepLearning.AI   | Meta Llama ä¸“é¡¹æç¤ºè¯     | [è¯¾ç¨‹é“¾æ¥](https://www.deeplearning.ai/short-courses/prompt-engineering-with-llama-2/)           |
| **Prompt Engineering Guide**                  | promptingguide.ai | å®Œæ•´äº¤äº’å¼æ•™ç¨‹              | [åœ¨çº¿æ•™ç¨‹](https://www.promptingguide.ai/)                                                       |
| **Advanced Prompt Engineering**               | LearnPrompting    | è¿›é˜¶æŠ€å·§                 | [åœ¨çº¿æ•™ç¨‹](https://learnprompting.org/)                                                          |

#### AI è¾…åŠ©ç¼–ç¨‹è¯¾ç¨‹

| è¯¾ç¨‹                          | å¹³å°       | ç‰¹ç‚¹          | é“¾æ¥                                               |
| --------------------------- | -------- | ----------- | ------------------------------------------------ |
| **AI-Assisted Programming** | Coursera | AI ç¼–ç¨‹å®è·µ     | [è¯¾ç¨‹é“¾æ¥](https://www.coursera.org/)                |
| **LLM for Code**            | Stanford | ä»£ç  LLM æ·±åº¦è®²è§£ | [CS25: V3](https://web.stanford.edu/class/cs25/) |

#### æ¸¸æˆå¼€å‘è¯¾ç¨‹

| è¯¾ç¨‹                              | å¹³å°          | ç‰¹ç‚¹          | é“¾æ¥                                                |
| ------------------------------- | ----------- | ----------- | ------------------------------------------------- |
| **Unity Game Development**      | Unity Learn | å®˜æ–¹æ•™ç¨‹        | [Unity Learn](https://learn.unity.com/)           |
| **Unreal Engine C++ Developer** | Udemy       | UE C++ å¼€å‘   | [è¯¾ç¨‹é“¾æ¥](https://www.udemy.com/)                    |
| **Cocos Creator å¼€å‘æ•™ç¨‹**          | Cocos å®˜æ–¹æ–‡æ¡£  | Cocos TS å¼€å‘ | [å®˜æ–¹æ–‡æ¡£](https://docs.cocos.com/creator/manual/zh/) |

---

### 11.3 å¼€æºé¡¹ç›®

#### æç¤ºè¯å·¥ç¨‹æ¡†æ¶

| é¡¹ç›®                 | Star | æè¿°            | é“¾æ¥                                                  |
| ------------------ | ---- | ------------- | --------------------------------------------------- |
| **LangChain**      | 90k+ | æœ€æµè¡Œçš„ LLM åº”ç”¨æ¡†æ¶ | [GitHub](https://github.com/langchain-ai/langchain) |
| **LlamaIndex**     | 38k+ | RAG ä¸“ç”¨æ¡†æ¶      | [GitHub](https://github.com/run-llama/llama_index)  |
| **DSPy**           | 20k+ | ç¨‹åºåŒ–æç¤ºè¯        | [GitHub](https://github.com/stanfordnlp/dspy)       |
| **PromptTemplate** | 5k+  | æç¤ºè¯æ¨¡æ¿ç®¡ç†       | [GitHub](https://github.com/microsoft/promptbase)   |
| **PromptTools**    | 4k+  | æç¤ºè¯æµ‹è¯•è¯„ä¼°       | [GitHub](https://github.com/hegelai/prompttools)    |

#### æ¸¸æˆå¼€å‘ + AI é¡¹ç›®

| é¡¹ç›®                 | Star  | æè¿°                      | é“¾æ¥                                                         |
| ------------------ | ----- | ----------------------- | ---------------------------------------------------------- |
| **Unity-GPT**      | 2k+   | Unity + ChatGPT é›†æˆ      | [GitHub](https://github.com/rdmtk/Unity-GPT)               |
| **AI-Game-Dev**    | 1.5k+ | AI æ¸¸æˆå¼€å‘èµ„æºåˆé›†             | [GitHub](https://github.com/StevePfister/AI-Game-Dev)      |
| **LLM-Unity**      | 800+  | Unity LLM é›†æˆæ’ä»¶          | [GitHub](https://github.com/colinfhughes/llm-unity)        |
| **Unreal-ChatGPT** | 600+  | Unreal + ChatGPT Plugin | [GitHub](https://github.com/spacevik/UnrealChatGPT)        |
| **Cocos-AI**       | 400+  | Cocos Creator AI å·¥å…·é›†    | [GitHub](https://github.com/cocos-creator/cocos-analytics) |

#### ä»£ç ç”Ÿæˆä¸å®¡æŸ¥

| é¡¹ç›®           | Star | æè¿°                  | é“¾æ¥                                                  |
| ------------ | ---- | ------------------- | --------------------------------------------------- |
| **Cursor**   | -    | AI ä»£ç ç¼–è¾‘å™¨            | [å®˜ç½‘](https://cursor.sh/)                            |
| **Continue** | 13k+ | VS Code AI æ’ä»¶       | [GitHub](https://github.com/continuedev/continue)   |
| **Aider**    | 11k+ | AI ç¼–ç¨‹åŠ©æ‰‹ CLI         | [GitHub](https://github.com/paul-gauthier/aider)    |
| **CodeGPT**  | 8k+  | VS Code/IntelliJ æ’ä»¶ | [GitHub](https://github.com/fabioiroberto/code-gpt) |

---

### 11.4 æ¸¸æˆå¼€å‘ä¸“å±èµ„æº

#### Unity AI èµ„æº

| èµ„æº                  | ç±»å‹   | æè¿°            | é“¾æ¥                                              |
| ------------------- | ---- | ------------- | ----------------------------------------------- |
| **Unity AI Labs**   | å®˜æ–¹é¡¹ç›® | Unity AI å®éªŒé¡¹ç›® | [å®˜ç½‘](https://unity.com/products/unity-ai)       |
| **Unity Sentis**    | å®˜æ–¹å·¥å…· | åœ¨è®¾å¤‡ä¸Šè¿è¡Œ AI æ¨¡å‹  | [å®˜ç½‘](https://unity.com/products/sentis)         |
| **Unity Muse**      | å®˜æ–¹å·¥å…· | AI è¾…åŠ©åˆ›ä½œå·¥å…·     | [å®˜ç½‘](https://unity.com/products/muse)           |
| **Unity AI GitHub** | å¼€æº   | Unity AI å¼€æºé¡¹ç›® | [GitHub](https://github.com/Unity-Technologies) |

#### Unreal AI èµ„æº

| èµ„æº                   | ç±»å‹   | æè¿°         | é“¾æ¥                                                   |
| -------------------- | ---- | ---------- | ---------------------------------------------------- |
| **Unreal Engine AI** | å®˜æ–¹æ–‡æ¡£ | UE AI åŠŸèƒ½æ–‡æ¡£ | [æ–‡æ¡£](https://docs.unrealengine.com/5.0/en-US/)       |
| **NVIDIA ACE**       | SDK  | æ¸¸æˆ AI å¯¹è¯ç³»ç»Ÿ | [å®˜ç½‘](https://www.nvidia.com/en-us/technologies/ace/) |
| **Inworld AI**       | SDK  | æ¸¸æˆ NPC AI  | [å®˜ç½‘](https://www.inworld.ai/)                        |
| **Convai**           | SDK  | è¯­éŸ³å¯¹è¯ AI    | [å®˜ç½‘](https://www.convai.com/)                        |

#### Cocos Creator AI èµ„æº

| èµ„æº                    | ç±»å‹   | æè¿°            | é“¾æ¥                                              |
| --------------------- | ---- | ------------- | ----------------------------------------------- |
| **Cocos AI æ•™ç¨‹**       | æ•™ç¨‹   | Cocos AI é›†æˆæŒ‡å— | [ç¤¾åŒºæ•™ç¨‹](https://www.cocos.com/)                  |
| **Cocos Creator 3.x** | å®˜æ–¹æ–‡æ¡£ | æœ€æ–°ç‰ˆæœ¬æ–‡æ¡£        | [æ–‡æ¡£](https://docs.cocos.com/creator/manual/zh/) |

---

### 11.5 å®ç”¨å·¥å…·ä¸å¹³å°

#### æç¤ºè¯ç®¡ç†å¹³å°

| å·¥å…·              | ç‰¹ç‚¹             | ä»·æ ¼    | é“¾æ¥                                        |
| --------------- | -------------- | ----- | ----------------------------------------- |
| **LangSmith**   | LangChain å®˜æ–¹å¹³å° | å…è´¹è¯•ç”¨  | [å®˜ç½‘](https://www.langchain.com/langsmith) |
| **PromptHub**   | å›¢é˜Ÿåä½œ           | $29/æœˆ | [å®˜ç½‘](https://prompthub.us/)               |
| **PromptLayer** | ç›‘æ§ä¸åˆ†æ          | å…è´¹å±‚   | [å®˜ç½‘](https://promptlayer.com/)            |
| **HumanLoop**   | RLHF ä¼˜åŒ–        | ä¼ä¸šç‰ˆ   | [å®˜ç½‘](https://humanloop.com/)              |

#### ä»£ç è¯„ä¼°å·¥å…·

| å·¥å…·                | ç‰¹ç‚¹          | é“¾æ¥                                                        |
| ----------------- | ----------- | --------------------------------------------------------- |
| **PromptBench**   | å¾®è½¯å¼€æºè¯„ä¼°æ¡†æ¶    | [GitHub](https://github.com/microsoft/promptbench)        |
| **EvalPlus**      | ä»£ç ç”Ÿæˆè¯„ä¼°      | [GitHub](https://github.com/evalplus/evalplus)            |
| **BigCode Bench** | å¤§è§„æ¨¡ä»£ç åŸºå‡†     | [GitHub](https://github.com/bigcode-project/bigcodebench) |
| **HumanEval**     | OpenAI ä»£ç åŸºå‡† | [GitHub](https://github.com/openai/human-eval)            |

#### æ¸¸æˆå¼€å‘ AI å·¥å…·

| å·¥å…·              | ç”¨é€”        | é“¾æ¥                              |
| --------------- | --------- | ------------------------------- |
| **Scenario**    | æ¸¸æˆ NPC å¯¹è¯ | [å®˜ç½‘](https://www.scenario.com/) |
| **Latitude**    | æ¸¸æˆ AI æ•…äº‹  | [å®˜ç½‘](https://www.latitude.io/)  |
| **Charisma.ai** | è§’è‰²å¯¹è¯ AI   | [å®˜ç½‘](https://charisma.ai/)      |
| **Alethea AI**  | è§’è‰²/NFC ç”Ÿæˆ | [å®˜ç½‘](https://alethea.ai/)       |

---

### 11.6 ç¤¾åŒºä¸è®ºå›

#### æç¤ºè¯å·¥ç¨‹ç¤¾åŒº

| ç¤¾åŒº                           | æ´»è·ƒåº¦               | é“¾æ¥                                                                     |
| ---------------------------- | ----------------- | ---------------------------------------------------------------------- |
| **Learn Prompting**          | Discord (50k+)    | [Discord](https://learnprompting.org/discord)                          |
| **Prompt Engineering Guide** | GitHub Discussion | [è®¨è®ºåŒº](https://github.com/dair-ai/Prompt-Engineering-Guide/discussions) |
| **r/ChatGPT**                | Reddit (2M+)      | [Reddit](https://www.reddit.com/r/ChatGPT/)                            |
| **r/OpenAI**                 | Reddit (500k+)    | [Reddit](https://www.reddit.com/r/OpenAI/)                             |

#### æ¸¸æˆå¼€å‘ AI ç¤¾åŒº

| ç¤¾åŒº              | æ´»è·ƒåº¦            | é“¾æ¥                                                               |
| --------------- | -------------- | ---------------------------------------------------------------- |
| **AI in Games** | Discord (10k+) | [Discord](https://discord.gg/ai-games)                           |
| **Unity AI**    | Forum          | [è®ºå›](https://forum.unity.com/forums/artificial-intelligence.63/) |
| **Unreal AI**   | Forum          | [è®ºå›](https://forums.unrealengine.com/)                           |
| **Cocos AI å¼€å‘** | QQ ç¾¤           | [ç¤¾åŒº](https://www.cocos.com/)                                     |

#### ä¸­æ–‡ç¤¾åŒº

| ç¤¾åŒº               | æè¿°             | é“¾æ¥                                                                               |
| ---------------- | -------------- | -------------------------------------------------------------------------------- |
| **LangChain ä¸­æ–‡** | LangChain ä¸­æ–‡ç¤¾åŒº | [GitHub](https://github.com/liaokongVFX/LangChain-Chinese-Getting-Started-Guide) |
| **Unity ä¸­æ–‡**     | Unity ä¸­æ–‡ç¤¾åŒº     | [è®ºå›](https://forum.unity.cn/)                                                    |
| **Indienova**    | ç‹¬ç«‹æ¸¸æˆå¼€å‘         | [å®˜ç½‘](https://indienova.com/)                                                     |
| **GameRes**      | æ¸¸æˆå¼€å‘èµ„æº         | [æ¸¸èµ„ç½‘](https://forum.gameres.com/)                                                |

---

### 11.7 æ¨èé˜…è¯»é¡ºåº

#### åˆå­¦è€…è·¯å¾„

1. **ç¬¬ä¸€æ­¥**ï¼šå®Œæˆ DeepLearning.AI çš„ã€ŠChatGPT Prompt Engineering for Developersã€‹è¯¾ç¨‹
2. **ç¬¬äºŒæ­¥**ï¼šé˜…è¯» promptingguide.ai çš„åŸºç¡€æ•™ç¨‹
3. **ç¬¬ä¸‰æ­¥**ï¼šåœ¨é¡¹ç›®ä¸­å®è·µåŸºç¡€ Few-Shot å’Œ CoT æŠ€æœ¯
4. **ç¬¬å››æ­¥**ï¼šå­¦ä¹  LangChain/LlamaIndex æ¡†æ¶

#### æ¸¸æˆå¼€å‘è€…è·¯å¾„

1. **ç¬¬ä¸€æ­¥**ï¼šæŒæ¡æœ¬æŒ‡å—ç¬¬ 4 èŠ‚ï¼ˆæ¸¸æˆå¼€å‘ä¸“é¡¹æŠ€æœ¯ï¼‰
2. **ç¬¬äºŒæ­¥**ï¼šå­¦ä¹  Unity/Unreal AI å®˜æ–¹æ–‡æ¡£
3. **ç¬¬ä¸‰æ­¥**ï¼šå®éªŒ Cursor æˆ– Continue ç­‰ AI ç¼–ç å·¥å…·
4. **ç¬¬å››æ­¥**ï¼šåœ¨æ¸¸æˆé¡¹ç›®ä¸­åº”ç”¨ AI è¾…åŠ©å¼€å‘

#### è¿›é˜¶ç ”ç©¶è·¯å¾„

1. **ç¬¬ä¸€æ­¥**ï¼šé˜…è¯» CoTã€ReActã€Reflexion ç­‰æ ¸å¿ƒè®ºæ–‡
2. **ç¬¬äºŒæ­¥**ï¼šå­¦ä¹  DSPy ç¨‹åºåŒ–æç¤ºè¯æ¡†æ¶
3. **ç¬¬ä¸‰æ­¥**ï¼šç ”ç©¶ RAG é«˜çº§æŠ€æœ¯ï¼ˆHyDEã€Self-RAGï¼‰
4. **ç¬¬å››æ­¥**ï¼šå‚ä¸å¼€æºé¡¹ç›®æˆ–å‘è¡¨è®ºæ–‡

---

**æç¤º**ï¼šå»ºè®®æ”¶è—æ­¤ç« èŠ‚ï¼Œéšæ—¶æŸ¥é˜…æœ€æ–°èµ„æºå’Œå·¥å…·æ›´æ–°ã€‚

---

## 12. æ€»ç»“

æç¤ºè¯å·¥ç¨‹æ˜¯è¿æ¥äººç±»æ„å›¾ä¸ AI èƒ½åŠ›çš„æ¡¥æ¢ã€‚å¯¹äºæ¸¸æˆå¼€å‘è€…è€Œè¨€ï¼ŒæŒæ¡è¿™äº›æŠ€æœ¯å¯ä»¥æ˜¾è‘—æå‡å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚

### å…³é”®è¦ç‚¹

1. **åœºæ™¯é©±åŠ¨**ï¼šæ¸¸æˆå¼€å‘åœºæ™¯ï¼ˆUIã€ç³»ç»Ÿã€ç½‘ç»œã€æ€§èƒ½ï¼‰éœ€è¦ä¸“é—¨çš„æç¤ºè¯ç­–ç•¥
2. **æ¶æ„ä¼˜å…ˆ**ï¼šå…ˆè®¾è®¡æ¶æ„ï¼ˆMVC/ECSï¼‰ï¼Œå†ç”Ÿæˆå…·ä½“ä»£ç 
3. **æ€§èƒ½æ•æ„Ÿ**ï¼šæ¸¸æˆä»£ç å¯¹æ€§èƒ½è¦æ±‚é«˜ï¼Œæç¤ºè¯åº”æ˜ç¡®æ€§èƒ½çº¦æŸ
4. **è¿­ä»£ä¼˜åŒ–**ï¼šé€šè¿‡ Reflexion å’Œæµ‹è¯•åé¦ˆæŒç»­æ”¹è¿›ä»£ç 
5. **å·¥å…·ç»“åˆ**ï¼šå–„ç”¨æ¸¸æˆå¼•æ“ç‰¹æ€§ï¼ˆUnity Inspectorã€UE è“å›¾ç­‰ï¼‰

### æŒç»­å­¦ä¹ 

æ¸¸æˆå¼€å‘çš„æç¤ºè¯å·¥ç¨‹æ˜¯ä¸€ä¸ªå¿«é€Ÿå‘å±•çš„é¢†åŸŸã€‚ä¿æŒå­¦ä¹ ï¼š

- ğŸ“š é˜…è¯»æœ€æ–°æ¸¸æˆ AI è®ºæ–‡
- ğŸ® ç ”ç©¶ä¸»æµå¼•æ“æœ€ä½³å®è·µ
- ğŸ‘¥ å‚ä¸æ¸¸æˆå¼€å‘ç¤¾åŒº
- ğŸ’¡ åˆ†äº«æç¤ºè¯ç»éªŒ
- ğŸ”¬ å®éªŒæ–°æŠ€æœ¯ï¼ˆLLM ä»£ç ç”Ÿæˆã€AI è¾…åŠ©è®¾è®¡ï¼‰

---

**æ–‡æ¡£ç‰ˆæœ¬**: v3.0
**æœ€åæ›´æ–°**: 2026-01-25
**ä¸‹æ¬¡æ›´æ–°**: æ ¹æ®æ¸¸æˆå¼€å‘ç¤¾åŒºåé¦ˆæŒç»­æ”¹è¿›

---

**ç¥ä½ æ¸¸æˆå¼€å‘ä¹‹æ—…é¡ºåˆ©ï¼** ğŸ®âœ¨
