# Week 6 — 使用 Semgrep 扫描和修复漏洞

## 作业概述
使用 **Semgrep** 对 `week6/` 中提供的应用运行静态分析。对发现进行分类并修复至少 3 个安全问题。在你的 write-up 中，解释 Semgrep 发现了什么问题以及你如何修复它们。


## 了解 Semgrep
Semgrep 是一个开源静态分析工具，用于搜索代码、查找错误并强制执行安全护栏和编码标准。

1. 点击[此处](https://github.com/semgrep/semgrep/blob/develop/README.md)了解 Semgrep。

2. 按照上面的链接中的安装说明进行操作。你可以选择使用 **Semgrep Appsec Platform** 或 **CLI 工具**。


## 扫描任务

### 你将扫描什么
- 后端 Python (FastAPI)：`week6/backend/`
- 前端 JavaScript：`week6/frontend/`
- 依赖项：`week6/requirements.txt`
- 配置/环境（用于密钥）：`week6/` 中的文件


### 运行常规安全扫描以及针对密钥和依赖项的聚焦扫描。

从**作业仓库根目录**运行以下命令以应用精选的 CI 风格包，其中包括代码和密钥规则：
```bash
semgrep ci --subdir week6
```

## 任务
1. 选择 Semgrep 识别的任何 3 个问题，并使用你选择的 AI 编码工具修复它们。

2. 显示精确的编辑并解释缓解措施（例如，参数化 SQL、更安全的 API、更强的加密、净化的 DOM 写入、限制的 CORS、依赖项升级）。

3. 重要：确保修复后应用仍能运行且测试仍能通过。

## 交付成果
### 1. 简要发现概述
- 总结 Semgrep 报告的类别（SAST/密钥/SCA）。
- 注明你选择忽略的任何误报或嘈杂规则以及原因。

### 2. 三个修复（修复前 → 修复后）
对于每个修复的问题：
- 文件和行号
- Semgrep 标记的规则/类别
- 简要风险描述
- 你的更改（简短代码差异或解释、AI 编码工具使用情况）
- 为什么这可以缓解问题


## 提示
- 优先使用解决根本原因的最小、有针对性的更改。
- 每次修复后重新运行 Semgrep 以确认发现已解决且未引入新发现。
- 对于依赖项，记录升级的版本，如果你使用了供应链扫描，请链接到公告。


## 提交说明
1. 确保你已将所有更改推送到远程仓库以供评分。
2. 确保你已将 brentju 和 febielin 都添加为作业仓库的协作者。
2. 通过 Gradescope 提交。
